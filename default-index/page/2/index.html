<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":null},"back2top":{"enable":true,"sidebar":true,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":true,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="May All Your Troubles Be little Ones">
<meta property="og:type" content="website">
<meta property="og:title" content="Olivia的博客">
<meta property="og:url" content="http://example.com/default-index/page/2/index.html">
<meta property="og:site_name" content="Olivia的博客">
<meta property="og:description" content="May All Your Troubles Be little Ones">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Olivia">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://example.com/default-index/page/2/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>
<link rel="stylesheet" href="//cdn.jsdelivr.net/gh/theme-next/theme-next-needmoreshare2@1/needsharebutton.min.css"><style>
#needsharebutton-postbottom {
  cursor: pointer;
  height: 26px;
  margin-top: 10px;
  position: relative;
}
#needsharebutton-postbottom .btn {
  border: 1px solid $btn-default-border-color;
  border-radius: 3px;
  display: initial;
  padding: 1px 4px;
}
</style><style>
#needsharebutton-float {
  bottom: 88px;
  cursor: pointer;
  left: -8px;
  position: fixed;
  z-index: 9999;
}
#needsharebutton-float .btn {
  border: 1px solid $btn-default-border-color;
  border-radius: 4px;
  padding: 0 10px 0 14px;
}
</style>
  <title>Olivia的博客</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Olivia的博客</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="reading-progress-bar"></div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/01/30/%E7%AC%AC%E4%BA%8C%E5%91%A8/Attention%20is%20%20all%20you%20need%E8%AE%BA%E6%96%87%E7%A0%94%E8%AF%BB/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Olivia">
      <meta itemprop="description" content="May All Your Troubles Be little Ones">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Olivia的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/01/30/%E7%AC%AC%E4%BA%8C%E5%91%A8/Attention%20is%20%20all%20you%20need%E8%AE%BA%E6%96%87%E7%A0%94%E8%AF%BB/" class="post-title-link" itemprop="url">Attention is  all you need</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-01-30 00:00:00" itemprop="dateCreated datePublished" datetime="2021-01-30T00:00:00+08:00">2021-01-30</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-05-04 15:07:57" itemprop="dateModified" datetime="2021-05-04T15:07:57+08:00">2021-05-04</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/NLP/" itemprop="url" rel="index"><span itemprop="name">NLP</span></a>
                </span>
                  >
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/NLP/paper-comprehension/" itemprop="url" rel="index"><span itemprop="name">paper comprehension</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>4.2k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>4 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="attention-is-all-you-need">Attention Is All You Need</h1>
<h2 id="abstract">Abstract</h2>
<p>​ 之前好的序列模型是基于复杂的RNN或者CNN神经网络、拥有编码器和解码器的Seq2Seq模型，表现更佳的模型还可通过注意力机制来连接编码器和解码器。本文提出的新的网络架构，即Transformer，<strong>完全基于注意力机制而消除了RNN或CNN</strong>。并且效果更好。</p>
<h2 id="introduction">1. Introduction</h2>
<ul>
<li><p>RNN，特别是LSTM及GRU，是目前序列分析的最新方法，之后就一直致力于扩大RNN和Seq2Seq体系结构的界限。</p></li>
<li><p>RNN是通过输入和输出序列的位置顺序来考虑计算，即将位置与时间步对齐，下个隐藏状态<span class="math inline">\(h_t\)</span>是上一层隐藏状态<span class="math inline">\(h_{t-1}\)</span>和这一层输入的函数。<strong>这种固有的顺序性质阻止了并行训练</strong>，尤其在较长序列上影响最为显著。最近的工作是通过<strong>分解技巧</strong>和<strong>条件计算</strong>使得在计算效率上取得了显著提高，同时后者还提高了模型性能。<strong>但是顺序计算的基本约束依然存在。</strong></p></li>
<li><p>注意力机制变成序列模型不可或缺的一部分，<strong>综合考虑了整体依赖，而无需专注与在输入和输出序列中的距离</strong>，但注意力机制目前都是与RNN结合使用的。</p></li>
<li><p>本文提出了Transformer，它是完全依赖于注意力机制来描述输入和输出序列之间的全局依赖关系。并且效果很好。</p></li>
</ul>
<h2 id="background">2. Background</h2>
<ul>
<li><p>【凡是可以并行计算的，学习上下文依赖关系不行】</p>
<p>减少顺序计算的目标也推动了扩展神经网络GPU、ByteNet、ConvS2S的发展。这些都是用CNN作为基本构件，并行计算所有输入输出位置上的隐藏层。<strong>在这些模型中，关联前后文所需要的计算量在ConvS2S中是随距离增加线性增长的，而对于ByteNet则是随距离增加呈对数增长，从而难以学习到上下文之间的依赖关系。</strong>在Transformer中，<strong>这种操作可以被减少为恒定的操作次数</strong>，尽管是以平均注意力加权位置而导致的有效分辨率降低，但本文用3.2节中所述的Multi-Head Attention抵消了这种影响</p></li>
<li><p>Self-Attention是一种<strong>与单个序列不同位置相关</strong>的注意力机制，目的是计算序列的representation。Self-Attention也被广泛应用</p></li>
<li><p>End-to-end记忆网络是基于递归注意力的，而不是RNN[????]，并且已经被证明在简单语言问答和语言建模任务中表现良好。</p></li>
<li><p>Transformer是第一个完全依赖self-attention的，而无需RNN或者CNN。</p></li>
</ul>
<h2 id="model-architecture">3. Model Architecture</h2>
<ul>
<li><p>encoder将输入序列<span class="math inline">\((x_1,...,x_n)\)</span>映射到连续表示形式<span class="math inline">\(z=(z_1,...z_n)\)</span>。给出<span class="math inline">\(z\)</span>，decoder一次性生成输出序列<span class="math inline">\((y_1,...y_m)\)</span>，每一步都是自回归的，生成下一个的时候都会把之前生成序列当成附加输入进行计算。</p>
<figure>
<img src="https://s3.ax1x.com/2021/02/01/yeBL5t.png" alt="yeBL5t.png" /><figcaption aria-hidden="true">yeBL5t.png</figcaption>
</figure></li>
</ul>
<h3 id="encoder-and-decoder-stacks">3.1 Encoder and Decoder Stacks</h3>
<ul>
<li><p>Encoder：由6个Block堆叠而成。每一层有两个子层：multi-head self-attention层和全连接层。两个子层都采用残差连接的形式，然后进行层归一化。即每一层的输出为<span class="math inline">\(LayerNorm(x+Sublayer(x))\)</span>，其中<span class="math inline">\(Sublayer(x)\)</span>是由当前子层本身实现的功能。为了实现残差连接，<strong>模型中所有子层及嵌入层的输出均为512维。</strong></p></li>
<li><p>Decoder：由6个Block堆叠而成。每层除了同Encoder层的两个子层外，还有针对encoder输出的multi-head attention的子层。每个子层也进行残差连接，然后进行层归一化。<strong>同时修改了self-attention子层来prevent positions from attending to subsequent positions。这种mask，加上output embeddings偏移一个位置，保证了位置i只能依赖于位置小于i的输出。</strong></p></li>
</ul>
<h3 id="attention">3.2 Attention</h3>
<ul>
<li><p>Attention为Query和一系列Key-Value对的映射输出。其中Q、K、V都是向量。</p>
<p><strong>Attention的本质：</strong>The output is computed as a <strong>weighted sum of the Values</strong>, where <strong>the weight assigned to each value is computed by a compatibility function of the Query with the corresponding Key</strong></p>
<p><img src="https://s3.ax1x.com/2021/02/01/yZxogP.png" alt="yeSwS1.png" /><img src="https://s3.ax1x.com/2021/02/01/yeSwS1.png" alt="yeSwS1.png" /></p></li>
</ul>
<h4 id="scaled-dot-product-attention">3.2.1 Scaled Dot-Product Attention</h4>
<ul>
<li><p>Input: <span class="math inline">\(Q(dim=d_k)\)</span>、<span class="math inline">\(K(dim=d_k)\)</span>、<span class="math inline">\(V(dim=d_v)\)</span></p>
<p><strong>compute the dot products of the Query with all Keys, divide each by</strong> <span class="math inline">\(\sqrt {d_k}\)</span></p>
<p><strong>and apply a softmax function to obtain the weights on the values.</strong></p></li>
<li><p>the matrix of outputs: <span class="math display">\[
Attention(Q,K,V)=softmax(\frac {QK^T}{\sqrt {d_k}})V
\]</span></p></li>
<li><p>two commonly used attention functions: additive attention; dot-product attention</p>
<ul>
<li>dot-product与我们算法相同，只是有个比例因子<span class="math inline">\(\sqrt {d_k}\)</span></li>
<li>additive attention是利用一个具有单个隐藏层的前馈网络来计算compatibility的。</li>
<li>二者理论上复杂度相似，但前者可以使用高度优化的矩阵乘法实现，故速度更快，空间效率更高。</li>
</ul></li>
<li><p>对于<span class="math inline">\(d_k\)</span>值较小的情况，以上两种机制表现相似。但对于较大值的<span class="math inline">\(d_k\)</span>，后者优于前者，可能是对于较大的<span class="math inline">\(d_k\)</span>，dot-products在数量级上增长很大，从而将<span class="math inline">\(softmax\)</span>函数推倒梯度非常小的区域。<strong>故为抵消这种影响，采用<span class="math inline">\(\frac {1}{\sqrt {d_k}}\)</span>缩放。</strong></p></li>
</ul>
<h4 id="multi-head-attention">3.2.2 Multi-Head Attention</h4>
<ul>
<li><p>并行执行多个Attention Function【多头 multi-head】将Q、K、V投影到不同<span class="math inline">\(d_v\)</span>维的输出值上，将其concatenate在一起再进行线性投影，得到最终值</p></li>
<li><p>the matrix of outputs: <span class="math display">\[
MultiHead(Q,K,V)=Concat(head_1,...head_h)W^O\\
\qquad\qquad where\ head_i=Attention(QW_i^Q,KW_i^K,VW_i^V)
\]</span> the dimension of each parameter matrices: <span class="math display">\[
W_i^Q:d_{model}×d_k\\
W_i^K:d_{model}×d_k\\
W_i^Q:d_{model}×d_v\\
W^O:hd_v×d_{model}
\]</span> 在这项工作中，采用<span class="math inline">\(h=8\)</span>个平行的Attention Layers。由于输出维数【<span class="math inline">\(d_{model}\)</span>】固定为512【本文中假设的】，故<span class="math inline">\(d_k=d_v=d_{model}/h=64\)</span>。由于每个头部的维数减小，总的计算量与单头Attention计算量类似。</p></li>
<li><p>Multi-head attention可以使得模型能够在不同的位置共同关注来自不同子空间的信息。</p></li>
</ul>
<h4 id="applications-of-attention-in-our-model">3.2.3 Applications of Attention in our Model</h4>
<ul>
<li>Transformer使用multi-head attention主要有三点不同：
<ul>
<li>在"encoder-decoder attention"层中，Query是来自前一层decoder层，Key和Value是来自encoder的输出。<strong>这使得decoder中每个位置都可以参考到输入序列中的所有位置</strong>。这种模仿了典型的encoder-decoder网络。</li>
<li>encoder包含self-attention层。在self-attention层中，所有的K、V、Q都来自同一个地方，在本例中是encoder中前一层的输出。<strong>encoder中的每个位置都可以关注encoder前一层中的所有位置信息。</strong></li>
<li>同样的，<strong>decoder中的self-attention层允许decoder中的每个位置关注到decoder中包含本位置在内的所有位置信息。</strong>为了防止decoder中的信息往左流动，已保证auto-regressive特性。通过[???????????]</li>
</ul></li>
</ul>
<h3 id="position-wise-feed-forward-networks">3.3 Position-wise Feed-Forward Networks</h3>
<ul>
<li>除了attention子层外，encoder和decoder中的每一层都包含一个全连接的前馈网络，这个网络分别应用在每个位置，参数是一样的。包含两个线性变换，激活函数为ReLU【就是max那一部分】</li>
</ul>
<p><span class="math display">\[
FFN(x)=max(0,xW_1+b_1)W_2+b_2
\]</span></p>
<h3 id="embeddings-and-softmax">3.4 Embeddings and Softmax</h3>
<ul>
<li>我们先使用embeddings把input和output转换为<span class="math inline">\(d_{model}\)</span>维的向量。我们也使用通常的线性变换和<span class="math inline">\(softmax\)</span>函数来将解码器的输出转换为下一个词的概率。</li>
<li>不同词计算K、Q、V时共享<span class="math inline">\(W_K,W_Q,W_V\)</span>矩阵，同时在embedding层再把这些权重乘<span class="math inline">\(\sqrt {d_{model}}\)</span></li>
</ul>
<h3 id="positional-encoding">3.5 Positional Encoding</h3>
<ul>
<li><p>由于我们的网络不包含递归和卷积，为了使模型利用序列的顺序特性，我们必须注入一些关于序列的相对或绝对位置信息。</p></li>
<li><p>The positional encodings have the same dimension <span class="math inline">\(d_{model}\)</span> as the embeddings, <strong>so that the two can be summed</strong>。有很多位置编码可以选择，learned和fixed</p></li>
<li><p>公式： <span class="math display">\[
PE_{(pos,2i)}=sin(pos/10000^{2i/d_{model}})\\
PE_{(pos,2i+1)}=cos(pos/10000^{2i/d_{model}})
\]</span> 位置编码的每个维度对应与一个正弦曲线。波长呈几何级数从<span class="math inline">\(2π\)</span>到<span class="math inline">\(10000·2π\)</span>。之所以选择这个函数是因为它可以让模型很容易的<strong>通过相对位置来学习</strong>，因为对于任意固定的偏移量<span class="math inline">\(k\)</span>，<span class="math inline">\(PE_{pos+k}\)</span>可以表示为<span class="math inline">\(PE_{pos}\)</span>的线性函数</p></li>
</ul>

      
    </div>

    
	
	

	
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/01/30/%E7%AC%AC%E4%BA%8C%E5%91%A8/%E8%8E%AB%E7%83%A6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Olivia">
      <meta itemprop="description" content="May All Your Troubles Be little Ones">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Olivia的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/01/30/%E7%AC%AC%E4%BA%8C%E5%91%A8/%E8%8E%AB%E7%83%A6/" class="post-title-link" itemprop="url">NLP快速入门-莫烦</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-01-30 00:00:00" itemprop="dateCreated datePublished" datetime="2021-01-30T00:00:00+08:00">2021-01-30</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-05-04 15:01:29" itemprop="dateModified" datetime="2021-05-04T15:01:29+08:00">2021-05-04</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/NLP/" itemprop="url" rel="index"><span itemprop="name">NLP</span></a>
                </span>
                  >
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/NLP/notes/" itemprop="url" rel="index"><span itemprop="name">notes</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>3.6k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>3 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="莫烦-nlp快速入门">莫烦-NLP快速入门</h1>
<h2 id="搜索">1. 搜索</h2>
<h3 id="tf-idf算法">1.1 TF-IDF算法</h3>
<ul>
<li><p>正排/倒排索引</p>
<p>正排索引是在每次搜索时都对所有材料进行阅读，然后找出关键词，效率差</p>
<p><strong>倒排索引</strong>是第一次拿到材料时即构造索引，后续搜索中复用，即一种词语匹配加返回索引材料的过程。</p></li>
<li><p><strong>TF-IDF算法</strong>（处理匹配排序）</p>
<p>位于提高精确度，对筛选出来的内容做一个【问题与内容】的相似度排序。</p>
<p><strong>TF(Term Frequency)</strong>：词频 <strong>IDF(Inverse Document Frequency)</strong>：逆文本频率指数</p>
<figure>
<img src="https://i.loli.net/2021/05/04/DXqbSofJiyAG38m.png" alt="image-20210120212238121.png" /><figcaption aria-hidden="true">image-20210120212238121.png</figcaption>
</figure>
<p><strong>TF</strong>是以文章为中心的局部词信息；<strong>IDF</strong>是全局的词信息的区分力大小，越大则区分力越高；结合即可通过<strong>TF-IDF</strong>信息来表达文章了</p>
<figure>
<img src="https://i.loli.net/2021/05/04/9MVxzRr8fDNOFJZ.png" alt="image-20210120212514907.png" /><figcaption aria-hidden="true">image-20210120212514907.png</figcaption>
</figure>
<p>搜索时会计算搜索问句的<strong>TF-IDF</strong>的值，将问句和文章转变成<strong>向量</strong>（上例中为四维）投射到空间中，然后计算问句和每篇文章的cosine距离（角度距离）。</p>
<figure>
<img src="https://i.loli.net/2021/05/04/vDd4wYzgKWLu3Sx.png" alt="image-20210120213430571.png" /><figcaption aria-hidden="true">image-20210120213430571.png</figcaption>
</figure>
<p>可作为取关键词的依据，但某个领域的<strong>IDF表</strong>可能相似度很高，所以可以用一个带有金融属性的<strong>IDF</strong>表来优化对金融子领域的搜索。<strong>IDF</strong>虽然带有全局信息，但只是一个领域，一个子集。</p>
<p>集群版搜索引擎 <strong>ElasticSearch</strong>：框架，可处理海量数据，用到<strong>BM25算法</strong></p>
<p><em>有Python+Numpy和sklearn两种实现代码</em></p></li>
</ul>
<hr />
<h2 id="理解词语">2. 理解词语</h2>
<h3 id="词向量">2.1 词向量</h3>
<ul>
<li><p>相似度可凭角度信息及距离信息判断</p></li>
<li><p><strong>CBOW(Continuous Bag of Words)</strong></p>
<p>挑一个要预测的词，来学习这个词前后文中词语和预测词的关系。</p></li>
</ul>
<h2 id="seq2seq">3. Seq2Seq</h2>
<p>TF-IDF等是表达文章采用的是词频的信息，但忽略了顺序。</p>
<p>RNN可获取到顺序的信息</p>
<h3 id="encode">3.2.1Encode</h3>
<p>变成计算机理解的向量表达形式，可使用RNN等，压缩器</p>
<h3 id="decoder">3.2.2 Decoder</h3>
<p>翻译成各种不同的表示形式，解压器</p>
<p>训练(training)中，不管有没有预测错，下一步在decoder的输入都是正确的</p>
<p>预测(inference)中，decoder下一步的预测基于decoder上一步预测，而不是true label</p>
<h2 id="attention机制">3.3 Attention机制</h2>
<p>模型注意局部的文字信息</p>
<figure>
<img src="https://mofanpy.com/static/results-small/nlp/luong_attention.png" alt="translation attention illustration" /><figcaption aria-hidden="true">translation attention illustration</figcaption>
</figure>
<p>生成 爱 时，将前面整体的信息进行softmax，也就是打权重，即了解应加强注意到哪些encoder的step上面，再生成一个加了注意力后的全局信息，在结合上decoder现在的信息一起生成字。即$ LuongAttention <span class="math inline">\(方法。\)</span> [Effective Approaches to Attention-based Neural Machine Translation] $</p>
<p>论文中提出了三种计算attention score的方式</p>
<figure>
<img src="https://mofanpy.com/static/results/nlp/luong_attention_score_func.png" alt="luong_score_func" /><figcaption aria-hidden="true">luong_score_func</figcaption>
</figure>
<p>$ h_t <span class="math inline">\(是decoder见到输入生成的hidden state，\)</span> h_s $是encoder见到的输入时生成的hidden state。<strong>意思是将decoder每预测一个词，都拿这个decoder现在的信息去和encoder所有信息做注意力的计算，即可得到如何将注意力放到encode当中。</strong>三个公式的不同点就是是否要引入更多的学习参数和变量</p>
<p>以此为Seq2Seq（RNN+Attention）模型，采用RNN进行encoder，decoder</p>
<p><strong>模型经过多次注意，不同层级的注意力带来的是不同层级上的理解。越是后面的注意，就是越深度的思考。也就是Transformer模型。</strong></p>
<h2 id="transformer模型">4. Transformer模型</h2>
<p>一个个注意力矩阵来表示在不同位置的注意力强度。通过控制强度来控制信息通道的阀门大小。也可多个人同时观察一句话，然后汇总每个人通过自己的注意力得到的结论，再进入下一轮注意力</p>
<p>RNN中采用时序模型的encoder，把整句话encoder进来，再通过一个一个词去看根据局部信息判断一个个词需要施加多少注意力。</p>
<p>Transformer可以直接一层层叠加注意力，RNN也可以又叠加模式，但是太慢了，Transformer可以采用CNN的那种模式进行加速，而RNN必须先看第一步再第二步，必须时序进行，太慢了。Transformer基于每一层的理解，计算机视觉也是通过不断卷积，得到每一层的理解，卷积也可以当成过滤器。采用transformer或attention进行encode</p>
<figure>
<img src="https://mofanpy.com/static/results-small/nlp/transformer_stack_attention_layer.png" alt="attention layer" /><figcaption aria-hidden="true">attention layer</figcaption>
</figure>
<ul>
<li><p>encode</p>
<figure>
<img src="https://mofanpy.com/static/results-small/nlp/transformer_qkv_explain.png" alt="transformer qkv" /><figcaption aria-hidden="true">transformer qkv</figcaption>
</figure>
<p>上图：Query和所有候选人Key做对比，得到一个要注意的程度Attention，根据这个程度判断需要花多久时间仔细阅读候选人材料Value</p>
<p>同时施加多个Attention hat，好几个人帮我一轮轮注意+理解后，我再汇总所有人的理解，统一判断</p>
<figure>
<img src="https://mofanpy.com/static/results-small/nlp/transformer_multihead_explain.png" alt="transformer multihead" /><figcaption aria-hidden="true">transformer multihead</figcaption>
</figure></li>
<li><p>decode</p>
<p>Encoder里的注意力叫做自注意力(self-attention)</p>
<figure>
<img src="https://mofanpy.com/static/results-small/nlp/transformer_decoder_atten_with_encoder.png" alt="transformer decoder" /><figcaption aria-hidden="true">transformer decoder</figcaption>
</figure>
<p>在Decoding时，decoder会向encoder借一下Key和Value，Decoder自己可以提供Query（已经预测出来的token）。使用我们刚刚提到的K，Q，V结合方式计算。 不过这张图里面还有些细节没有提到，<strong>比如 Decoder 先要经过Masked attention再和encoder的K，V结合，然后还有有一个feed forward计算，还要计算残差。</strong></p>
<ul>
<li>Masked attention: 不让decoder在训练的时候用后文的信息生成前文的信息；</li>
<li>Feed forward: 这个encoder，decoder都有，做一下非线性处理；</li>
<li>残差计算：这个也是encoder和decoder都有，为了更有效的backpropagation。</li>
</ul></li>
</ul>
<h2 id="预训练模型">5. 预训练模型</h2>
<p>我们需要进行一次知识的通用编码，将它转化成文字，动画，声音等等，下一代人还能通过学习获取统一解码能力，将编码的文字，动画，声音解码转移至自己的大脑中，完成知识的迁移。机器可以复制，即可以完成<strong>“学习型遗传信息”</strong>的传递。</p>
<p>大规模深度学习模型就像一个知识体，可以用多种不同的模型框架来存储知识，比如双向LSTM模型、Transformer模型等，特点是大、参数多。我们再次利用这些存储知识时，需要将固化下来的神经连接稍作修改，来适应变化，这种超大规模的模型柔韧性好，相比小模型又大量的神经连接相互牵连，不会很容易随着一点变化而完全跑偏，这也是大模型比小模型更好做知识迁移的原因之一。</p>
<p>如果模型变大变深，效果提升会更显著。每训练一个大模型，都要消耗很长时间，我们并不希望浪费太多时间在训练上，所以拿到一个预训练模型是十分重要的。基于预训练模型，我们能够用较少的模型较快的得到一个适合我们自己数据的新模型，而且效果也不会差。预训练的核心价值是：</p>
<ul>
<li>手头只有小数据集，也能得到一个好模型</li>
<li>训练速度大大提升，不用从零开始</li>
</ul>
<h3 id="elmoembeddings-from-language-model模型">5.1 ELMo(Embeddings from Language Model)模型</h3>
<ul>
<li><strong>主要目标：找出词语放在句子中的意思</strong>。CBOW或者skip gram没有办法表示词在句子中的不同含义，故ELMo可<strong>一词多义</strong></li>
<li>通过双向RNN（LSTM）架构来使词向量拥有上下文信息，每个词的向量表达，可看做下面信息的累积：
<ul>
<li>从前往后的前文信息</li>
<li>从后往前的后文信息</li>
<li>当前词语的词向量信息</li>
</ul></li>
<li>ELMo是预训练模型的先驱，也认真对待了一词多义的情况。但是预训练模型并不仅仅局限于ELMo这种RNN模式的框架，Transformer同样可以做预训练，并且效果更好，<strong>比如GPT, Bert</strong></li>
</ul>
<h2 id="gptgenerative-pre-training单向语言模型">5.2 GPT(Generative Pre-Training)单向语言模型</h2>
<ul>
<li>预训练需要很多算力资源，单向的代表只能从前往后，但是拟合能力依旧很好</li>
<li>用着Decoder的Future Mask（Look Ahead Mask），但结构更像Encoder<strong>搞一个双向链接</strong>
<ul>
<li>用前文的信息预测后文的信息，所以用上了Future Mask，不然要做大量预料的非监督学习，会让模型在预测A时看到A的信息，从而有一种信息穿越的问题。<strong>因为Transformer这种MultiHead Attention模式，每一个Head都会看到所有的文字内容，如果用前文的信息预测后文内容又不用Future Mask时，模型是可以看到要预测信息的，这种训练是无效的</strong></li>
<li>Decoder少了一些连接Encoder的层</li>
<li>只使用了Future Mask做注意力</li>
</ul></li>
</ul>
<h2 id="bert双向语言模型">5.3 BERT双向语言模型</h2>
<ul>
<li>在句子里遮住X，不让模型看到X，然后用前后文信息预测X</li>
<li>把词替换成mask，但是机器不能识别意思，mask会被当成一个词去理解，会以为我要用“mask”这个词向量预测什么，所以具体替换方式为：随机选取15%的词做如下改变
<ul>
<li>80%的时间，将它替换成[MASK]</li>
<li>10%的时间，将它替换成其他任意词（错别字）</li>
<li>10%的时间，不变</li>
</ul></li>
<li>除了预测，也可以判断两句话是不是上下文关系</li>
</ul>

      
    </div>

    
	
	

	
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/01/30/%E7%AC%AC%E4%BA%8C%E5%91%A8/%E8%BF%9B%E9%98%B6NLP%E6%A8%A1%E5%9E%8B%E6%95%B4%E7%90%86(Seq2Seq+Attention+pre_transformer+pre_BERT)/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Olivia">
      <meta itemprop="description" content="May All Your Troubles Be little Ones">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Olivia的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/01/30/%E7%AC%AC%E4%BA%8C%E5%91%A8/%E8%BF%9B%E9%98%B6NLP%E6%A8%A1%E5%9E%8B%E6%95%B4%E7%90%86(Seq2Seq+Attention+pre_transformer+pre_BERT)/" class="post-title-link" itemprop="url">进阶NLP模型整理(Seq2Seq+Attention+pre_transformer+pre_BERT)</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-01-30 00:00:00" itemprop="dateCreated datePublished" datetime="2021-01-30T00:00:00+08:00">2021-01-30</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-05-04 14:52:25" itemprop="dateModified" datetime="2021-05-04T14:52:25+08:00">2021-05-04</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/NLP/" itemprop="url" rel="index"><span itemprop="name">NLP</span></a>
                </span>
                  >
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/NLP/notes/" itemprop="url" rel="index"><span itemprop="name">notes</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>5.5k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>5 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="句向量">1. 句向量</h2>
<h2 id="seq2seq">2. Seq2Seq</h2>
<p>采用Encoder和Decoder</p>
<ul>
<li>Encoder相当于一种压缩器，将最有用的特征识别出来，用最简练的信息表达。</li>
<li>Decoder是解压器，将向量化表达转变为其他表现形式。</li>
</ul>
<h3 id="lstm模型simplernn以机器翻译为例">2.1 LSTM模型【SimpleRNN】（以机器翻译为例）</h3>
<ul>
<li><p>Encoder</p>
<ul>
<li><p>用于提取特征，最后一个输出即为特征，其他隐藏层被丢弃，输出为最后一个状态h和c</p>
<figure>
<img src="https://s3.ax1x.com/2021/01/30/yFOtn1.png" alt="yFOtn1.png" /><figcaption aria-hidden="true">yFOtn1.png</figcaption>
</figure></li>
</ul></li>
<li><p>Decoder</p>
<ul>
<li><p>初始状态为Encoder的最后一个状态</p></li>
<li><p>每次接受一个输入，然后输出下一个字母的概率，第一个输入为起始符</p></li>
<li><p>decoder输出一个概率分布，结合标签形成一个CrossEntropy函数，梯度从Decoder传回Encoder。</p>
<figure>
<img src="https://s3.ax1x.com/2021/01/30/yFO0hD.png" alt="yFO0hD.png" /><figcaption aria-hidden="true">yFO0hD.png</figcaption>
</figure></li>
</ul></li>
<li><p>训练及预测过程</p>
<ul>
<li>training中，不管有没有预测错，下一步在decoder的输入都是正确的</li>
<li>inference中，decoder下一步的预测基于decoder上一步预测，而不是true label</li>
</ul></li>
<li><p>提升：</p>
<ul>
<li>encoder用双向LSTM，decoder是单向LSTM</li>
<li>multi-Task learning：多加入几个任务，比如让英语翻译成英语等，这样encoder可以被训练的更好</li>
</ul></li>
</ul>
<h3 id="attention注意力机制simplernnattention">2.2 Attention(注意力)机制【SimpleRNN+Attention】</h3>
<ul>
<li><p>2015年提出，用来改进Seq2Seq模型，用来解决遗忘问题</p></li>
<li><p>decoder每次更新状态之前，encoder会对整体信息进行softmax(打权重)，<strong>从而使decoder了解应加强注意哪些encoder的step上</strong>，在结合decoder的输入信息一起训练，这就是Attention名字的由来，同时不会忘记原始输入，<strong>但缺点是计算量很大</strong>。</p></li>
<li><p>原理过程：</p>
<ol type="1">
<li><p>encoder结束后，attention和decoder同时工作</p></li>
<li><p>decoder的初始状态<span class="math inline">\(s_0\)</span>是encoder的最后一个状态，<strong>同时encoder的所有状态都要保留</strong></p></li>
<li><p><strong>先计算decoder的初始状态<span class="math inline">\(s_0\)</span>与encoder中每个状态<span class="math inline">\(h_i\)</span>的相关性</strong>，使用<span class="math inline">\(a_i=aligh(h_i, s_0)\)</span>来计算相关性，结果即为<span class="math inline">\(a_i\)</span>，记做<span class="math inline">\(Weight\)</span>（此<span class="math inline">\(a_i\)</span>是经softmax处理过的）。</p></li>
<li><p><strong>计算与<span class="math inline">\(s_0\)</span>对应的<span class="math inline">\(a_i\)</span>（计算出的m个<span class="math inline">\(a\)</span>最后还需经softmax处理得到<span class="math inline">\(a_i\)</span>）：</strong></p>
<ul>
<li><p>第一篇attention论文提出的计算方法</p>
<ul>
<li><p><span class="math inline">\(aligh(h_i, s_0)=v_a^\mathrm{T}tanh(W_a[h_i;s_0])\qquad concat\)</span></p></li>
<li><p><span class="math inline">\(v_a\)</span>与<span class="math inline">\(W_a\)</span>都是参数，需要从训练集中学习</p></li>
</ul></li>
<li><p><strong>更常用的一种方法</strong></p>
<ul>
<li>Linear maps:
<ul>
<li><span class="math inline">\(k_i=W_k×h_i\qquad for\ i=1\ to\ m\)</span></li>
<li><span class="math inline">\(q_0=W_Q×s_0\)</span></li>
</ul></li>
<li>Inner product:
<ul>
<li><span class="math inline">\(\tilde a_i=k_i^\mathrm Tq_0\qquad for\ i=1\ to\ m\)</span></li>
</ul></li>
<li>Normalization:
<ul>
<li><span class="math inline">\([a_i,...,a_m]=Softmax([\tilde a_1,...,\tilde a_m])\)</span></li>
</ul></li>
</ul></li>
</ul></li>
<li><p>计算与<span class="math inline">\(s_0\)</span>对应的Context vector <span class="math inline">\(c_0\)</span>，<strong>加权平均</strong></p>
<p>​ <span class="math inline">\(c_0=a_1h_1+...+a_mh_m\)</span></p></li>
<li><p>更新下一个状态<span class="math inline">\(s_1\)</span>，<span class="math inline">\(x_1&#39;\)</span>为输入的数据</p>
<ul>
<li><p>SimpleRNN中 <span class="math display">\[
s_1=tanh(A&#39;
\begin{bmatrix}
x&#39;_1\\
s_0
\end{bmatrix}
+b)
\]</span> 仅仅根据上一状态，并不会看encoder状态</p></li>
<li><p><strong>SimpleRNN+Attention中</strong> <span class="math display">\[
s_1=tanh(A&#39;
\begin{bmatrix}
x&#39;_1\\
s_0\\
c_0
\end{bmatrix}
+b)
\]</span> <span class="math inline">\(c_0\)</span>是encoder中所有状态<span class="math inline">\(h_i\)</span>的加权平均，所以<span class="math inline">\(c_0\)</span>记录有<span class="math inline">\(x_1\)</span>到<span class="math inline">\(x_m\)</span>的完整信息，而decoder的更新一来于<span class="math inline">\(c\)</span>，故RNN的遗忘问题可解决。</p></li>
</ul></li>
<li><p>再计算<span class="math inline">\(s_1\)</span>跟之前encoder所有状态的相关性，即<span class="math inline">\(a\)</span>，再计算<span class="math inline">\(c_1\)</span>，decoder接受新的输入<span class="math inline">\(x_2&#39;\)</span>，循环计算下去直至结束。</p></li>
</ol></li>
<li><p>计算量：为计算<span class="math inline">\(weight\ a_i\)</span>，共需计算encoder和decoder数量的乘积次，故attention为了不遗忘，是<strong>以高数量级计算为代价</strong>。</p></li>
<li><p>权重<span class="math inline">\(a\)</span>的实际意义：</p>
<figure>
<img src="https://s3.ax1x.com/2021/01/30/ykrDvd.png" alt="ykrDvd.png" /><figcaption aria-hidden="true">ykrDvd.png</figcaption>
</figure>
<p>线越粗，相关性越高</p></li>
</ul>
<h3 id="总结">2.3 总结</h3>
<ul>
<li>Stardard Seq2Seq model: the decoder looks at only its current state</li>
<li>Attention: decoder additionally looks at all the states of the encoder</li>
<li>Attention: decoder knows where to focus</li>
<li><strong>Downside: higher time complexity</strong>
<ul>
<li>m: source sequence length</li>
<li>t: target sequence length</li>
<li>Standard Seq2Seq: <span class="math inline">\(O(m+t)\)</span> time complexity</li>
<li>Seq2Seq+attention: <span class="math inline">\(O(mt)\)</span> time complexity</li>
</ul></li>
</ul>
<h2 id="transformer">3. Transformer</h2>
<ul>
<li>是一个Seq2Seq模型，有一个encoder和一个decoder</li>
<li>完全不是RNN，而是基于attention层、self-attention层、全连接层</li>
<li>输入输出shape与RNN相同</li>
</ul>
<h3 id="attention-layer">3.1 Attention Layer</h3>
<ul>
<li><p>Encoder's inputs：<span class="math inline">\(X=[x_1,x_2,...x_m]\)</span>，每一个输入为d维</p>
<p>Decoder's inputs：<span class="math inline">\(X&#39;=[x_1&#39;,x_2&#39;,...,x_t&#39;]\)</span>，每一个输入为d维</p>
<p>Parameaters：<span class="math inline">\(W_Q, W_K,W_V\)</span></p>
<p><span class="math inline">\(C=Attn(X,X&#39;)\)</span></p></li>
<li><table>
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;">Query：<span class="math inline">\(Q=W_QX&#39;\)</span></th>
<th style="text-align: center;">Key：<span class="math inline">\(K=W_KX\)</span></th>
<th style="text-align: center;">Value：<span class="math inline">\(V=W_VX\)</span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><span class="math inline">\(W_Q:q×d\)</span><br /><span class="math inline">\(X&#39;:d×t\)</span><br /><span class="math inline">\(Q:q×t\)</span><br />【Q中每一列对应一个<span class="math inline">\(x&#39;\)</span>】</td>
<td style="text-align: center;"><span class="math inline">\(W_K:k×d\)</span><br /><span class="math inline">\(X:d×m\)</span><br /><span class="math inline">\(K:k×m\)</span><br />【K中每一列对应一个<span class="math inline">\(x\)</span>】</td>
<td style="text-align: center;"><span class="math inline">\(W_V:v×d\)</span><br /><span class="math inline">\(X:d×m\)</span><br /><span class="math inline">\(V:v×m\)</span><br />【V中每一列对应一个<span class="math inline">\(x\)</span>】</td>
</tr>
</tbody>
</table>
<p>Weights：<span class="math inline">\(a=Softmax(K^TQ)\)</span> 【k=q，<span class="math inline">\(a:m×t\)</span>】</p>
<p>Context vector：<span class="math inline">\(C=Va\)</span> 【<span class="math inline">\(c:v×t\)</span>，每一列对应一个<span class="math inline">\(x&#39;\)</span>】</p></li>
<li><p><span class="math inline">\(K\)</span>与<span class="math inline">\(V\)</span>是对应于encoder，<span class="math inline">\(Q\)</span>是对应于decoder层，最后输出为<span class="math inline">\(c\)</span></p></li>
<li><p>Output of attention layer: <span class="math inline">\(C=[c_{:1},c_{:2},...,c_{:t}]\)</span></p>
<p>Here, <span class="math inline">\(c_{:j}=V·Softmax(K^Tq_{:j})\)</span></p>
<p>Thus, <span class="math inline">\(c_{:j}\)</span> is a function of <span class="math inline">\(x&#39;_j\)</span> and <span class="math inline">\([x_1,...,x_m]\)</span></p>
<figure>
<img src="https://s3.ax1x.com/2021/01/31/yAT5cR.png" alt="yAT5cR.png" /><figcaption aria-hidden="true">yAT5cR.png</figcaption>
</figure></li>
<li><p><strong>对比SimpleRNN+Attention的Seq2Seq</strong>：</p>
<ul>
<li>SimpleRNN：对于decoder层的每一个时间步，需先计算此状态与encoder各层的<span class="math inline">\(a\)</span>，再计算context vector <span class="math inline">\(c\)</span>，<strong>然后结合上一状态、<span class="math inline">\(c\)</span>、这一层的输入<span class="math inline">\(x\)</span>，生成下一状态，继续计算，是一步一步的</strong>。</li>
<li>Transformer：直接将decoder层的输入进行处理生成Q，然后encoder层处理生成K、V，即可直接进行运算得到context vector <span class="math inline">\(c\)</span>，而无需再一步一步计算。</li>
</ul></li>
</ul>
<h3 id="self-attention-layer">3.2 Self-Attention Layer</h3>
<ul>
<li><p>不仅局限于Seq2Seq，可用在所有RNN上，如果只用在一个网络则叫做Self-Attention，2016年提出。</p></li>
<li><p>之后发现根本不需要RNN，直接用Attention反而效果更好，由此提出了Transformer模型</p></li>
<li><p>Self-Attention Layer：<span class="math inline">\(C=Attn(X, X)\)</span></p>
<p>inputs：<span class="math inline">\(X=[x_1,x_2,...x_m]\)</span></p>
<p>Parameters：<span class="math inline">\(W_Q,W_K,W_V\)</span></p>
<figure>
<img src="https://s3.ax1x.com/2021/01/31/yA7k4g.png" alt="yA7k4g.png" /><figcaption aria-hidden="true">yA7k4g.png</figcaption>
</figure></li>
</ul>
<h3 id="multi-head-self-attention">3.3 Multi-Head (Self-)Attention</h3>
<ul>
<li><strong>Single-Head</strong>：单头，前文讲的</li>
<li><strong>Multi-Head (Self-)Attention</strong>
<ul>
<li>Using <span class="math inline">\(l\)</span> single-head (self-)attentions <strong>(which do not share parameters.)</strong>
<ul>
<li>A single-head self-attention has 3 parameter matrices：<span class="math inline">\(W_Q,W_K,W_V\)</span></li>
</ul></li>
<li>Concatenating outputs of single-head self-attentions
<ul>
<li>Suppose single-head self-attentions' outputs are <span class="math inline">\(d×m\)</span> matrices</li>
<li>Multi-head's output shape: <span class="math inline">\((ld)×m\)</span></li>
</ul></li>
</ul></li>
</ul>
<h3 id="stacked-self-attention-layersencoder">3.4 Stacked Self-Attention Layers【Encoder】</h3>
<ul>
<li><p>构建Encoder层</p>
<ul>
<li><p>One Block of Encoder</p>
<p>由两层组成，每个Dense共享一个<span class="math inline">\(W_U\)</span>，激活函数为<span class="math inline">\(ReLU\)</span>。输入与输出shape相同。每个<span class="math inline">\(u\)</span>依赖于所有<span class="math inline">\(x\)</span>。</p>
<figure>
<img src="https://s3.ax1x.com/2021/01/31/yEg4HJ.png" alt="yEg4HJ.png" /><figcaption aria-hidden="true">yEg4HJ.png</figcaption>
</figure>
<figure>
<img src="https://s3.ax1x.com/2021/01/31/yE2eEj.png" alt="yE2eEj.png" /><figcaption aria-hidden="true">yE2eEj.png</figcaption>
</figure></li>
<li><p>Stack Blocks</p>
<p>组成Encoder，共6个Block，每个Block两层，每个Block有自己的参数，Blocks之间不共享参数，输入与输出shape相同</p>
<figure>
<img src="https://s3.ax1x.com/2021/01/31/yEzHPI.png" alt="yEzHPI.png" /><figcaption aria-hidden="true">yEzHPI.png</figcaption>
</figure></li>
</ul></li>
</ul>
<h3 id="stacked-attention-layersdecoder">3.5 Stacked Attention Layers【Decoder】</h3>
<ul>
<li><p>构建Decoder层</p>
<ul>
<li><p>One Block</p>
<p>由三层组成，有两个输入序列，Dense激活函数也为<span class="math inline">\(ReLU\)</span></p>
<figure>
<img src="https://s3.ax1x.com/2021/01/31/yV9oa4.png" alt="yV9oa4.png" /><figcaption aria-hidden="true">yV9oa4.png</figcaption>
</figure>
<figure>
<img src="https://s3.ax1x.com/2021/01/31/yV9jsK.png" alt="yV9jsK.png" /><figcaption aria-hidden="true">yV9jsK.png</figcaption>
</figure></li>
<li><p>Transformer's Decoder: One Block【注意图中输入输出shape特点】</p>
<figure>
<img src="https://s3.ax1x.com/2021/01/31/yVCffA.png" alt="yVCffA.png" /><figcaption aria-hidden="true">yVCffA.png</figcaption>
</figure></li>
</ul></li>
</ul>
<h3 id="put-togethertransformer">3.6 Put together【Transformer】</h3>
<ul>
<li><p>左边为Encoder，右边为Decoder，组合起来就是Transformer模型。最终输出为<span class="math inline">\(512×t\ matrix\)</span></p>
<figure>
<img src="https://s3.ax1x.com/2021/01/31/yVPktJ.png" alt="yVPktJ.png" /><figcaption aria-hidden="true">yVPktJ.png</figcaption>
</figure></li>
<li><p>Comparison with RNN Seq2Seq Model</p></li>
</ul>
<h2 id="bertbidirectional-encoder-representations-from-transformers">4. BERT(Bidirectional Encoder Representations from Transformers)</h2>
<ul>
<li>18年提出，19年发表[Devlin, Chang, Lee, and Toutanova. <strong>BERT: Pre-training of deep bidirectional transformers for language understanding</strong>. In <em>ACL</em>, 2019.]</li>
<li>目的：预训练Transformer模型的encoder网络
<ul>
<li><em>预训练模型：大规模深度学习模型特点是大、参数多，但是效果提升会更显著，同时不会很容易随着一点变化而完全跑偏，比小模型更容易做迁移。但是训练大模型需要花费的时间很长，所以一个预训练模型很重要，基于预训练模型，我们手头只有小数据集也能得到一个好模型，同时训练速度大大提高，不是从零开始。</em></li>
<li><em>预训练模型：ELMo、GPT、BERT</em></li>
</ul></li>
<li>两个任务：Predict masked word. Predict next sentence</li>
</ul>
<h3 id="randomly-mask-a-word">4.1 Randomly mask a word</h3>
<ul>
<li><p>随机遮挡词替换为Mask，输出<span class="math inline">\(u_M\)</span>经Softmax即可得到概率值，可通过概率值判断遮挡的词是什么。</p>
<figure>
<img src="https://s3.ax1x.com/2021/01/31/yVA1qP.png" alt="yVA1qP.png" /><figcaption aria-hidden="true">yVA1qP.png</figcaption>
</figure></li>
<li><p><span class="math inline">\(e\)</span>: one-hot vector of the masked word "cat"</p>
<p><span class="math inline">\(p\)</span>: output probability distribution at the masked position</p>
<p><span class="math inline">\(Loss = CrossEntropy(e, p)\)</span></p>
<p>Performing one gradient descent to update the model parameters.</p></li>
<li><p>为防止机器将mask当成一个词去训练，具体替换方式为：随机选取15%的词做如下改变</p>
<ul>
<li>80%的时间，将它替换成[MASK]</li>
<li>10%的时间，将它替换成其他任意词（错别字）</li>
<li>10%的时间，不变</li>
</ul></li>
<li><p><strong>预训练不需要人工标注的数据集，可自动生成标签，即可使用维基百科等数据去训练模型，可训练出非常大的模型</strong></p></li>
</ul>
<h3 id="predict-the-next-sentence">4.2 Predict the Next Sentence</h3>
<ul>
<li><p>分类：[CLS] is a token for classification.</p>
<p>分隔符：[SEP] is for separating sentences.</p></li>
<li><p>向量<span class="math inline">\(c\)</span>在<span class="math inline">\([CLS]\)</span>的位置上，但并不只依赖于<span class="math inline">\(c\)</span>，向量<span class="math inline">\(c\)</span>包含两部分的全部信息。</p>
<p>可以采用<span class="math inline">\(CrossEntropy\)</span>来构建损失函数</p>
<figure>
<img src="https://s3.ax1x.com/2021/01/31/yVmjV1.png" alt="yVmjV1.png" /><figcaption aria-hidden="true">yVmjV1.png</figcaption>
</figure></li>
<li><p>用处：使Embedding词向量包含上下两句话之间的关联信息。Encoder网络中的self-attention层就是寻找相关性，也可使self-attention层找到正确的相关性。</p></li>
</ul>
<h3 id="combining-the-two-methods">4.3 Combining the two methods</h3>
<ul>
<li><p>两个任务，对应不同的loss function</p>
<p>Objective function is the sum of these loss functions</p>
<p>Update model parameters by performing one gradient descent</p></li>
</ul>

      
    </div>

    
	
	

	
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/01/23/%E7%AC%AC%E4%B8%80%E5%91%A8/MLE+MAP+%E8%B4%9D%E5%8F%B6%E6%96%AF+n-gram/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Olivia">
      <meta itemprop="description" content="May All Your Troubles Be little Ones">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Olivia的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/01/23/%E7%AC%AC%E4%B8%80%E5%91%A8/MLE+MAP+%E8%B4%9D%E5%8F%B6%E6%96%AF+n-gram/" class="post-title-link" itemprop="url">MLE+MAP+贝叶斯+n-gram</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-01-23 20:50:03" itemprop="dateCreated datePublished" datetime="2021-01-23T20:50:03+08:00">2021-01-23</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-05-04 14:47:31" itemprop="dateModified" datetime="2021-05-04T14:47:31+08:00">2021-05-04</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/NLP/" itemprop="url" rel="index"><span itemprop="name">NLP</span></a>
                </span>
                  >
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/NLP/notes/" itemprop="url" rel="index"><span itemprop="name">notes</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>2.9k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>3 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="贝叶斯模型">贝叶斯模型</h1>
<h2 id="最大似然估计mle">1. 最大似然估计(MLE)</h2>
<p>概率是已知模型和参数，推数据。<strong>统计</strong>是已知数据，推模型和参数</p>
<p>最大似然估计是求参数θ，使似然函数P(x|θ)最大。</p>
<p>例：抛硬币，设正反面出现的概率记为θ，如图</p>
<p><a target="_blank" rel="noopener" href="https://imgchr.com/i/s7PE01"><img src="https://s3.ax1x.com/2021/01/23/s7PE01.png" alt="s7PE01.png" /></a></p>
<hr />
<h2 id="最大后验概率估计map">2. 最大后验概率估计(MAP)</h2>
<p>最大似然估计是求参数<em>θ</em>, 使似然函数<strong><em>P</em>(<em>x</em>|<em>θ</em>)</strong>最大。</p>
<p>最大后验概率 (<strong><em>MAP</em></strong>) 估计则是求参数θ，使后验概率<strong><em>P</em>(<em>θ</em>|<em>x</em>)</strong>最大。即使得<strong><em>P</em>(<em>x</em>|<em>θ</em>)P(<em>θ</em>)</strong>最大(贝叶斯公式)。(<em>x</em>一般是一个确定的值，故一般<em>P</em>(<em>x</em>)也是一个确定值而省略)</p>
<figure>
<img src="https://s3.ax1x.com/2021/01/27/sxdHTx.png" alt="image-20210123150853576" /><figcaption aria-hidden="true">image-20210123150853576</figcaption>
</figure>
<p>例：抛硬币</p>
<p><a target="_blank" rel="noopener" href="https://imgchr.com/i/s7Vg41"><img src="https://s3.ax1x.com/2021/01/23/s7Vg41.png" alt="s7Vg41.png" /></a></p>
<hr />
<h2 id="贝叶斯分类">3. 贝叶斯分类</h2>
<h3 id="基本术语">3.1 基本术语</h3>
<ul>
<li><p><em>P</em>(<em>A</em>)是A的<strong>先验概率</strong>或边缘概率</p></li>
<li><p><em>P</em>(<em>A</em>|<em>B</em>)是条件概率，A的<strong>后验概率</strong></p></li>
<li><p><em>P</em>(<em>B</em>|<em>A</em>)是条件概率，B的<strong>后验概率</strong></p></li>
<li><p><em>P</em>(<em>B</em>)是B的<strong>先验概率</strong>或边缘概率，也作标准化常量</p>
<p>​ <strong>Bayes定理</strong>可表述为：A的后验概率=(类似度*先验概率)/标准化常量，也就是说，<strong>后验概率与先验概率和类似度的乘积成正比</strong>。另外，比例P(B|A)/P(B)也有时被称作标准类似度（standardised likelihood），Bayes定理可表述为：<strong>后验概率 = 标准类似度*先验概率</strong>。</p></li>
</ul>
<h3 id="贝叶斯公式推导">3.2 贝叶斯公式推导</h3>
<figure>
<img src="https://s3.ax1x.com/2021/01/27/sxdHTx.png" alt="image-20210123150853576" /><figcaption aria-hidden="true">image-20210123150853576</figcaption>
</figure>
<h3 id="贝叶斯的应用">3.3 贝叶斯的应用</h3>
<h4 id="贝叶斯的应用-1">3.3.1 贝叶斯的应用</h4>
<ul>
<li><p>拼写纠正</p>
<p><strong>P(我们推測他想输入的单词 (h#)| 他实际输入的单词(D))</strong></p>
<p>即对于不同的推测h1、h2、h3，计算：</p>
<p><strong>P(h#|D) = P(h#) * P(D|h#) / P(D)</strong></p>
<p>对于不同h#，P(D)都是一样的，故比较时可省略，即</p>
<p><strong>P(h# | D) ∝ P(h#) * P(D | h#)</strong> 。</p>
<p>例：想打the，打成了thew。用户实际是想输入 the 的可能性大小取决于 the 本身在词汇表中被使用的可能性（<strong>频繁程度</strong>）大小（先验概率）和 想打 the 却打成 thew 的可能性大小（似然）的乘积。</p></li>
<li><p><strong>中文分词</strong></p>
<p>令X为字串(句子)，Y为词串(分词结果)</p>
<p>即寻找最大的**P(Y|X) ∝ P(Y)*P(X|Y)<strong>，可表述为：</strong>这样的分词方式（词串）的可能性 乘 这个词串生成句子的可能性**。</p>
<p>一般分词是肯定能组成句子的，所以近似将P(X|Y)看作是恒等于1的。故问题转化为最大化<strong>P(Y)</strong>，即寻找一种分词使得这个词串（句子）的概率最大化。</p>
<p>计算方法：对于词串中不同分词W#，依据联合概率的公式展开：P(W1, W2, W3, W4 ..) = P(W1) * P(W2|W1) * P(W3|W2, W1) * P(W4|W1,W2,W3) * ..，通过计算一系列条件概率来计算。</p>
<p><strong>存在问题：随着条件数目的增加（例最后一项的条件数目有n-1项），数据稀疏问题会越来越严重（维度灾难），即便语料库再大也无法统计出一个靠谱的P来。故根据马尔科夫假设（Markov Assumption）：句子中一个词的出现概率仅仅依赖于它前面的n个词（一般n不超过3），提出了N-gram模型（以下开小差讲解N-gram）。</strong></p>
<ul>
<li><p>N-gram的用途：</p>
<ul>
<li>词性标注（将词性标注看成一个多分类问题，计算每个词性的概率）</li>
<li>垃圾短信分类（给短信的每个句子断句，用N-gram判断每个句子是否是垃圾短信中的敏感句子，若敏感句子个数超过一定阀值，认定整个邮件是垃圾短信）</li>
<li>分词器</li>
</ul></li>
<li><p>N-gram中N的确定</p>
<p>​ 使用Perplexity指标，该指标越小表示一个语言模型的效果越好。针对不同的N-gram，计算各自的Perplexity。</p>
<figure>
<img src="https://s3.ax1x.com/2021/01/27/sxdOfO.png" alt="image-20210123202827817" /><figcaption aria-hidden="true">image-20210123202827817</figcaption>
</figure></li>
<li><p>N-gram中的数据平滑方法</p>
<p>​ 当N变大时，会出现<strong>稀疏问题</strong>。故需要进行<strong>数据平滑</strong>。数据平滑的目的有两个：一个是使所有的N-gram概率之和为1，并且使所有的n-gram概率都不为0。本质是重新分配整个概率空间，使已经出现过的n-gram的概率降低，补充给未曾出现过的n-gram。</p>
<ul>
<li><p>拉普拉斯平滑</p>
<figure>
<img src="https://s3.ax1x.com/2021/01/27/sxw90I.png" alt="image-20210123203434955" /><figcaption aria-hidden="true">image-20210123203434955</figcaption>
</figure></li>
<li><p>内插与回溯</p>
<figure>
<img src="https://s3.ax1x.com/2021/01/27/sxweXj.png" alt="image-20210123203612932" /><figcaption aria-hidden="true">image-20210123203612932</figcaption>
</figure>
<figure>
<img src="https://s3.ax1x.com/2021/01/27/sxwG3F.png" alt="image-20210123203705637" /><figcaption aria-hidden="true">image-20210123203705637</figcaption>
</figure></li>
</ul></li>
</ul>
<p>与朴素贝叶斯算法思想上一致。有了这个假设，复杂的乘积可改写为： P(W1) * P(W2|W1) * P(W3|W2) * P(W4|W3) .. （n=1时）。</p>
<p>例：一个字串X为：“南京市长江大桥”。对于不同分词结果：“南京市长/江大桥”或者“南京市/长江大桥”，由于“南京市长”和“江大桥”在语料库中一起出现的频率为 0 ，这个整句的概率便会被判定为 0 。 从而使得“南京市/长江大桥”这一分词方式胜出。</p></li>
</ul>
<h3 id="朴素贝叶斯模型naive-bayesian-model-nbc">3.3.2 朴素贝叶斯模型(Naive Bayesian Model, NBC)</h3>
<p>比较广泛使用的两种分类模型时<strong>决策树模型</strong>(Decision Tree Model)和<strong>朴素贝叶斯模型</strong>(Naive Bayesian Model, NBC)</p>
<p>当影响事情的因素有多个时，公式可写做：</p>
<figure>
<img src="https://img-blog.csdnimg.cn/20181106114819625.png" alt="img" /><figcaption aria-hidden="true">img</figcaption>
</figure>
<p>式中P(A)和多个因素的联合概率P都是可以单独计算的，与A和bi之间的关系无关，故此两项可看作常数。<strong>对于求解P(A|b1, b2,..., bn)，最关键的是P(b1, b2,..., bn)。</strong>根据链式法则可得：</p>
<figure>
<img src="https://img-blog.csdnimg.cn/20181106114849983.png" alt="img" /><figcaption aria-hidden="true">img</figcaption>
</figure>
<p>若b1到b2这些特征之间是条件独立的，则<strong>P(bi | A, bj)=P(bi | A)</strong>，就有</p>
<figure>
<img src="https://img-blog.csdnimg.cn/20181106115021655.png" alt="img" /><figcaption aria-hidden="true">img</figcaption>
</figure>
<p><em>(Z对应P(b1, b2,..., bn))</em></p>
<p>上式中的b1到bn是特征，A是最终的类别，所以可惜而为如下公式：</p>
<figure>
<img src="https://img-blog.csdnimg.cn/20181106115041788.png" alt="img" /><figcaption aria-hidden="true">img</figcaption>
</figure>
<p>这个公式也就是我们的<strong>朴素贝叶斯分类器的模型函数</strong>。其中因为公式Z对应的P(b1, b2,..., bn)永远都是固定不变的，<strong>因此可直接省去分母部分</strong></p>
<p><strong>用法如下：</strong></p>
<ul>
<li><p>有一个朴素贝叶斯分类器，能够区分出k个类（c1, c2,..., ck），用来分类的特征有n个：（F1, F2,..., Fn）</p></li>
<li><p>现有个样本s，我们要用NB分类器对它进行预测，则需要先提取出这个样本的所有特征值F1到Fn，将其代入下式（因为对应不同分类的分母为固定值，所以公式可简化为如下形式）中进行k次运算：</p>
<figure>
<img src="https://img-blog.csdnimg.cn/20181106115100469.png" alt="img" /><figcaption aria-hidden="true">img</figcaption>
</figure></li>
<li><p>然后比较这k次的结果，选出使得运算结果最大的那个cj（j=1, 2,..., k）——这个cj对应的类别就是预测值。求上式的最大值也可以用如下公式表示：</p>
<figure>
<img src="https://img-blog.csdnimg.cn/20181112172320454.png" alt="img" /><figcaption aria-hidden="true">img</figcaption>
</figure></li>
<li><p>设我们当前有一个模型，总共只有两个类别：c1 和 c2；有三个 Feature：F1，F2和F3。F1 有两种可能性取值：f11 和 f12；F2 有三种可能性取值：f21，f22，f23；F3 也有两种可能性取值：f31，f32。</p>
<p>则对于此模型，我们要做的是通过训练过程，获得下面这些值：</p>
<p><img src="https://img-blog.csdnimg.cn/20181106130029659.png" alt="img" style="zoom:50%;" /></p>
<p><img src="https://img-blog.csdnimg.cn/20181106130121525.png" alt="img" style="zoom:50%;" /></p>
<p>之后即可进行预测：</p>
<figure>
<img src="https://img-blog.csdnimg.cn/20181106125452850.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3UwMTM4NTAyNzc=,size_16,color_FFFFFF,t_70" alt="img" /><figcaption aria-hidden="true">img</figcaption>
</figure>
<p>注：<strong>符号“∝”表示成正比例</strong>，值得注意的是P(C=c1|x)与P(C=c2|x)这两个值之和不为1是因为这里的计算并没有带入分母，这也是主里引入正比符号的原因，但是不引入分母对于实际分类的对比是没有影响的。</p></li>
</ul>
<p>参考博文：</p>
<p>&lt;从决策树学习谈到贝叶斯分类算法、EM、HMM&gt;:</p>
<p>https://www.cnblogs.com/bhlsheji/p/4185608.htmlx</p>
<p>&lt;朴素贝叶斯分类模型（一）&gt;:</p>
<p>https://blog.csdn.net/u013850277/article/details/83996358</p>

      
    </div>

    
	
	

	
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/01/23/%E7%AC%AC%E4%B8%80%E5%91%A8/%E5%9F%BA%E6%9C%ACNLP%E6%A8%A1%E5%9E%8B%E6%95%B4%E7%90%86(NNM+Word2Vec+RNN)/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Olivia">
      <meta itemprop="description" content="May All Your Troubles Be little Ones">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Olivia的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/01/23/%E7%AC%AC%E4%B8%80%E5%91%A8/%E5%9F%BA%E6%9C%ACNLP%E6%A8%A1%E5%9E%8B%E6%95%B4%E7%90%86(NNM+Word2Vec+RNN)/" class="post-title-link" itemprop="url">基本NLP模型整理(NNM+Word2Vec+RNN)</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-01-23 20:50:03" itemprop="dateCreated datePublished" datetime="2021-01-23T20:50:03+08:00">2021-01-23</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-05-04 14:47:08" itemprop="dateModified" datetime="2021-05-04T14:47:08+08:00">2021-05-04</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/NLP/" itemprop="url" rel="index"><span itemprop="name">NLP</span></a>
                </span>
                  >
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/NLP/notes/" itemprop="url" rel="index"><span itemprop="name">notes</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>5.5k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>5 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="nlp">NLP</h1>
<h2 id="mlemap贝叶斯n-gram3-3-1-贝叶斯的应用n-garm">[[MLE+MAP+贝叶斯+n-gram#3 3 1 贝叶斯的应用|N-garm]]</h2>
<ul>
<li><p>贝叶斯公式： <span class="math display">\[
P(A | B)= \frac {P(B|A)P(A)}{P(B)}
\]</span></p></li>
<li><p>马科夫假设：句子中一个词的出现概率仅仅依赖于它前面的若干个词。此假设即可在一定程度上解决<strong>维度灾难(curse of dimensionality)</strong>问题。由此引入<strong>Bi-gram</strong>与<strong>Tri-gram</strong>。</p></li>
<li><p><strong>Bi-gram</strong>：只依赖它前面出现的一个词 <span class="math display">\[
p(S)=p(w_1w_2w_3...w_n)=p(w_1)p(w_2|w_1)...p(w_n|w_{n-1})
\]</span> <strong>Tri-gram</strong>：只依赖于它前面出现的两个词 <span class="math display">\[
p(S)=p(w_1w_2...w_3)=p(w_1)p(w_2|w_1)...p(w_n|w_{n-1}w_{n-2})
\]</span></p></li>
<li><p><strong>数据平滑(data Smoothing)</strong>：理论上N越大效果越好，但是N过大会出现<strong>稀疏问题（Sparsity）</strong>。故需进行数据平滑，目的有两个：使所有N-gram概率之和为1，使所有的N-gram概率都不为0。<strong>本质其实就是重新分配整个概率空间，使已经出现过的n-gram的概率降低，补充给未曾出现过的n-gram。</strong>常见平滑方法有<strong>插值平滑（Interpolation）与回溯法（backoff）</strong>，具体核心思想不再赘述。</p></li>
<li><p><strong>存在问题</strong>：不考虑超过1个或者2个单词的上下文（n），无法计算词汇间的相似度。</p></li>
</ul>
<h2 id="nnlm">NNLM</h2>
<ul>
<li><p>创新：提出词向量、引入神经网络。</p></li>
<li><p>模型结构：</p>
<figure>
<img src="https://s3.ax1x.com/2021/01/29/yiyo0x.png" alt="yiyo0x.png" /><figcaption aria-hidden="true">yiyo0x.png</figcaption>
</figure>
<ul>
<li><p>输入层：</p>
<p><strong>one-hot vector</strong>形式的编码，对于每个one-hot vector<span class="math inline">\((1 × |V|)\)</span>，与Embedding size为<span class="math inline">\(m\)</span>的<strong>矩阵<span class="math inline">\(C (|V| × m)\)</span>相乘</strong>，得到一个<strong>distribution vector</strong><span class="math inline">\((1 × m)\)</span>（此处即选择C中相应对应词向量的那一行）。<span class="math inline">\(m\)</span>比|V|小很多，从而达到了降维的目的，同时 <span class="math inline">\(C\)</span> 可由神经网络的Back propagation训练不断优化。</p></li>
<li><p>隐藏层：</p>
<p>得到所有词的词向量后（即一个 <span class="math inline">\(( n - 1) × m\)</span> 的矩阵），进行处理得到一个 <span class="math inline">\((n - 1)m×1\)</span>的<strong>向量<span class="math inline">\(x\)</span></strong>。</p>
<p>隐含层为一个简单的tanh激活层，公式为 <span class="math display">\[
hidden=tanh(Hx+d)
\]</span> 其维度信息为： <span class="math display">\[
H：h×(n-1)m\\
d:h×1\\
x:(n-1)m×1
\]</span></p></li>
<li><p>输出层</p>
<p><strong>利用了隐藏层的输出及原始词向量</strong>，最后还需用<span class="math inline">\(softmax\)</span>，具体公式如下： <span class="math display">\[
y=b+Wx+Utanh(Hx+d)
\]</span> 其维度信息为： <span class="math display">\[
U:|V|×h\\
W:|V|×(n-1)m\\
b:|V|×1
\]</span> 若不想利用原始词向量信息则将<span class="math inline">\(W\)</span>设置为零矩阵</p></li>
<li><p>损失函数为 <span class="math display">\[
L=\frac {1}{T}\sum_{t}log\tilde{P}(w_t|w_{t-1},...w_{t-1+n})+R(\theta)
\]</span> <span class="math inline">\(R(\theta)\)</span>为正则化项 <span class="math display">\[
\theta=(b,d,W,U,H,C)\\
\theta\leftarrow\theta+\epsilon\frac{\partial{log\tilde{P}(w_t|w_{t-1},...,w_{t-n+1})}}{\partial\theta}
\]</span></p></li>
</ul></li>
<li><p>存在问题</p>
<ul>
<li><p>NNML只用了左边的n-1个词，不能利用更多的上下文信息（如2010年Mikolov提出RNNLM）</p></li>
<li><p>NNML的输出层计算量太大，需减少计算量使得大规模语料上的训练变得可行（如Minh和Hinton提出的LBL以及后续的一系列模型）</p></li>
<li><p>优化（简要）：</p>
<ul>
<li><p>2007年Mnih和Hinton提出的<strong>LBL以及后续的一系列相关模型，省去了NNLM中的激活函数，直接把模型变成了一个线性变换</strong>，尤其是后来将Hierarchical Softmax引入到LBL后，训练效率进一步增强，但是表达能力不如NNLM这种神经网络的结构；</p></li>
<li><p>2008年Collobert和Weston提出的<strong>C&amp;W模型不再利用语言模型的结构，而是将目标文本片段整体当做输入，然后预测这个片段是真实文本的概率</strong>，所以它的工作主要是改变了目标输出，由于输出只是一个概率大小，不再是词典大小，因此训练效率大大提升，但由于使用了这种比较“别致”的目标输出，使得它的词向量表征能力有限；</p></li>
<li><p>2010年Mikolov提出的<strong>RNNLM</strong>主要是为了解决长程依赖关系，时间复杂度问题依然存在。</p></li>
</ul></li>
</ul></li>
</ul>
<h2 id="word2vec">Word2vec</h2>
<ul>
<li><p>两种模型and两种优化算法</p>
<ul>
<li><span class="math inline">\(CBOW\)</span>（连续词袋模型）：利用上下文预测中心词</li>
<li><span class="math inline">\(Skip-gram\)</span>（跳字模型）：利用中心词预测上下文</li>
<li><span class="math inline">\(hierarchical\ softmax\)</span>（层次<span class="math inline">\(softmax\)</span>）</li>
<li><span class="math inline">\(negative\ sampling\)</span>（负采样）</li>
</ul></li>
<li><p>与NNLM的区别</p>
<p>​ 不涉及两个优化算法的角度讲，word2vec本质上是描述从自然语言到词向量转换的技术，同时<strong>蕴含语义信息：语义相近的词映射到欧式空间后具有较高的余弦相似度</strong>。NNML是把上下文词的向量进行拼接，word2vec是进行sum，<strong>求平均值来转换成低维词向量</strong>。</p>
<p>​ 涉及的<strong>两个优化算法</strong>可在一定程度上<strong>解决</strong>NNLM模型中出现的从隐藏层到输出到<span class="math inline">\(softmax\)</span>层的<strong>计算量很大的问题</strong>，因为NNLM要计算所有词的<span class="math inline">\(softmax\)</span>概率，再去寻找最大值。而word2vec<strong>采用了哈夫曼树</strong>来代替从隐藏层到输出<span class="math inline">\(softmax\)</span>层的映射从而避免计算所有词的<span class="math inline">\(softmax\)</span>概率。在实际计算中，只需沿着哈夫曼树从根结点走到叶节点即可。<strong>时间复杂度从<span class="math inline">\(O(n)\)</span>降低到<span class="math inline">\(O(logN)\)</span></strong></p></li>
<li><p>利用$ CBOW $模型理解流程</p>
<figure>
<img src="https://pic1.zhimg.com/50/v2-0f439e1bb44c71c8e694cc65cb509263_hd.jpg?source=1940ef5c" alt="img" /><figcaption aria-hidden="true">img</figcaption>
</figure>
<ul>
<li>输入层：上下文单词的one-hot【假设单词向量空间dim为V，上下文单词个数为C，组合起来维度信息即为：C×V，图中输入层的三个分别为三个单词的one-hot表示】</li>
<li>输入的one-hot矩阵乘以共享的输入权重矩阵W【V × N矩阵，N为自己设定的数，初始化权重矩阵W】</li>
<li>**隐藏层：所得到的向量相加求平均作为隐藏层向量，size为1*N**</li>
<li>乘以输出权重矩阵<span class="math inline">\(W&#39;\)</span>【N×V】</li>
<li>输出层：经过<span class="math inline">\(softmax\)</span>可得到向量【1×V】激活函数处理得到的V-dim概率分布，概率最大的即为预测出的中心词（target word）</li>
<li>代价函数：交叉熵代价函数</li>
<li>任何单词的one-hot乘以这个矩阵都将得到自己的词向量（Word Embedding）</li>
</ul></li>
<li><p>两个优化算法的具体过程</p>
<p>详见：http://flyrie.top/2018/10/31/Word2vec_Hierarchical_Softmax/</p>
<p>https://blog.csdn.net/itplus/article/details/37998797</p></li>
</ul>
<h2 id="rnn">RNN</h2>
<ul>
<li><p>循环神经网络相较于普通神经网络，可结合上下文去训练模型。</p></li>
<li><p><strong>Forward Propagation</strong>【此部分来自吴恩达深度学习网课】</p>
<ul>
<li><p>循环神经网络隐藏层常用的激活函数是<span class="math inline">\(tanh\)</span>，输出层的激活函数采用为<span class="math inline">\(sigmoid\)</span>函数（根据实际需要）</p></li>
<li><p>公式推导详解</p>
<figure>
<img src="http://www.ai-start.com/dl2017/images/19cbb2d356a2a6e0f35aa2a946b23a2a.png" alt="img" /><figcaption aria-hidden="true">img</figcaption>
</figure>
<p>在<span class="math inline">\(t\)</span>时刻</p></li>
</ul>
<p><span class="math display">\[
a^{&lt;t&gt;}=g_1(W_{aa}a^{&lt;t-1&gt;}+W_{ax}x^{&lt;t&gt;}+b_a)\\
\hat y=g_2(W_{ya}a^{&lt;t&gt;}+b_y)
\]</span></p>
<p>​ 上标表示时间步，第一个字符表示将要求解的变量，第二个字符表示使用的变量</p>
<ul>
<li><p>公式简化</p>
<figure>
<img src="http://www.ai-start.com/dl2017/images/27afdd27f45ad8ddf78677af2a3eeaf8.png" alt="img" /><figcaption aria-hidden="true">img</figcaption>
</figure>
<p>说明：为了简化将<span class="math inline">\(W_{aa}\)</span>与<span class="math inline">\(W_{ax}\)</span>水平放置组成<span class="math inline">\(W_a\)</span>；将<span class="math inline">\(a^{&lt;t-1&gt;}\)</span>与<span class="math inline">\(x^{&lt;t&gt;}\)</span>叠在一起；</p></li>
<li><p>更形象的总体说明：</p>
<figure>
<img src="http://www.ai-start.com/dl2017/images/rnn-f.png" alt="nn-" /><figcaption aria-hidden="true">nn-</figcaption>
</figure></li>
</ul></li>
<li><p><strong>Backpropagation through time</strong></p>
<p>交叉熵损失函数： <span class="math display">\[
L^{&lt;t&gt;}(\hat y^{&lt;t&gt;},y^{&lt;t&gt;})=-y^{&lt;t&gt;}log\hat y^{&lt;t&gt;}-(1-y^{&lt;t&gt;})log(1-\hat y^{&lt;t&gt;})
\]</span> 整个序列的损失函数<span class="math inline">\(L\)</span> <span class="math display">\[
L(\hat y, y)=\sum_{t=1}^{T_x}L^{&lt;t&gt;}(\hat y^{&lt;t&gt;},y^{&lt;t&gt;})
\]</span></p>
<ul>
<li><p>更具体公式</p>
<figure>
<img src="http://www.ai-start.com/dl2017/images/rnn_cell_backprop.png" alt="nn_cell_backpro" /><figcaption aria-hidden="true">nn_cell_backpro</figcaption>
</figure></li>
</ul></li>
<li><p>分类</p></li>
</ul>
<figure>
<img src="http://www.ai-start.com/dl2017/images/1daa38085604dd04e91ebc5e609d1179.png" alt="img" /><figcaption aria-hidden="true">img</figcaption>
</figure>
<ul>
<li><p>存在问题</p>
<ul>
<li>梯度消失问题（Vanishing gradients with RNNs）：对于很深的神经网络后面层的输出误差很难影响到前面层的计算，梯度被近距离梯度主导，导致模型很难学习到远距离的依关系，故<strong>RNN不擅长处理长期依赖问题</strong></li>
<li>梯度爆炸问题：一般可通过梯度修剪处理</li>
</ul></li>
</ul>
<h2 id="gru">GRU</h2>
<p>Gated Recurrent Unit（门控循环单元）</p>
<ul>
<li><p>增加新变量<span class="math inline">\(c\)</span>，即代表记忆细胞<span class="math inline">\((cell)\)</span></p>
<p><span class="math inline">\(c^{&lt;t&gt;}=a^{&lt;t&gt;}\)</span>（与LSTMs的区别）</p></li>
<li><p><span class="math inline">\(c\)</span>的更新过程</p>
<hr />
<p><span class="math inline">\(\tilde c^{&lt;t&gt;} = tanh(W_c[\Gamma_r*c^{&lt;t-1&gt;},x^{&lt;t&gt;}]+b_c)\)</span></p>
<p><span class="math inline">\(\Gamma_u=\sigma(W_u[c^{&lt;t-1&gt;},x^{&lt;t&gt;}]+b_u)\)</span>【<strong><span class="math inline">\(sigmoid\)</span>函数，大部分情况下非常接近0或1</strong>】</p>
<p><span class="math inline">\(\Gamma_r=\sigma(W_r[c^{&lt;t-1&gt;},x^{&lt;t&gt;}]+b_r)\)</span></p>
<p><span class="math inline">\(c^{&lt;t&gt;}=\Gamma_u*\tilde c^{&lt;t&gt;}+(1-\Gamma_u)*c^{&lt;t-1&gt;}\)</span>【为0则不更新】</p>
<hr />
<p><span class="math inline">\(u\)</span>：update</p>
<p><span class="math inline">\(r\)</span>：relevance</p>
<p>*：每个元素相乘，而非矩阵乘法</p>
<p><strong>相关门</strong><span class="math inline">\(\Gamma_r\)</span>门表示计算出的下一个<span class="math inline">\(c^{&lt;t&gt;}\)</span>的候选值<span class="math inline">\(\tilde c^{&lt;t&gt;}\)</span>与<span class="math inline">\(c^{&lt;t-1&gt;}\)</span>的相关性</p>
<p><strong>更新门</strong><span class="math inline">\(\Gamma_u\)</span>门表示更新，并且十分容易取0值，这个更新式子就会变为<span class="math inline">\(c^{&lt;t&gt;}=c^{&lt;t-1&gt;}\)</span>，<strong>有利于维持细胞的值，从而缓解梯度消失的问题，允许神经网络运行在非常庞大的依赖词上。</strong></p></li>
</ul>
<h2 id="lstm">LSTM</h2>
<p>long short term memory unit（长短期记忆）</p>
<ul>
<li><p><span class="math inline">\(c\)</span>的更新过程</p>
<hr />
<p><span class="math inline">\(\tilde c^{&lt;t&gt;}=tanh(W_c[a^{&lt;t-1&gt;},x^{&lt;t&gt;}]+b_c)\)</span></p>
<p><span class="math inline">\(\Gamma_u=\sigma(W_u[a^{&lt;t-1&gt;},x^{&lt;t&gt;}]+ b_u)\)</span></p>
<p><span class="math inline">\(\Gamma_f=\sigma(W_f[a^{&lt;t-1&gt;},x^{&lt;t&gt;}]+ b_f)\)</span></p>
<p><span class="math inline">\(\Gamma_o=\sigma(W_o[a^{&lt;t-1&gt;},x^{&lt;t&gt;}]+ b_o)\)</span></p>
<p><span class="math inline">\(c^{&lt;t&gt;}=\Gamma_u*\tilde c^{&lt;t&gt;}+\Gamma_f*c^{&lt;t-1&gt;}\)</span></p>
<p><span class="math inline">\(a^{&lt;t&gt;}=\Gamma_o*tanh(c^{&lt;t&gt;})\)</span></p>
<hr />
<p><span class="math inline">\(\Gamma u\)</span>：更新门</p>
<p><span class="math inline">\(\Gamma_f\)</span>：遗忘门</p>
<p><span class="math inline">\(\Gamma_o\)</span>：输出门</p>
<p>图片表述</p>
<figure>
<img src="https://s3.ax1x.com/2021/01/27/sxDrCV.png" alt="image-20210125201411508" /><figcaption aria-hidden="true">image-20210125201411508</figcaption>
</figure>
<p>​ 看公式可得，各门值只取决于<span class="math inline">\(a^{&lt;t-1&gt;}\)</span>与<span class="math inline">\(x^{&lt;t&gt;}\)</span>，但有时也可以偷窥一下<span class="math inline">\(c^{&lt;t-1&gt;}\)</span>的值，这叫做“窥视孔连接”<span class="math inline">\((peephole\ connection)\)</span>。故有时说<span class="math inline">\(c^{&lt;t-1&gt;}\)</span>也能影响门值。</p></li>
<li><p>前向传递</p>
<figure>
<img src="http://www.ai-start.com/dl2017/images/LSTM.png" alt="ST" /><figcaption aria-hidden="true">ST</figcaption>
</figure></li>
<li><p>反向传播</p>
<figure>
<img src="https://s3.ax1x.com/2021/01/27/sxD2DJ.png" alt="image-20210125204542244" /><figcaption aria-hidden="true">image-20210125204542244</figcaption>
</figure>
<p>具体推导过程见：https://zybuluo.com/hanbingtao/note/581764</p></li>
</ul>
<h2 id="bi-directional-rnn">Bi-directional RNN</h2>
<p>双向循环神经网络，单元可使用标准的RNN或者GRU、LSTM单元都可，一个有LSTM单元的双向RNN模型是最常用的</p>
<figure>
<img src="http://www.ai-start.com/dl2017/images/053831ff43d039bd5e734df96d8794cb.png" alt="img" /><figcaption aria-hidden="true">img</figcaption>
</figure>
<p>此处为标准的RNN单元<span class="math inline">\(\hat y^{&lt;t&gt;}=g(W_g[\vec a^{&lt;t&gt;}, \overleftarrow a^{&lt;t&gt;}]+b_y)\)</span></p>
<p><span class="math inline">\(\overleftarrow a\)</span>只是从右到左，也是在计算激活值</p>
<ul>
<li>缺点为需要完整的数据序列</li>
</ul>
<h2 id="deep-rnns">Deep RNNs</h2>
<p>深层循环神经网络</p>
<figure>
<img src="http://www.ai-start.com/dl2017/images/455863a3c8c2dfaa0e5474bfa2c6824d.png" alt="img" /><figcaption aria-hidden="true">img</figcaption>
</figure>
<p>计算方法：例<span class="math inline">\(a^{[2]&lt;3&gt;}\)</span>有两个输入，下面的和右面的，故可写为下式：</p>
<p><span class="math inline">\(a^{[2]&lt;3&gt;}=g(W_a^{[2]}[a^{[2]&lt;2&gt;}, a^{[1]&lt;3&gt;}]+b_a^{[2]})\)</span></p>
<p>一般RNN不会特别深，更多会将输出去掉而换成一些深的层，这些层并不水平相连，而只是一个深层的往来，用来预测<span class="math inline">\(y\)</span>。</p>
<h2 id="todo">TODO</h2>
<ul>
<li>ELMo(Embeddings from Language Models)
<ul>
<li>为了利用无标记数据使用了<strong>语言模型</strong></li>
<li>双向LSTM</li>
</ul></li>
<li>OpenAI GPT(<strong>Generative Pre-training Transformer</strong>)</li>
<li>BERT(<strong>Bidirectional Encoder Representations from Transformers</strong>)</li>
</ul>

      
    </div>

    
	
	

	
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2019/09/14/JS-jQuery-2048%E5%B0%8F%E6%B8%B8%E6%88%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Olivia">
      <meta itemprop="description" content="May All Your Troubles Be little Ones">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Olivia的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/09/14/JS-jQuery-2048%E5%B0%8F%E6%B8%B8%E6%88%8F/" class="post-title-link" itemprop="url">JS-jQuery-2048小游戏</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-09-14 20:54:51" itemprop="dateCreated datePublished" datetime="2019-09-14T20:54:51+08:00">2019-09-14</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-05-01 14:37:00" itemprop="dateModified" datetime="2021-05-01T14:37:00+08:00">2021-05-01</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/JavaScript/" itemprop="url" rel="index"><span itemprop="name">JavaScript</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>25k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>23 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <span id="more"></span>
<p><font size=3 face= "微软雅黑" color="darkred"> 　　这是暑假的课设，也是我学习JS的动力，提前使用C++实现一遍过了，然而实现过后打算再用JS写一遍时，有一种无从下手的感觉，所以参考了一下其他人的代码，也由此认识到了jQuery框架中对于动画实现部分的便利，于是又开始花时间学习jQuery框架，这个就是纯看菜鸟教程学习的了，学习得倒也很快，所以再次下手做2048时动画效果实现部分就是采用了jQuery中的相关部分。</font></p>
<blockquote>
<h2 id="目录"><em>目录</em></h2>
<h3 id="一游戏流程介绍"><em><a href="#1">一、游戏流程介绍</a></em></h3>
<h3 id="二具体代码展示"><em><a href="#2">二、具体代码展示</a></em></h3>
<h3 id="三c版本代码展示"><em><a href="#3">三、C++版本代码展示</a></em></h3>
<h3 id="四后记"><em>四、后记</em></h3>
</blockquote>
<hr />
<h2 id="一游戏流程介绍-1"><span id="1">一、游戏流程介绍</span></h2>
<ul>
<li><p>流程图展示</p>
<blockquote>
<p>game：游戏状态 updateGameView()：更新游戏界面 createNumber()：产生新的数字格 check()：判断游戏状态 check2048()：判断是否出现2048 allCheck()：判断是否游戏失败而结束，即无空白格，也无相邻可合并数字格</p>
</blockquote>
<figure>
<img src="https://i.loli.net/2019/09/15/TOkoG4WMjXHSNJA.jpg" alt="2048流程图" /><figcaption aria-hidden="true">2048流程图</figcaption>
</figure></li>
</ul>
<hr />
<h2 id="二具体代码展示-1"><span id="2">二、具体代码展示</span></h2>
<ul>
<li><p>HTML文件</p>
<p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang&#x3D;&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">  		&lt;meta charset&#x3D;&quot;UTF-8&quot;&gt;</span><br><span class="line">  		&lt;title&gt;2048--Olivia&lt;&#x2F;title&gt;</span><br><span class="line">  		&lt;link rel&#x3D;&quot;icon&quot; href&#x3D;&quot;可爱图标2.png&quot; sizes&#x3D;&quot;2000x2000&quot;&gt;</span><br><span class="line">  		&lt;link rel&#x3D;&quot;stylesheet&quot; type&#x3D;&quot;text&#x2F;css&quot; href&#x3D;&quot;2048.css&quot;&gt;</span><br><span class="line">  		&lt;script src&#x3D;&quot;https:&#x2F;&#x2F;cdn.staticfile.org&#x2F;jquery&#x2F;1.10.2&#x2F;jquery.min.js&quot;&gt;&lt;&#x2F;script&gt;</span><br><span class="line">  		&lt;script src&#x3D;&quot;2048.js&quot;&gt;&lt;&#x2F;script&gt;</span><br><span class="line">&lt;&#x2F;head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">  	&lt;div id&#x3D;&quot;container&quot;&gt;</span><br><span class="line">      	&lt;div id&#x3D;&quot;show&quot;&gt;</span><br><span class="line">          	&lt;p&gt;&lt;b&gt;2048&lt;&#x2F;b&gt;&lt;&#x2F;p&gt;</span><br><span class="line">      	&lt;&#x2F;div&gt;</span><br><span class="line">      	&lt;img src&#x3D;&quot;头像.jpg&quot;&gt;</span><br><span class="line">      	&lt;div id&#x3D;&quot;er&quot;&gt;</span><br><span class="line">          	&lt;p id&#x3D;&quot;per&quot;&gt;by Olivia~~&lt;&#x2F;p&gt;</span><br><span class="line">      	&lt;&#x2F;div&gt;</span><br><span class="line">      	&lt;div id&#x3D;&quot;game&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class="line">      	&lt;div id&#x3D;&quot;github&quot;&gt;</span><br><span class="line">          	&lt;a href&#x3D;&quot;http:&#x2F;&#x2F;wyj-olivia.github.io&quot; target&#x3D;&quot;_blank&quot;&gt;&lt;img id&#x3D;&quot;git_img&quot; src&#x3D;&quot;github.png&quot;</span><br><span class="line">                                                                     				onmouseover&#x3D;&quot;showp()&quot; onmouseout&#x3D;&quot;hidep()&quot;&gt;&lt;&#x2F;a&gt;</span><br><span class="line">          	&lt;p id&#x3D;&quot;git_p&quot;&gt;Olivia的github&lt;&#x2F;p&gt;</span><br><span class="line">      	&lt;&#x2F;div&gt;</span><br><span class="line">      	&lt;div id&#x3D;&quot;time&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class="line">  	&lt;&#x2F;div&gt;</span><br><span class="line"></span><br><span class="line">&lt;&#x2F;body&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure></p></li>
<li><p>CSS文件</p>
<p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br></pre></td><td class="code"><pre><span class="line">*&#123;</span><br><span class="line">  		margin: 0px;</span><br><span class="line">  		padding: 0px;</span><br><span class="line">&#125;</span><br><span class="line">#container&#123;</span><br><span class="line">  		position: relative;</span><br><span class="line">  		background-color: #FAF8EF;</span><br><span class="line">  		top: 0px;</span><br><span class="line">  		margin: 0px auto;</span><br><span class="line">  		width: 75%;</span><br><span class="line">  		height: 715px;</span><br><span class="line">  		border-style: double;</span><br><span class="line">  		border-top-style: dotted;</span><br><span class="line">  		border-bottom-style: dotted;</span><br><span class="line">  		border-color: dimgray;</span><br><span class="line">  		border-width: 10px;</span><br><span class="line">&#125;</span><br><span class="line">body&#123;</span><br><span class="line">  		background-color: aliceblue;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#show&#123;</span><br><span class="line">  		position: absolute;</span><br><span class="line">  		width: auto;</span><br><span class="line">    height: auto;</span><br><span class="line">    margin: 25px 360px;</span><br><span class="line"></span><br><span class="line">    border-color: darkseagreen;</span><br><span class="line">    border-style: dashed;</span><br><span class="line">    border-width: 7px;</span><br><span class="line">    border-radius: 15px;</span><br><span class="line">    padding: 6px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#show p&#123;</span><br><span class="line">    font-size: 80px;</span><br><span class="line">    font-family: fantasy;</span><br><span class="line">    color: darkslategray;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">img&#123;</span><br><span class="line">    margin: 30px 670px;</span><br><span class="line">    position: absolute;</span><br><span class="line">    width: 100px;</span><br><span class="line">    height: 100px;</span><br><span class="line">    border-radius: 40px;</span><br><span class="line">    border-style: groove;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#time&#123;</span><br><span class="line">    position: absolute;</span><br><span class="line">    font-size: 18px;</span><br><span class="line">    margin: 665px 800px;</span><br><span class="line">    color: darkslategray;</span><br><span class="line">    font-family: fantasy;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#er&#123;</span><br><span class="line">    position: absolute;</span><br><span class="line">    width: 150px;</span><br><span class="line">    height: auto;</span><br><span class="line">    margin: 145px 640px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#per&#123;</span><br><span class="line">    font-size: 20px;</span><br><span class="line">    color: darkcyan;</span><br><span class="line">    font-family: 微软雅黑;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#game&#123;</span><br><span class="line">    position: absolute;</span><br><span class="line">    border-radius: 8px;</span><br><span class="line">    background-color: #BBADA0;</span><br><span class="line">    margin: 180px 350px;</span><br><span class="line">    font-family: 微软雅黑;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#git_img&#123;</span><br><span class="line">    position: absolute;</span><br><span class="line">    width: 40px;</span><br><span class="line">    height: 40px;</span><br><span class="line">    margin: 650px 360px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#git_p&#123;</span><br><span class="line">    position: absolute;</span><br><span class="line">    color: darkcyan;</span><br><span class="line">    margin: 660px 420px;</span><br><span class="line">    padding: 5px;</span><br><span class="line">    background-color: cornsilk;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">a&#123;</span><br><span class="line">    text-decoration: unset;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.default-cell&#123;</span><br><span class="line">    position: absolute;</span><br><span class="line">    border-radius: 8px;</span><br><span class="line">    background-color: #CDC1B4;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.cell&#123;</span><br><span class="line">    position: absolute;</span><br><span class="line">    border-radius: 8px;</span><br><span class="line">    text-align: center;</span><br><span class="line">    font-weight: bolder;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></p></li>
<li><p>JS文件</p>
<p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;横竖方向方块数量</span><br><span class="line">const ROW &#x3D; 4; const COL &#x3D; 4;</span><br><span class="line">&#x2F;&#x2F;验证游戏是否结束</span><br><span class="line">const GAME_OVER &#x3D; -1;</span><br><span class="line">const GAME_WIN &#x3D; 1;</span><br><span class="line">const GAME_CON &#x3D; 0;</span><br><span class="line">let game &#x3D; GAME_CON;</span><br><span class="line">&#x2F;&#x2F;方块大小</span><br><span class="line">const CELL_SIZE &#x3D; 100;</span><br><span class="line">&#x2F;&#x2F;间距</span><br><span class="line">const MARGIN &#x3D; Math.floor(CELL_SIZE &#x2F; 10);</span><br><span class="line">&#x2F;&#x2F;存放数字的二维数组</span><br><span class="line">let board &#x3D; new Array();</span><br><span class="line">&#x2F;&#x2F;移动动画时长</span><br><span class="line">const MOVE_ANIMATION_TIME &#x3D; 100;</span><br><span class="line">&#x2F;&#x2F;最小数字</span><br><span class="line">const MIN_NUMBER &#x3D; 2;</span><br><span class="line"></span><br><span class="line">&#x2F;*游戏过程</span><br><span class="line">* 按键 --&gt; move --&gt;updateGameView() --&gt; game &#x3D;&#x3D; GAME_CON? --true--&gt; createNumber() --&gt; check() --&gt; check2048() --true--&gt; game &#x3D; GAME_WIN alert</span><br><span class="line">*                                                         -------------false--------&gt;                         --false--&gt; allCheck() --true--&gt; game &#x3D; GAME_OVER alert</span><br><span class="line">*                                                                                                                                   --false--&gt; move*&#x2F;</span><br><span class="line"></span><br><span class="line">window.onload &#x3D; function()&#123;</span><br><span class="line">	init();  &#x2F;&#x2F;初始化数组和游戏界面</span><br><span class="line">	updateGameView();  &#x2F;&#x2F;更新游戏视图</span><br><span class="line">	&#x2F;&#x2F;生成两个数字</span><br><span class="line">	createOneNumber();</span><br><span class="line">	createOneNumber();</span><br><span class="line">	startTime();</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">function startTime()&#123;</span><br><span class="line">	let today &#x3D; new Date();</span><br><span class="line">	let t &#x3D; today.toLocaleTimeString();</span><br><span class="line">	document.getElementById(&quot;time&quot;).innerHTML &#x3D; t;</span><br><span class="line">	setTimeout(function()&#123;</span><br><span class="line">		startTime();</span><br><span class="line">	&#125;, 500);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; $(document).ready(function () &#123;</span><br><span class="line">&#x2F;&#x2F;    $(&quot;#git_img&quot;).onmouseover(function () &#123;</span><br><span class="line">&#x2F;&#x2F;        $(&quot;#git_p&quot;).fadeIn();</span><br><span class="line">&#x2F;&#x2F;    &#125;) ;</span><br><span class="line">&#x2F;&#x2F;     $(&quot;#git_img&quot;).onmouseout(function () &#123;</span><br><span class="line">&#x2F;&#x2F;         $(&quot;#git_p&quot;).fadeOut();</span><br><span class="line">&#x2F;&#x2F;     &#125;) ;</span><br><span class="line">&#x2F;&#x2F; &#125;);</span><br><span class="line"></span><br><span class="line">function showp()&#123;</span><br><span class="line">	$(&quot;#git_p&quot;).fadeIn();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function hidep()&#123;</span><br><span class="line">	$(&quot;#git_p&quot;).fadeOut();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">window.onkeydown &#x3D; function(e)&#123;</span><br><span class="line">	switch (e.keyCode) &#123;</span><br><span class="line">	&#x2F;&#x2F;上</span><br><span class="line">		case 87: moveUp(); break;</span><br><span class="line">		case 38: moveUp(); break;</span><br><span class="line">		&#x2F;&#x2F;下</span><br><span class="line">		case 40: moveDown();break;</span><br><span class="line">		case 83: moveDown();break;</span><br><span class="line">		&#x2F;&#x2F;左</span><br><span class="line">		case 65: moveLeft();break;</span><br><span class="line">		case 37: moveLeft();break;</span><br><span class="line">		&#x2F;&#x2F;右</span><br><span class="line">		case 68: moveRight();break;</span><br><span class="line">		case 39: moveRight();break;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">function moveUp()</span><br><span class="line">&#123;</span><br><span class="line">	&#x2F;&#x2F;合并注意事项</span><br><span class="line">	&#x2F;&#x2F;1.不能合并的情况：堆在一起且无可合并的格子</span><br><span class="line">	&#x2F;&#x2F;2.每次合并时合并相邻的两个，不可多合并</span><br><span class="line">	let can &#x3D; false;</span><br><span class="line">	&#x2F;&#x2F;先合并</span><br><span class="line">	for(let col &#x3D; 0; col &lt; COL; col++)&#123;</span><br><span class="line">	let temp &#x3D; 0;</span><br><span class="line">	let rl &#x3D; 0;</span><br><span class="line">		for(let row &#x3D; 0; row &lt; ROW; row++)&#123;</span><br><span class="line">		    if(board[row][col] !&#x3D; 0)&#123;</span><br><span class="line">		        if(board[row][col] !&#x3D; temp)&#123;</span><br><span class="line">		            temp &#x3D; board[row][col];</span><br><span class="line">		            rl &#x3D; row;</span><br><span class="line">		        &#125;else &#123;</span><br><span class="line">		            board[rl][col] &#x3D; temp * 2;</span><br><span class="line">		            board[row][col] &#x3D; 0;</span><br><span class="line">		            cellMoveAnimation(row, col, rl, col);</span><br><span class="line">		            can &#x3D; true;</span><br><span class="line">		            temp &#x3D; 0;</span><br><span class="line">		        &#125;</span><br><span class="line">		    &#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	&#x2F;&#x2F;再移动</span><br><span class="line">	for(let col &#x3D; 0; col &lt; COL; col++)&#123;</span><br><span class="line">		for(let row &#x3D; 0; row &lt;ROW; row++)&#123;</span><br><span class="line">		    if(board[row][col] !&#x3D; 0)&#123;</span><br><span class="line">		        for(let i &#x3D; 0; i &lt; row; i++)&#123;</span><br><span class="line">		            if(board[i][col] &#x3D;&#x3D; 0)&#123;</span><br><span class="line">		                board[i][col] &#x3D; board[row][col];</span><br><span class="line">		                board[row][col] &#x3D; 0;</span><br><span class="line">		                cellMoveAnimation(row, col, i, col);</span><br><span class="line">		                can &#x3D; true;</span><br><span class="line">		                break;</span><br><span class="line">		            &#125;</span><br><span class="line">		        &#125;</span><br><span class="line">		    &#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	&#x2F;&#x2F;重新渲染页面</span><br><span class="line">	setTimeout(&quot;updateGameView()&quot;, MOVE_ANIMATION_TIME);</span><br><span class="line">	&#x2F;&#x2F;若游戏未凑齐2048，符合移动条件条件则新建格子</span><br><span class="line">	if(can &amp;&amp; (game &#x3D;&#x3D; GAME_CON))&#123;</span><br><span class="line">		&#x2F;&#x2F;新建格子</span><br><span class="line">		setTimeout(&quot;createOneNumber()&quot;, MOVE_ANIMATION_TIME);</span><br><span class="line">	&#125;</span><br><span class="line">	check();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function moveDown() &#123;</span><br><span class="line">	let can &#x3D; false;</span><br><span class="line">	</span><br><span class="line">	&#x2F;&#x2F;先合并</span><br><span class="line">	for (let col &#x3D; 0; col &lt; COL; col++) &#123;</span><br><span class="line">	let temp &#x3D; 0;</span><br><span class="line">	let rl &#x3D; 0;</span><br><span class="line">		for (let row &#x3D; ROW - 1; row &gt;&#x3D; 0; row--) &#123;</span><br><span class="line">		    if (board[row][col] !&#x3D; 0) &#123;</span><br><span class="line">		        if (board[row][col] !&#x3D; temp) &#123;</span><br><span class="line">		            temp &#x3D; board[row][col];</span><br><span class="line">		            rl &#x3D; row;</span><br><span class="line">		        &#125; else &#123;</span><br><span class="line">		            board[rl][col] &#x3D; temp * 2;</span><br><span class="line">		            board[row][col] &#x3D; 0;</span><br><span class="line">		            cellMoveAnimation(row, col, rl, col);</span><br><span class="line">		            can &#x3D; true;</span><br><span class="line">		            temp &#x3D; 0;</span><br><span class="line">		        &#125;</span><br><span class="line">		    &#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	&#x2F;&#x2F;再移动</span><br><span class="line">	for (let col &#x3D; 0; col &lt; COL; col++) &#123;</span><br><span class="line">		for (let row &#x3D; ROW - 2; row &gt;&#x3D; 0; row--)&#123;</span><br><span class="line">		    if(board[row][col] !&#x3D; 0)&#123;</span><br><span class="line">		        for(let i &#x3D; ROW - 1; i &gt; row; i--)&#123;</span><br><span class="line">		            if(board[i][col] &#x3D;&#x3D; 0)&#123;</span><br><span class="line">		                board[i][col] &#x3D; board[row][col];</span><br><span class="line">		                board[row][col] &#x3D; 0;</span><br><span class="line">		                cellMoveAnimation(row, col, i, col);</span><br><span class="line">		                can &#x3D; true;</span><br><span class="line">		                break;</span><br><span class="line">		            &#125;</span><br><span class="line">		        &#125;</span><br><span class="line">		    &#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	&#x2F;&#x2F;重新渲染页面</span><br><span class="line">	setTimeout(&quot;updateGameView()&quot;, MOVE_ANIMATION_TIME);</span><br><span class="line">	&#x2F;&#x2F;若满足条件且未凑齐2048，则新建格子</span><br><span class="line">	if(can &amp;&amp; (game &#x3D;&#x3D; GAME_CON))&#123;</span><br><span class="line">		setTimeout(&quot;createOneNumber()&quot;, MOVE_ANIMATION_TIME);</span><br><span class="line">	&#125;</span><br><span class="line">	check();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function moveLeft()</span><br><span class="line">&#123;</span><br><span class="line">	let can &#x3D; false;</span><br><span class="line">	</span><br><span class="line">	&#x2F;&#x2F;先合并</span><br><span class="line">	for(let row &#x3D; 0; row &lt; ROW; row++)&#123;</span><br><span class="line">	let temp &#x3D; 0;</span><br><span class="line">	let cl &#x3D; 0;</span><br><span class="line">		for(let col &#x3D; 0; col &lt; COL; col++)&#123;</span><br><span class="line">		    if(board[row][col] !&#x3D; 0)&#123;</span><br><span class="line">		        if(temp !&#x3D; board[row][col])&#123;</span><br><span class="line">		            temp &#x3D; board[row][col];</span><br><span class="line">		            cl &#x3D; col;</span><br><span class="line">		        &#125;else&#123;</span><br><span class="line">		            board[row][cl] &#x3D; temp * 2;</span><br><span class="line">		            board[row][col] &#x3D; 0;</span><br><span class="line">		            cellMoveAnimation(row, col, row, cl);</span><br><span class="line">		            can &#x3D; true;</span><br><span class="line">		            temp &#x3D; 0;</span><br><span class="line">		        &#125;</span><br><span class="line">		    &#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	&#x2F;&#x2F;再移动</span><br><span class="line">	for(let row &#x3D; 0; row &lt; ROW; row++)&#123;</span><br><span class="line">		for(let col &#x3D; 1; col &lt; COL; col++)&#123;</span><br><span class="line">		    if(board[row][col] !&#x3D; 0)&#123;</span><br><span class="line">		        for(let i &#x3D; 0; i &lt; col; i++)&#123;</span><br><span class="line">		            if(board[row][i] &#x3D;&#x3D; 0)&#123;</span><br><span class="line">		                board[row][i] &#x3D; board[row][col];</span><br><span class="line">		                board[row][col] &#x3D; 0;</span><br><span class="line">		                cellMoveAnimation(row, col, row, i);</span><br><span class="line">		                can &#x3D; true;</span><br><span class="line">		                break;</span><br><span class="line">		            &#125;</span><br><span class="line">		        &#125;</span><br><span class="line">		    &#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	setTimeout(&quot;updateGameView()&quot;, MOVE_ANIMATION_TIME);</span><br><span class="line">	if(can &amp;&amp; (game &#x3D;&#x3D; GAME_CON))&#123;</span><br><span class="line">		setTimeout(&quot;createOneNumber()&quot;, MOVE_ANIMATION_TIME);</span><br><span class="line">	&#125;</span><br><span class="line">	check();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;向右</span><br><span class="line">function moveRight()</span><br><span class="line">&#123;</span><br><span class="line">	let can &#x3D; false;</span><br><span class="line">	</span><br><span class="line">	&#x2F;&#x2F;先合并</span><br><span class="line">	for(let row &#x3D; 0; row &lt; ROW; row++)&#123;</span><br><span class="line">	let temp &#x3D; 0;</span><br><span class="line">	let cl &#x3D; 0;</span><br><span class="line">		for(let col &#x3D; COL - 1; col &gt;&#x3D; 0; col--)&#123;</span><br><span class="line">		    if(board[row][col] !&#x3D; 0)&#123;</span><br><span class="line">		        if(board[row][col] !&#x3D; temp)&#123;</span><br><span class="line">		            temp &#x3D; board[row][col];</span><br><span class="line">		            cl &#x3D; col;</span><br><span class="line">		        &#125;else&#123;</span><br><span class="line">		            board[row][cl] &#x3D; temp * 2;</span><br><span class="line">		            board[row][col] &#x3D; 0;</span><br><span class="line">		            cellMoveAnimation(row, col, row, cl);</span><br><span class="line">		            can &#x3D; true;</span><br><span class="line">		            temp &#x3D; 0;</span><br><span class="line">		        &#125;</span><br><span class="line">		    &#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	&#x2F;&#x2F;再平移</span><br><span class="line">	for(let row &#x3D; 0; row &lt; ROW; row++)&#123;</span><br><span class="line">		for(let col &#x3D; COL - 2; col &gt;&#x3D; 0; col--)&#123;</span><br><span class="line">		    if(board[row][col])&#123;</span><br><span class="line">		        for(let i &#x3D; COL - 1; i &gt; col; i--)&#123;</span><br><span class="line">		            if(board[row][i] &#x3D;&#x3D; 0)&#123;</span><br><span class="line">		                board[row][i] &#x3D; board[row][col];</span><br><span class="line">		                board[row][col] &#x3D; 0;</span><br><span class="line">		                cellMoveAnimation(row, col, row, i);</span><br><span class="line">		                can &#x3D; true;</span><br><span class="line">		                break;</span><br><span class="line">		            &#125;</span><br><span class="line">		        &#125;</span><br><span class="line">		    &#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	setTimeout(&quot;updateGameView()&quot;, MOVE_ANIMATION_TIME);</span><br><span class="line">	if(can &amp;&amp; (game &#x3D;&#x3D; GAME_CON))&#123;</span><br><span class="line">		setTimeout(&quot;createOneNumber()&quot;, MOVE_ANIMATION_TIME);</span><br><span class="line">	&#125;</span><br><span class="line">	check();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function check()</span><br><span class="line">&#123;</span><br><span class="line">	if(!check2048())&#123;</span><br><span class="line">		if(allCheck())&#123;</span><br><span class="line">		    game &#x3D; GAME_OVER;</span><br><span class="line">		    alert(&quot;What a pity... Do It Again!&quot;);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;检查是否凑齐2048</span><br><span class="line">function check2048()</span><br><span class="line">&#123;</span><br><span class="line">	let max &#x3D; 0;</span><br><span class="line">	for(let row &#x3D; 0; row &lt; ROW; row++)&#123;</span><br><span class="line">		for(let col &#x3D; 0; col &lt; COL; col++)&#123;</span><br><span class="line">		    if(board[row][col] &gt; max)&#123;</span><br><span class="line">		        max &#x3D; board[row][col];</span><br><span class="line">		    &#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	if(max &#x3D;&#x3D; 2048)&#123;</span><br><span class="line">		game &#x3D; GAME_WIN;</span><br><span class="line">		alert(&quot;Congratulations!!   You Win!!&quot;);</span><br><span class="line">		return true;</span><br><span class="line">		&#125;else&#123;</span><br><span class="line">		game &#x3D; GAME_CON;</span><br><span class="line">		return false;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#x2F;&#x2F;检查游戏是否结束</span><br><span class="line">function allCheck()</span><br><span class="line">&#123;</span><br><span class="line">	&#x2F;&#x2F;有没有空格</span><br><span class="line">	for(let i &#x3D; 0; i &lt; ROW; i++)</span><br><span class="line">		for(let j &#x3D; 0; j &lt; COL; j++)</span><br><span class="line">		    if(board[i][j] &#x3D;&#x3D; 0)&#123;</span><br><span class="line">		        game &#x3D; GAME_CON;</span><br><span class="line">		        return false;</span><br><span class="line">		    &#125;</span><br><span class="line">	&#x2F;&#x2F;横向检查有没有相邻可合并的格子</span><br><span class="line">	for(let i &#x3D; 0; i &lt; ROW; i++)</span><br><span class="line">		for(let j &#x3D; 0; j &lt; COL - 1; j++)</span><br><span class="line">		    if(board[i][j] &#x3D;&#x3D; board[i][j+1])&#123;</span><br><span class="line">		        game &#x3D; GAME_CON;</span><br><span class="line">		        return false;</span><br><span class="line">		    &#125;</span><br><span class="line">	&#x2F;&#x2F;横向检查有没有相邻可合并的格子</span><br><span class="line">	for(let i &#x3D; 0; i &lt; ROW - 1; i++)</span><br><span class="line">		for(let j &#x3D; 0; j &lt; COL; j++)</span><br><span class="line">		    if(board[i][j] &#x3D;&#x3D; board[i+1][j])&#123;</span><br><span class="line">		        game &#x3D; GAME_CON;</span><br><span class="line">		        return false;</span><br><span class="line">		    &#125;</span><br><span class="line">	return true;</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;*</span><br><span class="line">&#x2F;&#x2F;生成随机数</span><br><span class="line">function createOneNumber()</span><br><span class="line">&#123;</span><br><span class="line">	&#x2F;&#x2F;   1&#x2F;20的几率生成最小数字的两倍</span><br><span class="line">	let num;</span><br><span class="line">	let per &#x3D; Math.floor(Math.random() * 19) + 1;  &#x2F;&#x2F;生成1到20之间的随机整数</span><br><span class="line">	if( per &#x3D;&#x3D; 1 )&#123;</span><br><span class="line">		num &#x3D; MIN_NUMBER * 2;</span><br><span class="line">	&#125;else&#123;</span><br><span class="line">		num &#x3D; MIN_NUMBER;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	&#x2F;&#x2F;  生成随机数字的格子</span><br><span class="line">	let x, y;</span><br><span class="line">	do&#123;</span><br><span class="line">		x &#x3D; Math.floor(Math.random() * (ROW - 1));</span><br><span class="line">		y &#x3D; Math.floor(Math.random() * (COL - 1));</span><br><span class="line">	&#125;while (board[x][y] !&#x3D; 0);</span><br><span class="line">	board[x][y] &#x3D; num;</span><br><span class="line">	</span><br><span class="line">	&#x2F;&#x2F;  生成随机数字的动画效果</span><br><span class="line">	$(&quot;#cell-&quot; + x + &quot;-&quot; + y).css(&#123;</span><br><span class="line">		&quot;background-color&quot;: getColorByNumber(board[x][y]),</span><br><span class="line">		&quot;font-size&quot;: CELL_SIZE &#x2F; 2.5,</span><br><span class="line">		&quot;line-height&quot;: CELL_SIZE + &#39;px&#39;</span><br><span class="line">	&#125;);</span><br><span class="line">	$(&quot;#cell-&quot; + x + &quot;-&quot; + y).text(board[x][y]);</span><br><span class="line">	$(&quot;#cell-&quot; + x + &quot;-&quot; + y).animate(&#123;</span><br><span class="line">		width: CELL_SIZE,</span><br><span class="line">		height: CELL_SIZE,</span><br><span class="line">		left: getCellLeft(x, y),</span><br><span class="line">		top: getCellTop(x, y),</span><br><span class="line">	&#125;);</span><br><span class="line">&#125;</span><br><span class="line">*&#x2F;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 生成一个随机的数字</span><br><span class="line">function createOneNumber() &#123;</span><br><span class="line">let i, j;</span><br><span class="line">while(true) &#123;</span><br><span class="line">	i &#x3D; Math.floor(Math.random() * ROW);</span><br><span class="line">	j &#x3D; Math.floor(Math.random() * COL);</span><br><span class="line">	&#x2F;&#x2F; 如果此处是零</span><br><span class="line">	if (board[i][j] &#x3D;&#x3D; 0) &#123;</span><br><span class="line">	    board[i][j] &#x3D; Math.random() &gt; 0.05 ? MIN_NUMBER : 2 * MIN_NUMBER;</span><br><span class="line">	    &#x2F;&#x2F; 显示数字动画</span><br><span class="line">	    $(&quot;#cell-&quot; + i + &quot;-&quot; + j).css(&#123;</span><br><span class="line">	        &quot;background-color&quot;: getColorByNumber(board[i][j]),</span><br><span class="line">	        &quot;font-size&quot;: CELL_SIZE &#x2F; 2.5,</span><br><span class="line">	        &quot;line-height&quot;: CELL_SIZE + &#39;px&#39;</span><br><span class="line">	    &#125;);</span><br><span class="line">	    $(&quot;#cell-&quot; + i + &quot;-&quot; + j).text(board[i][j]);</span><br><span class="line">	    $(&quot;#cell-&quot; + i + &quot;-&quot; + j).animate(&#123;</span><br><span class="line">	        width: CELL_SIZE,</span><br><span class="line">	        height: CELL_SIZE,</span><br><span class="line">	        left: getCellLeft(i, j),</span><br><span class="line">	        top: getCellTop(i, j),</span><br><span class="line">	    &#125;);</span><br><span class="line">	    break;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;移动方块动画</span><br><span class="line">function cellMoveAnimation(i, j, toi, toj)</span><br><span class="line">&#123;</span><br><span class="line">	$(&#39;#cell-&#39; + i + &#39;-&#39; + j).animate(&#123;</span><br><span class="line">	 	top: getCellTop(toi, toj),</span><br><span class="line">	 	left: getCellLeft(toi, toj)</span><br><span class="line">	&#125;, MOVE_ANIMATION_TIME)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;更新游戏视图</span><br><span class="line">function updateGameView()</span><br><span class="line">&#123;</span><br><span class="line">	&#x2F;&#x2F;清除旧的游戏视图</span><br><span class="line">	$(&quot;.cell&quot;).remove();</span><br><span class="line">	for(let i &#x3D; 0; i &lt; ROW; i++)&#123;</span><br><span class="line">		for(let j &#x3D; 0; j &lt; COL; j++)&#123;</span><br><span class="line">		    $(&quot;#game&quot;).append(&#39;&lt;div class&#x3D;&quot;cell&quot; id&#x3D;&quot;cell-&#39; + i + &#39;-&#39; + j +&#39;&quot;&gt;&lt;&#x2F;div&gt;&#39;);</span><br><span class="line">		    &#x2F;&#x2F;判断此处是否为0</span><br><span class="line">		    if (board[i][j] &#x3D;&#x3D; 0) &#123;</span><br><span class="line">		        $(&quot;#cell-&quot; + i + &quot;-&quot; + j).css(&#123;</span><br><span class="line">		            &quot;width&quot;: 0,</span><br><span class="line">		            &quot;height&quot;: 0,</span><br><span class="line">		            &quot;top&quot;: getCellTop(i, j) + CELL_SIZE &#x2F; 2,</span><br><span class="line">		            &quot;left&quot;: getCellLeft(i, j) + CELL_SIZE &#x2F; 2</span><br><span class="line">		        &#125;);</span><br><span class="line">		    &#125; else &#123;</span><br><span class="line">		        &#x2F;*</span><br><span class="line">		        $(&quot;#cell-&quot; + i + &quot;-&quot; + j).css(&#123;</span><br><span class="line">		            &quot;width&quot;: CELL_SIZE,</span><br><span class="line">		            &quot;height&quot;: CELL_SIZE,</span><br><span class="line">		            &quot;top&quot;: getCellTop(i, j),</span><br><span class="line">		            &quot;left&quot;: getCellLeft(i, j),</span><br><span class="line">		            &quot;font-size&quot;: CELL_SIZE &#x2F; 2.5,</span><br><span class="line">		            &quot;line-height&quot;: CELL_SIZE,</span><br><span class="line">		            &quot;background-color&quot;: getColorByNumber(board[i][j])</span><br><span class="line">		        &#125;);</span><br><span class="line">		        $(&quot;#cell-&quot; + i + &quot;-&quot; + j).text(board[i][j]);</span><br><span class="line">		        *&#x2F;</span><br><span class="line">		</span><br><span class="line">		        $(&#39;#cell-&#39; + i + &#39;-&#39; + j).css(&#39;width&#39;, CELL_SIZE);</span><br><span class="line">		        $(&#39;#cell-&#39; + i + &#39;-&#39; + j).css(&#39;height&#39;, CELL_SIZE);</span><br><span class="line">		        $(&#39;#cell-&#39; + i + &#39;-&#39; + j).css(&#39;top&#39;, getCellTop(i, j));</span><br><span class="line">		        $(&#39;#cell-&#39; + i + &#39;-&#39; + j).css(&#39;left&#39;, getCellLeft(i, j));</span><br><span class="line">		        $(&#39;#cell-&#39; + i + &#39;-&#39; + j).css(&#39;font-size&#39;, CELL_SIZE &#x2F; 2.5);</span><br><span class="line">		        $(&#39;#cell-&#39; + i + &#39;-&#39; + j).css(&#39;line-height&#39;, CELL_SIZE + &#39;px&#39;);</span><br><span class="line">		        $(&#39;#cell-&#39; + i + &#39;-&#39; + j).css(&#39;background-color&#39;, getColorByNumber(board[i][j]));</span><br><span class="line">		        $(&#39;#cell-&#39; + i + &#39;-&#39; + j).text(board[i][j]);</span><br><span class="line">		    &#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;初始化数组和游戏界面</span><br><span class="line">function init()</span><br><span class="line">&#123;</span><br><span class="line">	$(&quot;#game&quot;).css(&#123;</span><br><span class="line">		&quot;width&quot;: COL * (CELL_SIZE + MARGIN) + MARGIN,</span><br><span class="line">		&quot;height&quot;: ROW * (CELL_SIZE + MARGIN) + MARGIN</span><br><span class="line">	&#125;);</span><br><span class="line">	&#x2F;&#x2F;初始化数组</span><br><span class="line">	for(let i &#x3D; 0; i &lt; ROW; i++)&#123;</span><br><span class="line">		board[i] &#x3D; new Array();</span><br><span class="line">		for(let j &#x3D; 0; j &lt; COL; j++)&#123;</span><br><span class="line">		    board[i][j] &#x3D; 0;</span><br><span class="line">		    $(&quot;#game&quot;).append(&#39;&lt;div class&#x3D;&quot;default-cell&quot; id&#x3D;&quot;default-&#39; + i + &#39;-&#39; + j + &#39;&quot;&gt;&lt;&#x2F;div&gt;&#39;);</span><br><span class="line">		    $(&quot;#default-&quot; + i + &quot;-&quot; + j).css(&#123;</span><br><span class="line">		        &quot;width&quot;: CELL_SIZE,</span><br><span class="line">		        &quot;height&quot;: CELL_SIZE,</span><br><span class="line">		        &quot;top&quot;: getCellTop(i, j),</span><br><span class="line">		        &quot;left&quot;: getCellLeft(i, j)</span><br><span class="line">		    &#125;);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;获取方块到上方的距离</span><br><span class="line">function getCellTop(i, j)</span><br><span class="line">&#123;</span><br><span class="line">	return i * (CELL_SIZE + MARGIN) + MARGIN;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;获取方块到左边的距离</span><br><span class="line">function getCellLeft(i, j)</span><br><span class="line">&#123;</span><br><span class="line">	return j * (CELL_SIZE + MARGIN) + MARGIN;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;设置每个不同数字的方块颜色</span><br><span class="line">function getColorByNumber(number) &#123;</span><br><span class="line">	switch (number) &#123;</span><br><span class="line">		case 2: return &quot;#eee4da&quot;; break;</span><br><span class="line">		case 4: return &quot;#ede0c8&quot;; break;</span><br><span class="line">		case 8: return &quot;#f2b179&quot;; break;</span><br><span class="line">		case 16: return &quot;#f59563&quot;; break;</span><br><span class="line">		case 32: return &quot;#f67c5f&quot;; break;</span><br><span class="line">		case 64: return &quot;#f65e3b&quot;; break;</span><br><span class="line">		case 128: return &quot;#edcf72&quot;; break;</span><br><span class="line">		case 256: return &quot;#edcc61&quot;; break;</span><br><span class="line">		case 512: return &quot;#9c0&quot;; break;</span><br><span class="line">		case 1024: return &quot;#33b5e5&quot;; break;</span><br><span class="line">		case 2048: return &quot;#09c&quot;; break;</span><br><span class="line">		case 4096: return &quot;#a6c&quot;; break;</span><br><span class="line">		case 8192: return &quot;#93c&quot;; break;</span><br><span class="line">		default: return &#39;break&#39;;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p></li>
</ul>
<hr />
<h2 id="三c版本代码展示-1"><span id="3">三、C++版本代码展示</span></h2>
<ul>
<li><p>Game.h</p>
<p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">#pragma once</span><br><span class="line">constexpr int COL &#x3D; 4;</span><br><span class="line">constexpr int ROW &#x3D; 4;</span><br><span class="line">constexpr int GAME_OVER &#x3D; -1;</span><br><span class="line">constexpr int GAME_WIN &#x3D; 1;</span><br><span class="line">constexpr int GAME_CON &#x3D; 0;</span><br><span class="line"></span><br><span class="line">class Game</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">	Game();</span><br><span class="line">	~Game();</span><br><span class="line">	void moveUp();</span><br><span class="line">	void moveDown();</span><br><span class="line">	void moveLeft();</span><br><span class="line">	void moveRight();</span><br><span class="line">	bool check2048();</span><br><span class="line">	bool allCheck();</span><br><span class="line">	void newGrid();</span><br><span class="line">	void Print();</span><br><span class="line">	void Input();</span><br><span class="line">private:</span><br><span class="line">	int (*Grid)[ROW];</span><br><span class="line">	int game &#x3D; GAME_CON;</span><br><span class="line">	int ua[2], rl[2]; &#x2F;&#x2F;ua记录数值作比较， rl记录行数方便合并</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure></p></li>
<li><p>Game.cpp</p>
<p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br></pre></td><td class="code"><pre><span class="line">#include &quot;Game.h&quot;</span><br><span class="line">#include &lt;iostream&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">#include &lt;stdlib.h&gt;</span><br><span class="line">#include &lt;time.h&gt;</span><br><span class="line">#include &lt;conio.h&gt;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;can&#x3D;false --&gt; show()（无变化）--&gt;continue</span><br><span class="line">&#x2F;&#x2F;                                             allCheck()&#x3D;&#x3D;true&#x3D;&#x3D;over  --&gt;show() --&gt;over      </span><br><span class="line">&#x2F;&#x2F;move --&gt; check2084 --没到2084--&gt; newGrid --&gt; allCheck()&#x3D;&#x3D;false&#x3D;&#x3D;continue --&gt; show() --&gt;continue</span><br><span class="line">&#x2F;&#x2F;                   --到2084--&gt; game&#x3D;GAME_WIN --&gt; show() --&gt;win</span><br><span class="line"></span><br><span class="line">Game::Game()</span><br><span class="line">&#123;</span><br><span class="line">	Grid &#x3D; new int[ROW][COL];</span><br><span class="line">	for (int i &#x3D; 0; i &lt; ROW; i++)</span><br><span class="line">		for (int j &#x3D; 0; j &lt; COL; j++)</span><br><span class="line">			Grid[i][j] &#x3D; 0;</span><br><span class="line">	for(int i &#x3D; 0; i &lt; 2; i++)</span><br><span class="line">		newGrid();</span><br><span class="line">	Print();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Game::~Game()</span><br><span class="line">&#123;</span><br><span class="line">	delete[]Grid;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void Game::moveUp()</span><br><span class="line">&#123;</span><br><span class="line">	&#x2F;*合并注意事项</span><br><span class="line">	  1.不能合并的情况：堆在一起且无可合并的格子</span><br><span class="line">	  2.每次合并时合并相邻的两个，不可多合并*&#x2F;</span><br><span class="line">	bool can &#x3D; false;</span><br><span class="line"></span><br><span class="line">	&#x2F;* &#x2F;&#x2F;先移动</span><br><span class="line">	for (int col &#x3D; 0; col &lt; col; col++)</span><br><span class="line">		for (int row &#x3D; 1; row &lt; row; row++)</span><br><span class="line">			if (grid[row][col] !&#x3D; 0)</span><br><span class="line">				for (int i &#x3D; 0; i &lt; row; i++)</span><br><span class="line">					if (!grid[i][col]) &#123;</span><br><span class="line">						grid[i][col] &#x3D; grid[row][col];</span><br><span class="line">						grid[row][col] &#x3D; 0;</span><br><span class="line">						can &#x3D; true;</span><br><span class="line">						break;</span><br><span class="line">					&#125;</span><br><span class="line"></span><br><span class="line">	&#x2F;&#x2F;再合并</span><br><span class="line">	for (int col &#x3D; 0; col &lt; col; col++)</span><br><span class="line">		for (int row &#x3D; 0; row &lt; row - 1; row++)</span><br><span class="line">			if (grid[row][col] &#x3D;&#x3D; grid[row + 1][col]) &#123;</span><br><span class="line">				grid[row][col] *&#x3D; 2;</span><br><span class="line">				grid[row + 1][col] &#x3D; 0;</span><br><span class="line">				can &#x3D; true;</span><br><span class="line">				for (int i &#x3D; row + 1; i &lt; row - 1; i++)</span><br><span class="line">					grid[i][col] &#x3D; grid[i + 1][col];</span><br><span class="line">				grid[row - 1][col] &#x3D; 0;</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">	&#x2F;&#x2F;若满足合并条件且游戏未结束，则新建格子</span><br><span class="line">	if (check() &amp;&amp; can)</span><br><span class="line">		newgrid();</span><br><span class="line">	*&#x2F;</span><br><span class="line">	&#x2F;&#x2F;先合并</span><br><span class="line">	for (int col &#x3D; 0; col &lt; COL; col++) &#123;</span><br><span class="line">		int num_ua &#x3D; 0;</span><br><span class="line">		int num_rl &#x3D; 0;</span><br><span class="line">		for (int row &#x3D; 0; row &lt; ROW; row++) &#123;</span><br><span class="line">			if (Grid[row][col] !&#x3D; 0) &#123;</span><br><span class="line">				ua[num_ua++] &#x3D; Grid[row][col];</span><br><span class="line">				rl[num_rl++] &#x3D; row;</span><br><span class="line">			&#125;</span><br><span class="line">			if (num_ua &#x3D;&#x3D; 2) &#123;</span><br><span class="line">				if (ua[0] &#x3D;&#x3D; ua[1]) &#123;</span><br><span class="line">					Grid[rl[0]][col] &#x3D; ua[0] * 2;</span><br><span class="line">					Grid[rl[1]][col] &#x3D; 0;</span><br><span class="line">					can &#x3D; true;</span><br><span class="line">				&#125;</span><br><span class="line">				else &#123;</span><br><span class="line">					num_ua--;</span><br><span class="line">					num_rl--;</span><br><span class="line">					ua[num_ua - 1] &#x3D; ua[num_ua];</span><br><span class="line">					rl[num_rl - 1] &#x3D; rl[num_rl];</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">				</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	&#x2F;&#x2F;再移动</span><br><span class="line">	for (int col &#x3D; 0; col &lt; COL; col++)</span><br><span class="line">		for (int row &#x3D; 1; row &lt; ROW; row++)</span><br><span class="line">			if (Grid[row][col] !&#x3D; 0)</span><br><span class="line">				for (int i &#x3D; 0; i &lt; row; i++)</span><br><span class="line">					if (Grid[i][col] &#x3D;&#x3D; 0) &#123;</span><br><span class="line">						Grid[i][col] &#x3D; Grid[row][col];</span><br><span class="line">						Grid[row][col] &#x3D; 0;</span><br><span class="line">						can &#x3D; true;</span><br><span class="line">						break;</span><br><span class="line">					&#125;</span><br><span class="line"></span><br><span class="line">	&#x2F;&#x2F;若满足合并条件且游戏未结束，则新建格子</span><br><span class="line">	if (!check2048() &amp;&amp; can)</span><br><span class="line">		newGrid();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void Game::moveDown()</span><br><span class="line">&#123;</span><br><span class="line">	bool can &#x3D; false;</span><br><span class="line"></span><br><span class="line">	&#x2F;&#x2F;先合并</span><br><span class="line">	for (int col &#x3D; 0; col &lt; COL; col++) &#123;</span><br><span class="line">		int num_ua &#x3D; 0;</span><br><span class="line">		int num_rl &#x3D; 0;</span><br><span class="line">		for (int row &#x3D; ROW - 1; row &gt;&#x3D; 0; row--) &#123;</span><br><span class="line">			if (Grid[row][col] !&#x3D; 0) &#123;</span><br><span class="line">				ua[num_ua++] &#x3D; Grid[row][col];</span><br><span class="line">				rl[num_rl++] &#x3D; row;</span><br><span class="line">			&#125;</span><br><span class="line">			if (num_ua &#x3D;&#x3D; 2) &#123;</span><br><span class="line">				if (ua[0] &#x3D;&#x3D; ua[1]) &#123;</span><br><span class="line">					Grid[rl[0]][col] &#x3D; ua[0] * 2;</span><br><span class="line">					Grid[rl[1]][col] &#x3D; 0;</span><br><span class="line">					can &#x3D; true;</span><br><span class="line">				&#125;</span><br><span class="line">				else &#123;</span><br><span class="line">					num_ua--;</span><br><span class="line">					num_rl--;</span><br><span class="line">					ua[num_ua - 1] &#x3D; ua[num_ua];</span><br><span class="line">					rl[num_rl - 1] &#x3D; rl[num_rl];</span><br><span class="line">				&#125;</span><br><span class="line">				</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	&#x2F;&#x2F;再移动</span><br><span class="line">	for(int col &#x3D; 0; col &lt; COL; col++)</span><br><span class="line">		for(int row &#x3D; ROW - 2; row &gt;&#x3D; 0; row--)</span><br><span class="line">			if(Grid[row][col] !&#x3D; 0)</span><br><span class="line">				for (int i &#x3D; ROW - 1; i &gt; row; i--)</span><br><span class="line">					if (Grid[i][col] &#x3D;&#x3D; 0) &#123;</span><br><span class="line">						Grid[i][col] &#x3D; Grid[row][col];</span><br><span class="line">						Grid[row][col] &#x3D; 0;</span><br><span class="line">						can &#x3D; true;</span><br><span class="line">						break;</span><br><span class="line">					&#125;</span><br><span class="line">	</span><br><span class="line">	if (!check2048() &amp;&amp; can)</span><br><span class="line">		newGrid();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void Game::moveLeft()</span><br><span class="line">&#123;</span><br><span class="line">	bool can &#x3D; false;</span><br><span class="line"></span><br><span class="line">	&#x2F;&#x2F;先合并</span><br><span class="line">	for (int row &#x3D; 0; row &lt; ROW; row++) &#123;</span><br><span class="line">		int temp &#x3D; 0;</span><br><span class="line">		int c1;</span><br><span class="line">		for (int col &#x3D; 0; col &lt; COL; col++)</span><br><span class="line">			if (Grid[row][col])</span><br><span class="line">				if (temp !&#x3D; Grid[row][col]) &#123;</span><br><span class="line">					temp &#x3D; Grid[row][col];</span><br><span class="line">					c1 &#x3D; col;</span><br><span class="line">				&#125;</span><br><span class="line">				else &#123;</span><br><span class="line">					Grid[row][c1] &#x3D; temp * 2;</span><br><span class="line">					Grid[row][col] &#x3D; 0;</span><br><span class="line">					can &#x3D; true;</span><br><span class="line">					temp &#x3D; 0;</span><br><span class="line">				&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	&#x2F;&#x2F;再移动</span><br><span class="line">	for(int row &#x3D; 0; row &lt; ROW; row++)</span><br><span class="line">		for(int col &#x3D; 1; col &lt; COL; col++)</span><br><span class="line">			if(Grid[row][col])</span><br><span class="line">				for(int i &#x3D; 0; i &lt; col; i++)</span><br><span class="line">					if (Grid[row][i] &#x3D;&#x3D; 0) &#123;</span><br><span class="line">						Grid[row][i] &#x3D; Grid[row][col];</span><br><span class="line">						Grid[row][col] &#x3D; 0;</span><br><span class="line">						can &#x3D; true;</span><br><span class="line">						break;</span><br><span class="line">					&#125;</span><br><span class="line"></span><br><span class="line">	if (!check2048() &amp;&amp; can)</span><br><span class="line">		newGrid();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void Game::moveRight()</span><br><span class="line">&#123;</span><br><span class="line">	bool can &#x3D; false;</span><br><span class="line"></span><br><span class="line">	&#x2F;&#x2F;先合并</span><br><span class="line">	for (int row &#x3D; 0; row &lt; ROW; row++) &#123;</span><br><span class="line">		int temp &#x3D; 0;</span><br><span class="line">		int c1;</span><br><span class="line">		for(int col &#x3D; COL - 1; col &gt;&#x3D; 0; col--)</span><br><span class="line">			if (Grid[row][col])</span><br><span class="line">				if (Grid[row][col] !&#x3D; temp) &#123;</span><br><span class="line">					temp &#x3D; Grid[row][col];</span><br><span class="line">					c1 &#x3D; col;</span><br><span class="line">				&#125;</span><br><span class="line">				else &#123;</span><br><span class="line">					Grid[row][c1] &#x3D; temp * 2;</span><br><span class="line">					Grid[row][col] &#x3D; 0;</span><br><span class="line">					can &#x3D; true;</span><br><span class="line">					temp &#x3D; 0;</span><br><span class="line">				&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	&#x2F;&#x2F;再平移</span><br><span class="line">	for(int row &#x3D; 0; row &lt; ROW; row++)</span><br><span class="line">		for(int col &#x3D; COL - 2; col &gt;&#x3D; 0; col--)</span><br><span class="line">			if(Grid[row][col])</span><br><span class="line">				for(int i &#x3D; COL - 1; i &gt; col; i--)</span><br><span class="line">					if (Grid[row][i] &#x3D;&#x3D; 0) &#123;</span><br><span class="line">						Grid[row][i] &#x3D; Grid[row][col];</span><br><span class="line">						Grid[row][col] &#x3D; 0;</span><br><span class="line">						can &#x3D; true;</span><br><span class="line">						break;</span><br><span class="line">					&#125;</span><br><span class="line"></span><br><span class="line">	if (!check2048() &amp;&amp; can)</span><br><span class="line">		newGrid();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">bool Game::check2048()</span><br><span class="line">&#123;</span><br><span class="line">	int max &#x3D; 0;</span><br><span class="line">	for (int row &#x3D; 0; row &lt; ROW; row++)</span><br><span class="line">		for (int col &#x3D; 0; col &lt; COL; col++)</span><br><span class="line">			if (Grid[row][col] &gt; max)</span><br><span class="line">				max &#x3D; Grid[row][col];</span><br><span class="line">	if (max &#x3D;&#x3D; 2048) &#123;</span><br><span class="line">		game &#x3D; GAME_WIN;</span><br><span class="line">		return true;</span><br><span class="line">	&#125;</span><br><span class="line">	else &#123;</span><br><span class="line">		game &#x3D; GAME_CON;</span><br><span class="line">		return false;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">bool Game::allCheck()</span><br><span class="line">&#123;</span><br><span class="line">	&#x2F;&#x2F;有没有空格</span><br><span class="line">	for(int row &#x3D; 0; row &lt; ROW; row++)</span><br><span class="line">		for(int col &#x3D; 0; col &lt; COL; col++)</span><br><span class="line">			if (Grid[row][col] &#x3D;&#x3D; 0) &#123;</span><br><span class="line">				game &#x3D; GAME_CON;</span><br><span class="line">				return false;</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">	&#x2F;&#x2F;横向检查有没有相邻可合并的格子</span><br><span class="line">	for(int row &#x3D; 0; row &lt; ROW; row++)</span><br><span class="line">		for(int col &#x3D; 0; col &lt; COL - 1; col++)</span><br><span class="line">			if (Grid[row][col] &#x3D;&#x3D; Grid[row][col + 1]) &#123;</span><br><span class="line">				game &#x3D; GAME_CON;</span><br><span class="line">				return false;</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">	&#x2F;&#x2F;纵向检查有没有相邻可合并的格子</span><br><span class="line">	for(int row &#x3D; 0; row &lt; ROW - 1; row++)</span><br><span class="line">		for(int col &#x3D; 0; col &lt; COL; col++)</span><br><span class="line">			if (Grid[row][col] &#x3D;&#x3D; Grid[row + 1][col]) &#123;</span><br><span class="line">				game &#x3D; GAME_CON;</span><br><span class="line">				return false;</span><br><span class="line">			&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void Game::newGrid()</span><br><span class="line">&#123;</span><br><span class="line">	srand(int(time(0)));</span><br><span class="line">	int num &#x3D; rand() % 20 &#x3D;&#x3D; 1 ? 4 : 2;</span><br><span class="line">	</span><br><span class="line">	int x, y;</span><br><span class="line">	do &#123;</span><br><span class="line">		x &#x3D; rand() % ROW;</span><br><span class="line">		y &#x3D; rand() % COL;</span><br><span class="line">	&#125; while (Grid[x][y] !&#x3D; 0);</span><br><span class="line">	Grid[x][y] &#x3D; num;</span><br><span class="line"></span><br><span class="line">	if (allCheck())</span><br><span class="line">		game &#x3D; GAME_OVER;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void Game::Input()</span><br><span class="line">&#123;</span><br><span class="line">	&#x2F;&#x2F;if (game &#x3D;&#x3D; GAME_OVER)</span><br><span class="line">	&#x2F;&#x2F;	return;</span><br><span class="line">	&#x2F;&#x2F;if (!_kbhit())</span><br><span class="line">	&#x2F;&#x2F;	return;</span><br><span class="line">	switch (_getch()) &#123;</span><br><span class="line">		case &#39;w&#39;:</span><br><span class="line">		case &#39;W&#39;:</span><br><span class="line">			moveUp();</span><br><span class="line">			break;</span><br><span class="line">	</span><br><span class="line">		case &#39;s&#39;:</span><br><span class="line">		case &#39;S&#39;:</span><br><span class="line">			moveDown();</span><br><span class="line">			break;</span><br><span class="line">	</span><br><span class="line">		case &#39;a&#39;:</span><br><span class="line">		case &#39;A&#39;:</span><br><span class="line">			moveLeft();</span><br><span class="line">			break;</span><br><span class="line">	</span><br><span class="line">		case &#39;d&#39;:</span><br><span class="line">		case &#39;D&#39;:</span><br><span class="line">			moveRight();</span><br><span class="line">			break;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void Game::Print()</span><br><span class="line">&#123;</span><br><span class="line">	</span><br><span class="line">	cout &lt;&lt; &quot;**********    2048 游 戏    **********&quot; &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; &quot;**************************************&quot; &lt;&lt; endl &lt;&lt; endl;</span><br><span class="line">	if (game &#x3D;&#x3D; GAME_WIN) &#123;</span><br><span class="line">		cout &lt;&lt; &quot;Congratulations!!   You Win!!&quot; &lt;&lt; endl;</span><br><span class="line">	&#125;</span><br><span class="line">	else if (game &#x3D;&#x3D; GAME_OVER) &#123;</span><br><span class="line">		cout &lt;&lt; &quot;What a pity... Do It Again!&quot; &lt;&lt; endl;</span><br><span class="line">	&#125;</span><br><span class="line">	else &#123;</span><br><span class="line">		for (int i &#x3D; 0; i &lt; ROW; ++i)&#123;</span><br><span class="line">			cout &lt;&lt; &quot;---------------------------------&quot; &lt;&lt; endl;</span><br><span class="line">			for (int j &#x3D; 0; j &lt; COL; ++j)&#123;</span><br><span class="line">				if (Grid[i][j] &#x3D;&#x3D; 0)</span><br><span class="line">				&#123;</span><br><span class="line">					cout &lt;&lt; &quot;|   \t&quot;;</span><br><span class="line">				&#125;</span><br><span class="line">				else</span><br><span class="line">				&#123;</span><br><span class="line">					cout &lt;&lt; &quot;|   &quot; &lt;&lt; Grid[i][j] &lt;&lt; &quot;\t&quot;;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">			cout &lt;&lt; &quot;|&quot; &lt;&lt; endl;</span><br><span class="line">		&#125;</span><br><span class="line">		cout &lt;&lt; &quot;---------------------------------&quot; &lt;&lt; endl;</span><br><span class="line">		return;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p></li>
<li><p>main.cpp</p>
<p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">#include &quot;Game.h&quot;</span><br><span class="line">#include &lt;Windows.h&gt;</span><br><span class="line"></span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">	Game g;</span><br><span class="line">	int i &#x3D; 1;</span><br><span class="line">	while (true) &#123;</span><br><span class="line">		g.Input();</span><br><span class="line">		system(&quot;cls&quot;);</span><br><span class="line">		g.Print();</span><br><span class="line">		Sleep(30);</span><br><span class="line">	&#125;</span><br><span class="line">	return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p></li>
</ul>

      
    </div>

    
	
	

	
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2019/09/03/JS%E5%AD%A6%E4%B9%A0%E7%9F%A5%E8%AF%86%E6%80%BB%E7%BB%93/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Olivia">
      <meta itemprop="description" content="May All Your Troubles Be little Ones">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Olivia的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/09/03/JS%E5%AD%A6%E4%B9%A0%E7%9F%A5%E8%AF%86%E6%80%BB%E7%BB%93/" class="post-title-link" itemprop="url">JS基础知识总结</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-09-03 20:50:03" itemprop="dateCreated datePublished" datetime="2019-09-03T20:50:03+08:00">2019-09-03</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-05-01 14:37:06" itemprop="dateModified" datetime="2021-05-01T14:37:06+08:00">2021-05-01</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/JavaScript/" itemprop="url" rel="index"><span itemprop="name">JavaScript</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>29k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>26 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <span id="more"></span>
<p><font size=3 face= "微软雅黑" color="darkred"> 　　早就想学习JS了，正好又有课设要做，就学习了JS，但是看着网课学习的东西我觉得并不是很全面，但是基本的学到了，还需要继续深入学习，所以就把学习到的JS先整理下来，后期会慢慢整理学到的 HTML5 和 CSS。</font></p>
<blockquote>
<h2 id="目录"><em>目录</em></h2>
<h3 id="一js实现变量"><em><a href="#1">一、JS实现、变量</a></em></h3>
<h3 id="二js异常捕获事件"><em><a href="#2">二、JS异常捕获、事件</a></em></h3>
<h3 id="三dom操作htmlcsseventlistener"><em><a href="#3">三、DOM操作HTML、CSS、EventListener</a></em></h3>
<h3 id="四js事件详解事件流事件处理事件对象"><em><a href="#4">四、JS事件详解、事件流、事件处理、事件对象</a></em></h3>
<h3 id="五事件对象"><em><a href="#5">五、事件对象</a></em></h3>
<ul>
<li><em><a href="#5.1">对象</a></em></li>
<li><em><a href="#5.2">string对象</a></em></li>
<li><em><a href="#5.3">data日期对象</a></em></li>
<li><em><a href="#5.4">Array数组对象</a></em></li>
<li><em><a href="#5.5">Math对象</a></em></li>
</ul>
</blockquote>
<blockquote>
<h3 id="六dom对象控制html"><em><a href="#6">六、DOM对象控制HTML</a></em></h3>
<h3 id="七js浏览器对象"><em><a href="#7">七、JS浏览器对象</a></em></h3>
<ul>
<li><em><a href="#7.1">Window对象</a></em></li>
<li><em><a href="#7.2">计时器对象</a></em></li>
<li><em><a href="#7.3">History对象</a></em></li>
<li><em><a href="#7.4">Location对象</a></em></li>
<li><em><a href="#7.5">screen对象</a></em></li>
</ul>
</blockquote>
<blockquote>
<h3 id="八面向对象"><em><a href="#8">八、面向对象</a></em></h3>
<h3 id="九后记"><em><a href="#9">九、后记</a></em></h3>
</blockquote>
<hr />
<h2 id="一js实现变量-1"><span id="1">一、JS实现、变量</span></h2>
<h3 id="js实现">1. JS实现</h3>
<ul>
<li><p>JS用法</p>
<blockquote>
<p>HTML中的脚本必须位于<code>&lt;script&gt;&lt;/script&gt;</code>标签之间<br />
脚本可被放置在HTML页面中<code>&lt;body&gt;&lt;/body&gt;</code>和<code>&lt;head&gt;</code>部分中</p>
</blockquote></li>
<li><p>JS标签</p>
<blockquote>
<p>在HTML中插入JS，使用<code>&lt;script&gt;</code>标签<br />
在<code>&lt;script&gt;&lt;/script&gt;</code>中书写代码</p>
</blockquote></li>
<li><p>JS使用限制</p>
<blockquote>
<p>在HTML中，不限制脚本数量<br />
通常把脚本放置于<code>&lt;head&gt;</code>标签中，以免干扰页面内容</p>
</blockquote></li>
</ul>
<h3 id="js变量">2. JS变量</h3>
<ul>
<li><blockquote>
<p>用var来声明，例var i = 10; 后面讲解 var 和 let 区别</p>
</blockquote></li>
<li><p>数据类型</p>
<ol type="1">
<li>字符串（string）</li>
<li>数字(number)</li>
<li>布尔值(boolean)</li>
<li>数组(Array) <br> &gt;声明数组的方法<br />
&gt;（1）var arr[1, 3, 2, 4];<br />
&gt;（2）var arr = new Array("miao", "wong");<br />
&gt;（3）var arr = new Array; arr[0] = 10; arr[1] = 20; .....</li>
<li>对象(Object)</li>
<li>空(null)</li>
<li>未定义</li>
<li>可通过赋值为null的方式消除变量</li>
</ol></li>
<li><p>var 和 let 区别</p>
<ol type="1">
<li><p>全局变量：</p>
<blockquote>
<p>在函数外声明的变量，在JavaScript程序的任何地方都可以访问。</p>
</blockquote></li>
<li><p>局部变量：</p>
<blockquote>
<p>在函数内声明的变量的作用域是局部的，函数内使用 var 声明的变量只能在函数内部访问，如果不使用 var 则是全局变量</p>
</blockquote></li>
<li><p>块级作用域：</p>
<blockquote>
<p>使用 var 关键字声明的变量不具备块级作用域的特性，它在 {} 外依然能被访问到。</p>
</blockquote></li>
<li><p>重新定义变量</p>
<blockquote>
<p>var：在块中重新声明变量，也会重新声明变量块外的变量<br />
let：let命令只在所在的代码块 {} 内有效</p>
</blockquote></li>
<li><p>var 和 let 局部变量</p>
<blockquote>
<p>在函数体内声明的变量 var 和 let 的作用域都是局部的</p>
</blockquote></li>
<li><p>var 和 let 全局变量</p>
<blockquote>
<p>在 函数体外 或 代码块外 使用 var 和 let 关键字声明的变量的作用域是全局的。</p>
</blockquote></li>
<li><p>HTML代码中使用全局变量</p>
<blockquote>
<ol type="1">
<li>在JavaScript中，全局作用域是针对JavaScript环境。<br />
</li>
<li>在HTML中，全局作用域是针对window对象<br />
</li>
<li>使用 var 关键字的全局作用域是属于window对象。var i = 10; 可以使用 window.i 访问变量。<br />
</li>
<li>使用let关键字声明的全局作用域变量不属于window对象。</li>
</ol>
</blockquote></li>
<li><p>重置变量</p>
<blockquote>
<ol type="1">
<li>在相同的作用域或块级作用域中，不能使用 let 关键字来重置 var 关键字声明的变量。<br />
</li>
<li>在相同的作用域或块级作用域中，不能使用 let 关键字来重置 let 关键字声明的变量。<br />
</li>
<li>在相同的作用域或块级作用域中，不能使用 var 关键字来重置 let 关键字声明的变量。<br />
</li>
<li>let 关键字在不同作用域，或不同块级作用域中是可以重新声明赋值的。</li>
</ol>
</blockquote></li>
<li><p>变量提升</p>
<blockquote>
<p>var：定义的变量可以在使用后声明，也就是变量可以先使用再声明。<br />
let：定义的变量则不可以在使用后声明，也就是变量需要先声明再使用。</p>
</blockquote></li>
</ol></li>
<li><p>this指针</p>
<blockquote>
<p>在方法中，this表示该方法所属的对象。 如果单独使用，this表示全局对象。 在函数中，this表示全局对象。 在函数中，在严格模式下，this是未定义的（undefined）。 在事件中，this表示接收事件的元素 类似 call() 和 apply() 方法可以将this引用到任何对象 （<em>详情见菜鸟教程</em>）</p>
</blockquote></li>
</ul>
<hr />
<h2 id="二js异常捕获事件-1"><span id="2">二、JS异常捕获、事件</span></h2>
<h3 id="js异常捕获">1. JS异常捕获</h3>
<ul>
<li><p>try 和 catch</p>
<blockquote>
<p>try：在执行时进行错误，需要测试的代码块<br />
catch：当try代码块发生错误时所执行的代码<br />
try 和 catch 是成对出现的</p>
</blockquote>
<p>1.语法 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">try&#123;</span><br><span class="line">	...  &#x2F;&#x2F;异常的抛出</span><br><span class="line">&#125; catch(err)&#123;</span><br><span class="line">	...  &#x2F;&#x2F;异常的捕获与处理</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> 2.实例 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">	&lt;head&gt;</span><br><span class="line">		&lt;meta charset&#x3D;&quot;UTF-8&quot;&gt;</span><br><span class="line">		&lt;title&gt;JS异常捕获&lt;&#x2F;title&gt;</span><br><span class="line">	&lt;&#x2F;head&gt;</span><br><span class="line">	&lt;body&gt;</span><br><span class="line">		&lt;button onclick&#x3D;&quot;demo()&quot;&gt;按钮&lt;&#x2F;button&gt;</span><br><span class="line">		&lt;script&gt;</span><br><span class="line">			function demo()&#123;</span><br><span class="line">				try&#123;</span><br><span class="line">					adddlert(&quot;hello&quot;);</span><br><span class="line">				&#125; catch(err)&#123;</span><br><span class="line">					alert(err);</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&lt;&#x2F;script&gt;</span><br><span class="line">	&lt;&#x2F;body&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure></p></li>
<li><p>throw语句</p>
<blockquote>
<p>允许创建自定义错误 可以把 throw 与 try 和 catch 一起使用</p>
</blockquote>
<ol type="1">
<li>实例</li>
</ol>
<p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang&#x3D;&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">  		&lt;meta charset&#x3D;&quot;UTF-8&quot;&gt;</span><br><span class="line">  		&lt;title&gt;JS异常捕获&lt;&#x2F;title&gt;</span><br><span class="line">&lt;&#x2F;head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">  		&lt;form&gt;</span><br><span class="line">      		&lt;input id&#x3D;&quot;txt&quot; type&#x3D;&quot;text&quot;&gt;</span><br><span class="line">      		&lt;input id&#x3D;&quot;btn&quot; type&#x3D;&quot;button&quot; onclick&#x3D;&quot;demo()&quot; value&#x3D;&quot;按钮&quot;&gt;</span><br><span class="line">  		&lt;&#x2F;form&gt;</span><br><span class="line">  		&lt;script&gt;</span><br><span class="line">      		function demo()&#123;</span><br><span class="line">          		try&#123;</span><br><span class="line">              		var e &#x3D; document.getElementById(&quot;txt&quot;).value;</span><br><span class="line">              		if(e&#x3D;&#x3D;&quot;&quot;)&#123;</span><br><span class="line">                  		throw&quot;请输入&quot;;</span><br><span class="line">              		&#125;</span><br><span class="line">          		&#125;catch(err)&#123;</span><br><span class="line">              		alert(err);  &#x2F;&#x2F;将throw中的内容扔到err处</span><br><span class="line">          		&#125;</span><br><span class="line">      		&#125;</span><br><span class="line">  		&lt;&#x2F;script&gt;</span><br><span class="line">&lt;&#x2F;body&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure></p></li>
</ul>
<h3 id="js事件">2. JS事件</h3>
<ul>
<li>经常用到的事件</li>
</ul>
<table>
<thead>
<tr class="header">
<th style="text-align: center;">事件（都是小写）</th>
<th style="text-align: center;">作用</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">onClick</td>
<td style="text-align: center;">单击事件</td>
</tr>
<tr class="even">
<td style="text-align: center;">onMouseOver</td>
<td style="text-align: center;">鼠标经过事件</td>
</tr>
<tr class="odd">
<td style="text-align: center;">onMouseOut</td>
<td style="text-align: center;">鼠标移出事件</td>
</tr>
<tr class="even">
<td style="text-align: center;">onChange</td>
<td style="text-align: center;">文本内容改变事件</td>
</tr>
<tr class="odd">
<td style="text-align: center;">onSelect</td>
<td style="text-align: center;">文本框选中事件</td>
</tr>
<tr class="even">
<td style="text-align: center;">onFocus</td>
<td style="text-align: center;">光标聚集事件</td>
</tr>
<tr class="odd">
<td style="text-align: center;">onBlur</td>
<td style="text-align: center;">移开光标事件</td>
</tr>
<tr class="even">
<td style="text-align: center;">onLoad</td>
<td style="text-align: center;">网页加载事件</td>
</tr>
<tr class="odd">
<td style="text-align: center;">onUnLoad</td>
<td style="text-align: center;">网页关闭事件</td>
</tr>
</tbody>
</table>
<ul>
<li>实例 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang&#x3D;&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset&#x3D;&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;JS事件&lt;&#x2F;title&gt;</span><br><span class="line">&lt;&#x2F;head&gt;</span><br><span class="line">&lt;body onload&#x3D;&quot;mgs()&quot;&gt;</span><br><span class="line">    &lt;!--onclick--&gt;</span><br><span class="line">    &lt;button onclick&#x3D;&quot;demo()&quot;&gt;按钮&lt;&#x2F;button&gt;</span><br><span class="line">    &lt;script&gt;</span><br><span class="line">        function demo()&#123;</span><br><span class="line">            alert(&quot;hello&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;&#x2F;script&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!--onMouseOver  onMouseOut--&gt;</span><br><span class="line">    &lt;div style&#x3D;&quot;width: 100px; height: 100px; background-color: cadetblue;&quot;</span><br><span class="line">         onmouseover&#x3D;&quot;onOver(this)&quot; onmouseout&#x3D;&quot;onOut(this)&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class="line">    &lt;script&gt;</span><br><span class="line">        function onOver(ooj)&#123;</span><br><span class="line">            ooj.innerHTML &#x3D; &quot;Hello&quot;;</span><br><span class="line">        &#125;</span><br><span class="line">        function onOut(ooj)&#123;</span><br><span class="line">            ooj.innerHTML &#x3D; &quot;World&quot;;</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;&#x2F;script&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!--onChange--&gt;</span><br><span class="line">    &lt;form&gt;</span><br><span class="line">        &lt;input type&#x3D;&quot;text&quot; onchange&#x3D;&quot;changeDemo1()&quot;&gt;</span><br><span class="line">    &lt;&#x2F;form&gt;</span><br><span class="line">    &lt;script&gt;</span><br><span class="line">        function changeDemo1()&#123;</span><br><span class="line">            alert(&quot;Hello, 内容改变了！&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;&#x2F;script&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!--onSelect  onfocus--&gt;</span><br><span class="line">    &lt;form&gt;</span><br><span class="line">        &lt;input type&#x3D;&quot;text&quot; onselect&#x3D;&quot;changeDemo(this)&quot; onfocus&#x3D;&quot;changeDemo2(this)&quot;&gt;</span><br><span class="line">    &lt;&#x2F;form&gt;</span><br><span class="line">    &lt;script&gt;</span><br><span class="line">        function changeDemo(bg)&#123;</span><br><span class="line">            bg.style.background&#x3D;&quot;red&quot;;</span><br><span class="line">        &#125;</span><br><span class="line">        function changeDemo2(bg)&#123;</span><br><span class="line">            bg.style.background&#x3D;&quot;blue&quot;;</span><br><span class="line">        &#125;</span><br><span class="line">        function mgs()&#123;</span><br><span class="line">            alert(&quot;网页内容加载完毕&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;&#x2F;script&gt;</span><br><span class="line">&lt;&#x2F;body&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
<hr />
<h2 id="三dom操作htmlcsseventlistener-1"><span id="3">三、DOM操作HTML、CSS、EventListener</span></h2>
<h3 id="dom操作html">1. DOM操作HTML</h3>
<ul>
<li><p><strong>绝对不要在文档加载完成之后使用 <code>document.write()</code> 会覆盖整个文档</strong> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;meta charset&#x3D;&quot;utf-8&quot;&gt;</span><br><span class="line">	&lt;title&gt;覆盖文档&lt;&#x2F;title&gt;</span><br><span class="line">&lt;&#x2F;head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;script&gt;</span><br><span class="line">        document.write(&quot;首先输出&quot;);</span><br><span class="line">    &lt;&#x2F;script&gt;</span><br><span class="line">    &lt;p&gt;请点击这&lt;&#x2F;p&gt;</span><br><span class="line">    &lt;br&#x2F;&gt;</span><br><span class="line">    &lt;input type&#x3D;&quot;button&quot; onclick&#x3D;&quot;test()&quot; value&#x3D;&quot;调用函数&quot;&#x2F;&gt;</span><br><span class="line">    &lt;script&gt;</span><br><span class="line">        function test()&#123;</span><br><span class="line">        	document.write(&quot;覆盖输出:&quot;);  &#x2F;&#x2F;点击后 首先输出 则被覆盖</span><br><span class="line">            document.write(Date());</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;&#x2F;script&gt;</span><br><span class="line">&lt;&#x2F;body&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure></p></li>
<li><p>寻找元素</p>
<ol type="1">
<li>通过 <strong>id</strong> 找到HTML元素：<code>document.getElementById("")</code> 。</li>
<li>通过 <strong>标签名</strong> 找到HTML元素：<code>getElementsByTagName("")</code> 。</li>
</ol></li>
<li><p>改变HTML内容</p>
<blockquote>
<p>使用属性 innerHTML<br />
例：document.getElementById("").innerHTML = "" //""中跟具体内容，若是其他的，则不需""。</p>
</blockquote>
<p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset&#x3D;&quot;utf-8&quot;&gt;</span><br><span class="line">&lt;title&gt;改变HTML内容&lt;&#x2F;title&gt;</span><br><span class="line">&lt;&#x2F;head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">&lt;p id&#x3D;&quot;p1&quot;&gt;Hello World!&lt;&#x2F;p&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">document.getElementById(&quot;p1&quot;).innerHTML&#x3D;&quot;新文本!&quot;;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line">&lt;p&gt;以上段落通过脚本修改文本。&lt;&#x2F;p&gt;</span><br><span class="line"></span><br><span class="line">&lt;&#x2F;body&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure></p></li>
<li><p>改变HTML属性</p>
<blockquote>
<p>使用语法 document.getElementById("").attribute = 新属性值; 例：document.getElementById("id").href="www.baidu.com";</p>
</blockquote>
<p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang&#x3D;&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">   	&lt;meta charset&#x3D;&quot;UTF-8&quot;&gt;</span><br><span class="line">   	&lt;title&gt;JS操作HTML&lt;&#x2F;title&gt;</span><br><span class="line">&lt;&#x2F;head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">   	&lt;a id&#x3D;&quot;aid&quot; href&#x3D;&quot;http:&#x2F;&#x2F;www.baidu.com&quot;&gt;百度一下&lt;&#x2F;a&gt;</span><br><span class="line">   	&lt;button onclick&#x3D;&quot;demo()&quot;&gt;按钮&lt;&#x2F;button&gt;</span><br><span class="line">   	&lt;script&gt;</span><br><span class="line">       	function demo()&#123;</span><br><span class="line">           	document.getElementById(&quot;aid&quot;).href&#x3D;&quot;https:&#x2F;&#x2F;www.hao123.com&quot;;</span><br><span class="line">       	&#125;</span><br><span class="line">   	&lt;&#x2F;script&gt;</span><br><span class="line">&lt;&#x2F;body&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure></p></li>
</ul>
<h3 id="dom操作css">2. DOM操作CSS</h3>
<ul>
<li><p>语法</p>
<blockquote>
<p>document.getElementById("").style.property=新样式</p>
</blockquote></li>
<li><p>实例</p></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;meta charset&#x3D;&quot;utf-8&quot;&gt;</span><br><span class="line">	&lt;title&gt;DOM操作CSS&lt;&#x2F;title&gt;</span><br><span class="line">&lt;&#x2F;head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">	&lt;h1 id&#x3D;&quot;id1&quot;&gt;我的标题 1&lt;&#x2F;h1&gt;</span><br><span class="line">	&lt;button type&#x3D;&quot;button&quot; onclick&#x3D;&quot;document.getElementById(&#39;id1&#39;).style.color&#x3D;&#39;red&#39;&quot;&gt;</span><br><span class="line">	点我!&lt;&#x2F;button&gt;</span><br><span class="line">	</span><br><span class="line">&lt;&#x2F;body&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>
<h3 id="dom操作eventlistener">3. DOM操作EventListener</h3>
<ul>
<li><p>DOM EventListener 方法</p>
<blockquote>
<p>addEventListener() removeEventListener()</p>
</blockquote>
<ol type="1">
<li><p>addEventListener()</p>
<blockquote>
<p>向指定元素添加事件句柄，且不会覆盖整个文档 可以向一个元素添加多个事件句柄</p>
</blockquote></li>
<li><p>removeEventListener()</p>
<blockquote>
<p>移除方法添加的事件句柄</p>
</blockquote></li>
</ol></li>
<li><p><strong>addEventListener</strong></p>
<ol type="1">
<li><p>语法</p>
<blockquote>
<p>element.addEventListener(event, function, useCapture); 第一个参数是事件类型（如"click"或"mousedown"）。 第二个参数是事件触发后调用的函数。 第三个参数是个布尔值用于描述事件是冒泡（false）还是捕获（true），该参数是可选的。</p>
</blockquote></li>
<li><p><strong>注意！</strong></p>
<ul>
<li><strong>事件类型不要使用 "on" 前缀，例如，使用"click"，而不是"onclick"。</strong></li>
<li><strong>调用函数不加括号，例如调用 mydemo() 函数，应该直接写成 mydemo。</strong></li>
</ul></li>
</ol></li>
<li><p>实例 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang&#x3D;&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">   	&lt;meta charset&#x3D;&quot;UTF-8&quot;&gt;</span><br><span class="line">   	&lt;title&gt;JS操作Dom EventListener&lt;&#x2F;title&gt;</span><br><span class="line">&lt;&#x2F;head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">	&lt;button id&#x3D;&quot;btn&quot;&gt;按钮&lt;&#x2F;button&gt;</span><br><span class="line">	&lt;script&gt;</span><br><span class="line">   		document.getElementById(&quot;btn&quot;).addEventListener(&quot;click&quot;, function()&#123;</span><br><span class="line">       	alert(&quot;hello&quot;);</span><br><span class="line">   		&#125;);</span><br><span class="line">	&lt;&#x2F;script&gt;</span><br><span class="line"></span><br><span class="line">	&lt;button id&#x3D;&quot;btnn&quot;&gt;按钮&lt;&#x2F;button&gt;</span><br><span class="line">	&lt;script&gt;</span><br><span class="line">   		var x &#x3D; document.getElementById(&quot;btnn&quot;);</span><br><span class="line">   		x.addEventListener(&quot;click&quot;, hello);</span><br><span class="line">   		x.addEventListener(&quot;click&quot;, world);</span><br><span class="line"></span><br><span class="line">   		function hello()&#123;</span><br><span class="line">       		alert(&quot;Hello&quot;);</span><br><span class="line">   		&#125;</span><br><span class="line">   		function world()&#123;</span><br><span class="line">       		alert(&quot;World&quot;);</span><br><span class="line">   		&#125;</span><br><span class="line">	&lt;&#x2F;script&gt;</span><br><span class="line">&lt;&#x2F;body&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure></p></li>
</ul>
<hr />
<h2 id="四js事件详解事件流事件处理事件对象-1"><span id="4">四、JS事件详解、事件流、事件处理、事件对象</span></h2>
<h3 id="js事件详解">1. JS事件详解</h3>
<ul>
<li><p>事件流</p>
<blockquote>
<p>描述的是在页面中接受事件的顺序。</p>
</blockquote></li>
<li><p>事件冒泡</p>
<blockquote>
<p>由最具体的元素接收，然后逐级向上传播至最不具体的元素的节点（文档）。</p>
</blockquote></li>
<li><p>事件捕获</p>
<blockquote>
<p>最不具体的节点先接收事件，而最具体的节点应该是最后接收事件。</p>
</blockquote></li>
<li><p>实例</p>
<blockquote>
<p>将 p 元素插入到 div 元素中，用户点击 p 元素，观察哪个元素的 "click" 事件先被触发。</p>
<p>在 冒泡 中，p先 再div 在 捕获 中，div先 再p</p>
</blockquote></li>
</ul>
<h3 id="js事件处理">2. JS事件处理</h3>
<ul>
<li><p>HTML事件处理</p>
<blockquote>
<p>直接添加到HTML结构中（修改一处同时修改很多处）</p>
</blockquote></li>
<li><p>DOM 0级事件处理</p>
<blockquote>
<p>把一个函数赋值给一个 事件处理程序 属性（会被覆盖掉） 例 btn1.onclick = function(){}</p>
</blockquote></li>
<li><p>DOM 2级事件处理</p>
<blockquote>
<p>addEventListener() 和 removeEventListener</p>
</blockquote></li>
<li><p>IE事件处理程序（不同浏览器所支持的事件不同）</p>
<blockquote>
<p>attachEvent detachEvent</p>
</blockquote></li>
<li><p>实例 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">	&lt;!DOCTYPE html&gt;</span><br><span class="line">	&lt;html lang&#x3D;&quot;en&quot;&gt;</span><br><span class="line">	&lt;head&gt;</span><br><span class="line">    	&lt;meta charset&#x3D;&quot;UTF-8&quot;&gt;</span><br><span class="line">    	&lt;title&gt;JS事件处理&lt;&#x2F;title&gt;</span><br><span class="line">	&lt;&#x2F;head&gt;</span><br><span class="line">	&lt;body&gt;</span><br><span class="line">    	&lt;div id&#x3D;&quot;div&quot;&gt;</span><br><span class="line">        	&lt;button id&#x3D;&quot;btn&quot;&gt;按钮&lt;&#x2F;button&gt;</span><br><span class="line">    	&lt;&#x2F;div&gt;</span><br><span class="line">	</span><br><span class="line">    &lt;!--HTML事件处理--&gt;</span><br><span class="line">	&lt;!--    &lt;script&gt;--&gt;</span><br><span class="line">	&lt;!--        function demo()&#123;--&gt;</span><br><span class="line">	&lt;!--            alert(&quot;hello HTML事件处理&quot;);--&gt;</span><br><span class="line">	&lt;!--        &#125;--&gt;</span><br><span class="line">	&lt;!--    &lt;&#x2F;script&gt;--&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!--DOM 0级事件处理--&gt;</span><br><span class="line">	&lt;!--    &lt;script&gt;--&gt;</span><br><span class="line">	&lt;!--        var btn1 &#x3D; document.getElementById(&quot;btn&quot;);--&gt;</span><br><span class="line">	&lt;!--        btn1.onclick &#x3D; function()&#123; alert(&quot;Hello DOM 0级事件处理1&quot;);&#125;;&#x2F;&#x2F;会被覆盖--&gt;</span><br><span class="line">	&lt;!--        btn1.onclick &#x3D; function()&#123; alert(&quot;Hello DOM 0级事件处理2&quot;);&#125;;--&gt;</span><br><span class="line">	&lt;!--    &lt;&#x2F;script&gt;--&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!--DOM 2级事件处理--&gt;</span><br><span class="line">	&lt;!--    &lt;script&gt;--&gt;</span><br><span class="line">	&lt;!--        var btn1 &#x3D; document.getElementById(&quot;btn&quot;).addEventListener(&quot;click&quot;, demo);--&gt;</span><br><span class="line">	&lt;!--        function demo()&#123;--&gt;</span><br><span class="line">	&lt;!--            alert(&quot;DOM 2级事件处理程序&quot;);--&gt;</span><br><span class="line">	&lt;!--        &#125;--&gt;</span><br><span class="line">	&lt;!--    &lt;&#x2F;script&gt;--&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!--IE事件处理程序--&gt;</span><br><span class="line">    &lt;script&gt;</span><br><span class="line">        var btn1 &#x3D; document.getElementById(&quot;btn&quot;);</span><br><span class="line">        if(btn1.addEventListener)&#123;</span><br><span class="line">            btn1.addEventListener(&quot;click&quot;, demo);</span><br><span class="line">        &#125;else if(btn1.attachEvent)&#123;</span><br><span class="line">            btn1.attachEvent(&quot;onclick&quot;, demo);</span><br><span class="line">        &#125;else&#123;</span><br><span class="line">            btn1.onclick &#x3D; demo();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        function demo()&#123;</span><br><span class="line">            alert(&quot;Hello IE事件处理程序&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;&#x2F;script&gt;</span><br><span class="line">&lt;&#x2F;body&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure></p></li>
</ul>
<h3 id="js事件对象">3. JS事件对象</h3>
<ul>
<li><p>事件对象</p>
<blockquote>
<p>在触发DOM事件的时候都会产生一个对象</p>
</blockquote></li>
<li><p>事件对象event</p>
<ol type="1">
<li>type：获取事件类型</li>
<li>target：获取事件目标</li>
<li>stopPropagation()：阻止事件冒泡</li>
<li>preventDefault()：阻止事件默认行为</li>
</ol></li>
<li><p>实例 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang&#x3D;&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">   	&lt;meta charset&#x3D;&quot;UTF-8&quot;&gt;</span><br><span class="line">   	&lt;title&gt;JS事件对象&lt;&#x2F;title&gt;</span><br><span class="line">&lt;&#x2F;head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">   	&lt;div id&#x3D;&quot;div&quot;&gt;</span><br><span class="line">       	&lt;button id&#x3D;&quot;btn&quot;&gt;按钮&lt;&#x2F;button&gt;</span><br><span class="line">       	&lt;a href&#x3D;&quot;http:&#x2F;&#x2F;www.baidu.com&quot; id&#x3D;&quot;aid&quot;&gt;搜索&lt;&#x2F;a&gt;</span><br><span class="line">   	&lt;&#x2F;div&gt;</span><br><span class="line">   	&lt;script&gt;</span><br><span class="line">       	document.getElementById(&quot;aid&quot;).addEventListener(&quot;click&quot;, showA);</span><br><span class="line">       	document.getElementById(&quot;div&quot;).addEventListener(&quot;click&quot;, showDiv);</span><br><span class="line">       	document.getElementById(&quot;btn&quot;).addEventListener(&quot;click&quot;, showType);</span><br><span class="line">       	function showType(event)&#123;</span><br><span class="line">           	alert(event.type);  &#x2F;&#x2F;获取事件类型</span><br><span class="line">           	alert(event.target);  &#x2F;&#x2F;获取事件目标</span><br><span class="line">           	event.stopPropagation();</span><br><span class="line">       	&#125;</span><br><span class="line">       	function showDiv()&#123;</span><br><span class="line">           	alert(&quot;div&quot;);</span><br><span class="line">       	&#125;</span><br><span class="line">       	function showA(event)&#123;</span><br><span class="line">           	event.stopPropagation();</span><br><span class="line">           	event.preventDefault();</span><br><span class="line">       	&#125;</span><br><span class="line">   	&lt;&#x2F;script&gt;</span><br><span class="line">&lt;&#x2F;body&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure></p></li>
</ul>
<hr />
<h2 id="五事件对象-1"><span id="5">五、事件对象</span></h2>
<h3 id="js对象"><span id="5.1">1. JS对象</span></h3>
<ul>
<li><p>JS中的所有事物都是对象：字符串、数值、数组、函数。。</p></li>
<li><p>每个对象都带有属性和方法</p></li>
<li><p>JS允许自定义对象</p>
<blockquote>
<p>自定义并创建对象实例 使用函数来定义对象，然后创建新的对象实例</p>
</blockquote></li>
<li><p>具体详见后面 <strong><a href="#8">八、面向对象</a></strong></p></li>
</ul>
<h3 id="string对象"><span id="5.2">2. string对象</span></h3>
<ul>
<li><blockquote>
<p>string对象用于处理已有的字符串 字符串可以用单引号或双引号</p>
</blockquote></li>
<li>常用方法
<ol type="1">
<li><p>length属性来计算字符串长度</p>
<p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var txt&#x3D;&quot;ABCDEFGHIJKLMNOPQRSTUVWXYZ&quot;;</span><br><span class="line">document.write(txt.length);</span><br></pre></td></tr></table></figure></p></li>
<li><p>indexOf() 定位字符串中某一个指定字符串首次出现的位置 &gt;返回位置，从 0 开始。 &gt;若没有找到则返回 -1。 &gt;lastIndexOf() 在字符串末尾开始查找字符串出现的位置。</p>
<p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var str&#x3D;&quot;Hello world, welcome to the universe.&quot;;</span><br><span class="line">var n&#x3D;str.indexOf(&quot;welcome&quot;);</span><br><span class="line"></span><br></pre></td></tr></table></figure></p></li>
<li><p>match() 内容匹配</p>
<blockquote>
<p>查找字符串中特定的字符（串）。 找到的话，则返回这个字符。 若没有则返回 null。</p>
</blockquote>
<p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var str&#x3D;&quot;Hello world!&quot;;</span><br><span class="line">document.write(str.match(&quot;world&quot;) + &quot;&lt;br&gt;&quot;);</span><br><span class="line">document.write(str.match(&quot;World&quot;) + &quot;&lt;br&gt;&quot;);</span><br><span class="line">document.write(str.match(&quot;world!&quot;));</span><br></pre></td></tr></table></figure></p></li>
<li><p>replace() 替换内容</p>
<blockquote>
<p>在字符串中用某些字符替换另一些字符。 replace(" ", " ")，后面替换前面</p>
</blockquote>
<p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">str&#x3D;&quot;Please visit Microsoft!&quot;</span><br><span class="line">var n&#x3D;str.replace(&quot;Microsoft&quot;,&quot;Runoob&quot;);</span><br></pre></td></tr></table></figure></p></li>
<li><p>toUpperCase() / toLowerCase 字符大小写转换</p>
<blockquote>
<p>toUpperCase()：转换为大写 toLowerCase()：转换为小写</p>
</blockquote>
<p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var txt&#x3D;&quot;Hello World!&quot;;       &#x2F;&#x2F; String</span><br><span class="line">var txt1&#x3D;txt.toUpperCase();   &#x2F;&#x2F; txt1 文本会转换为大写</span><br><span class="line">var txt2&#x3D;txt.toLowerCase();   &#x2F;&#x2F; txt2 文本会转换为小写</span><br><span class="line"></span><br></pre></td></tr></table></figure></p></li>
<li><p>split() 字符串转换为数组</p>
<p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var txt&#x3D;&quot;a,b,c,d,e&quot;   &#x2F;&#x2F; String</span><br><span class="line">txt.split(&quot;,&quot;);   &#x2F;&#x2F; 使用逗号分隔</span><br><span class="line">txt.split(&quot; &quot;);   &#x2F;&#x2F; 使用空格分隔</span><br><span class="line">txt.split(&quot;|&quot;);   &#x2F;&#x2F; 使用竖线分隔 </span><br></pre></td></tr></table></figure></p></li>
</ol></li>
</ul>
<h3 id="data日期对象"><span id="5.3">3. data日期对象</span></h3>
<ul>
<li><p>Date对象</p>
<ol type="1">
<li>日期对象用于处理日期和时间 &gt;var date = Date(); &gt;document.write(date); &gt;即可获得当前时间</li>
</ol></li>
<li><p>常用方法</p>
<blockquote>
<p>getFullYear()：获取年份 getTime()：获取毫秒（自1970年1月1日至今） setFullYear()：设置具体的日期 getDay()：获取星期</p>
</blockquote></li>
<li><p>实例 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang&#x3D;&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">   	&lt;meta charset&#x3D;&quot;UTF-8&quot;&gt;</span><br><span class="line">   	&lt;title&gt;JS data日期对象&lt;&#x2F;title&gt;</span><br><span class="line">&lt;&#x2F;head&gt;</span><br><span class="line">&lt;body onload&#x3D;&quot;startTime()&quot;&gt;</span><br><span class="line">   	&lt;div id&#x3D;&quot;timetxt&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class="line">   	&lt;script&gt;</span><br><span class="line">       	var date &#x3D; Date();</span><br><span class="line">     	&#x2F;&#x2F;  document.write(date);</span><br><span class="line">     	&#x2F;&#x2F;  document.write(date.getFullYear());</span><br><span class="line">     	&#x2F;&#x2F;  date.setFullYear(2010,1,1);</span><br><span class="line">     	&#x2F;&#x2F;  document.write(date);</span><br><span class="line">     	&#x2F;&#x2F;  时钟</span><br><span class="line">       	function startTime()&#123;</span><br><span class="line">           	var today &#x3D; new Date();</span><br><span class="line">           	var h &#x3D; today.getHours();</span><br><span class="line">           	var m &#x3D; today.getMinutes();</span><br><span class="line">           	var s &#x3D; today.getSeconds();</span><br><span class="line">           	m &#x3D; checkTime(m);</span><br><span class="line">           	s &#x3D; checkTime(s);</span><br><span class="line">           	document.getElementById(&quot;timetxt&quot;).innerHTML &#x3D; h + &quot;:&quot; + m + &quot;:&quot; +s;</span><br><span class="line">           	t &#x3D; setTimeout(function()&#123;</span><br><span class="line">               	startTime();</span><br><span class="line">           	&#125;, 500);</span><br><span class="line">       	&#125;</span><br><span class="line"></span><br><span class="line">       	function checkTime(i)&#123;</span><br><span class="line">           	if(i&lt;10)&#123;</span><br><span class="line">               	i &#x3D; &quot;0&quot;+ i;</span><br><span class="line">           	&#125;</span><br><span class="line">           	return i;</span><br><span class="line">       	&#125;</span><br><span class="line">   	&lt;&#x2F;script&gt;</span><br><span class="line">&lt;&#x2F;body&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure></p></li>
</ul>
<h3 id="array数组对象"><span id="5.4">4. Array数组对象</span></h3>
<ul>
<li><p>Array对象</p>
<blockquote>
<p>仅用单独的变量名来存储一</p>
<p>系列的值</p>
<p>数组中可以包含对象元素、函数、数组</p>
</blockquote></li>
<li><p>数组的创建</p>
<ol type="1">
<li><p>常规方式</p>
<blockquote>
<p>var myCars=new Array(); myCars[0]="Saab"; myCars[1]="Volvo"; myCars[2]="BMW";</p>
</blockquote></li>
<li><p>简洁方式</p>
<blockquote>
<p>var myCars=new Array("Saab", "Volvo", "BMW");</p>
</blockquote></li>
<li><p>字面</p>
<blockquote>
<p>var myCars=["Saab", "Volvo", "BMW"];</p>
</blockquote></li>
</ol></li>
<li><p>数组的常用方法</p>
<blockquote>
<p>concat()：合并数组 例：var c = a.concat(b); sort()：排序（升序），降序见后面实例 例：a.sort(); push()：末尾追加元素 reverse()：数组元素翻身</p>
</blockquote></li>
<li><p>实例 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang&#x3D;&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">   	&lt;meta charset&#x3D;&quot;UTF-8&quot;&gt;</span><br><span class="line">   	&lt;title&gt;JS Array数组对象&lt;&#x2F;title&gt;</span><br><span class="line">&lt;&#x2F;head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">   	&lt;script&gt;</span><br><span class="line">       	var a &#x3D; [&quot;hello&quot;, &quot;world&quot;];</span><br><span class="line">       	var b &#x3D; [&quot;iwen&quot;, &quot;ime&quot;];</span><br><span class="line">       	var c &#x3D; a.concat(b);</span><br><span class="line">       	document.write(c + &quot;&lt;br&#x2F;&gt;&quot;);</span><br><span class="line"></span><br><span class="line">       	var d &#x3D; [&quot;a&quot;, &quot;c&quot;, &quot;d&quot;, &quot;t&quot;, &quot;e&quot;, &quot;p&quot;];</span><br><span class="line">       	document.write(d.sort() + &quot;&lt;br&#x2F;&gt;&quot;);</span><br><span class="line">       	document.write(d.sort(function(a, b)&#123;</span><br><span class="line">           	return b-a;</span><br><span class="line">       	&#125;) + &quot;&lt;br&#x2F;&gt;&quot;);</span><br><span class="line"></span><br><span class="line">       	var e &#x3D; [&quot;a&quot;, &quot;b&quot;];</span><br><span class="line">       	e.push(&quot;c&quot;);</span><br><span class="line">       	document.write(e + &quot;&lt;br&#x2F;&gt;&quot;);</span><br><span class="line"></span><br><span class="line">       	var f &#x3D; [&quot;c&quot;, &quot;b&quot;, &quot;a&quot;];</span><br><span class="line">       	document.write(f.reverse());</span><br><span class="line">   	&lt;&#x2F;script&gt;</span><br><span class="line">&lt;&#x2F;body&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure></p></li>
</ul>
<h3 id="math对象"><span id="5.5">5. Math对象</span></h3>
<ul>
<li><blockquote>
<p>执行常见的算数任务</p>
</blockquote></li>
<li><p>算数值</p>
<blockquote>
<p>Math.E Math.PI Math.SQRT2 //返回2的平方根 Math.SQRT1_2 //返回2的平方根的倒数</p>
</blockquote></li>
<li><p>常见方法</p>
<blockquote>
<p>round()：四舍五入 random()：返回0-1之间的随机数 　　　　　０-10：<em>10 　　　　　０-100：</em>100 　　　　　整型：parseInt(Math.random() * 10); floor()：返回小于等于x的最大整数 max()：返回最大值 min()：返回最小值 abs()：返回绝对值</p>
</blockquote></li>
<li><p>生成指定范围内的随机整数</p>
<ol type="1">
<li><p>包括下限数字 (lower) ，不包括上限数字 (upper)</p>
<p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">function random(lower, upper)&#123;</span><br><span class="line">	return Math.floor(Math.random() * (upper - lower)) + lower;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p></li>
<li><p>包括下限数字 (lower) ，也包括上限数字 (upper)</p>
<p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">function random(lower, upper)&#123;</span><br><span class="line">	return Math.floor(Math.random() * (upper - lower+1)) + lower;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p></li>
<li><p>扩展：产生一个随机的rgb颜色</p>
<p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">function randomColor()&#123;</span><br><span class="line">	var r &#x3D; random(0, 256),</span><br><span class="line">	g &#x3D; random(0, 256),</span><br><span class="line">	b &#x3D; random(0, 256);</span><br><span class="line">	&#x2F;&#x2F;连接字符串结果</span><br><span class="line">	var result &#x3D; &quot;rgb(&quot; + r + &quot;,&quot; + g + &quot;,&quot; + b + &quot;)&quot;;</span><br><span class="line">	return result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p></li>
</ol></li>
<li><p>实例 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang&#x3D;&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">   	&lt;meta charset&#x3D;&quot;UTF-8&quot;&gt;</span><br><span class="line">   	&lt;title&gt;JS Math对象&lt;&#x2F;title&gt;</span><br><span class="line">&lt;&#x2F;head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">   	&lt;script&gt;</span><br><span class="line">       	document.write(Math.round(2.3) + &quot;&lt;br&#x2F;&gt;&quot;);</span><br><span class="line">       	document.write(Math.random() * 10 + &quot;&lt;br&#x2F;&gt;&quot;);</span><br><span class="line">       	document.write(parseInt(Math.random()*10) + &quot;&lt;br&#x2F;&gt;&quot;);</span><br><span class="line">       	document.write(Math.max(10, 20, 4, 1));</span><br><span class="line">   	&lt;&#x2F;script&gt;</span><br><span class="line">&lt;&#x2F;body&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure></p></li>
</ul>
<hr />
<h2 id="六dom对象控制html-1"><span id="6">六、DOM对象控制HTML</span></h2>
<h3 id="方法">1. 方法</h3>
<ul>
<li><p>getElementByName()</p>
<blockquote>
<p>通过name属性来获取元素</p>
</blockquote></li>
<li><p>getElementByTagName()</p>
<blockquote>
<p>通过标签名称来获取元素</p>
</blockquote></li>
<li><p>getAttribute()</p>
<blockquote>
<p>获取元素属性 <em>想要获取的元素</em>.getAttribute("<em>想要获取的属性</em>");</p>
</blockquote></li>
<li><p>setAttribute()</p>
<blockquote>
<p>设置元素属性 <em>想要设置的元素</em>.("<em>要设置的属性</em>", "<em>属性内容</em> ")</p>
</blockquote></li>
<li><p>childNodes</p>
<blockquote>
<p>访问子节点, <strong>注意空白项</strong> ,空白项算文本节点 类似于存放节点的数组，故需用[0] / [1]等确定具体的子节点 <em>length</em> 属性可获得节点数 <em>nodeType</em> 属性</p>
</blockquote>
<blockquote>
<blockquote>
返回节点的类型
<ol type="1">
<li>如果节点是一个元素节点，nodeType属性返回1。</li>
<li>如果节点是属性节点，nodeType属性返回2。</li>
<li>如果节点是一个文本节点，nodeType属性返回3。</li>
<li>如果节点是一个注释节点，nodeType属性返回8。</li>
</ol>
<p>该属性是只读的。</p>
</blockquote>
</blockquote></li>
<li><p>parentNode</p>
<blockquote>
<p>访问父节点 nodeName：节点名称</p>
</blockquote></li>
<li><p>createElement()</p>
<blockquote>
<p>创建元素节点 例：var input = document.createElement("input");</p>
</blockquote></li>
<li><p>createTextNode()</p>
<blockquote>
<p>创建文本节点 与 createElement() 和 appendChild() 共同使用 &gt;var para = document.createElement("p"); &gt;var node = document.createTextNode("这是创建的新文本"); para.appendChild(node);</p>
</blockquote></li>
<li><p>appendChild() &gt;创建新的HTML元素（节点） &gt; &gt; &gt;要创建新的HTML元素（节点）需要先创建一个元素，然后在已存在的元素中添加它。</p>
<blockquote>
<p>在节点之后添加。例：<em>打算添加到它的最后</em>.appendChild( <em>要添加的节点</em> ) &gt;（接上面createTextNode()部分代码） &gt;var element = document.getElementById("div1"); &gt;element.appendChild(para);</p>
</blockquote></li>
<li><p>insertBefore()</p>
<blockquote>
<p>用法和 appendChild() 很像，不过它用于添加新元素到开始位置</p>
<p>例：<em>打算添加到它中</em>.insertBefore(<em>要添加的元素, 它中打算添加到现在这个元素之前的元素</em> ) &gt;（接上面createTextNode()部分代码） &gt;var element = documentById("div1"); &gt;var child = documentById("p1"); &gt;element.insertBefore(para, child);</p>
</blockquote></li>
<li><p>removeChild()</p>
<blockquote>
<p>删除节点 例：<em>想要删除节点的父节点</em>.removeChild(<em>想要删除的节点</em> ) 两种方法 &gt;var parent = document.getElementById("div1"); &gt;var child = document.getElementById("p1"); &gt;parent.removeChild(child); ***** &gt;var parent = document.getElementById("div"); &gt;div.removeChild(div.childNodes[1]);</p>
</blockquote></li>
<li><p>offsetHeight / offsetWidth</p>
<blockquote>
<p>返回任何一个元素的高度或宽度，包括边框和填充，但不是边距 &gt;element.offsetHeight; &gt;element.offsetWidth;</p>
</blockquote>
<blockquote>
<p>返回网页尺寸（不包含滚动条） &gt;document.documentElement.offsetWidth || document.body.offsetWidth; &gt;//考虑到兼容性，故还有 || 后面的内容</p>
</blockquote></li>
<li><p>scrollHeight / scrollWidth</p>
<blockquote>
<p>网页尺寸，包含滚动条</p>
</blockquote></li>
<li><p><strong>实例（这一节请仔细查看实例）</strong> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang&#x3D;&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">   	&lt;meta charset&#x3D;&quot;UTF-8&quot;&gt;</span><br><span class="line">   	&lt;title&gt;DOM对象控制HTML&lt;&#x2F;title&gt;</span><br><span class="line">&lt;&#x2F;head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">   	&lt;p name&#x3D;&quot;pn&quot;&gt;hello&lt;&#x2F;p&gt;</span><br><span class="line">   	&lt;p name&#x3D;&quot;pn&quot;&gt;hello&lt;&#x2F;p&gt;</span><br><span class="line">   	&lt;p name&#x3D;&quot;pn&quot;&gt;hello&lt;&#x2F;p&gt;</span><br><span class="line">   	&lt;p name&#x3D;&quot;pn&quot;&gt;hello&lt;&#x2F;p&gt;</span><br><span class="line">   	&lt;a id&#x3D;&quot;aid&quot; title&#x3D;&quot;得到了a标签的属性&quot;&gt;hello&lt;&#x2F;a&gt;</span><br><span class="line">   	&lt;a id&#x3D;&quot;aid2&quot;&gt;aid2&lt;&#x2F;a&gt;</span><br><span class="line">   	&lt;ul&gt;&lt;li&gt;1&lt;&#x2F;li&gt;&lt;li&gt;2&lt;&#x2F;li&gt;&lt;li&gt;3&lt;&#x2F;li&gt;&lt;&#x2F;ul&gt;</span><br><span class="line">   	&lt;div id&#x3D;&quot;div&quot;&gt;</span><br><span class="line">       	&lt;p id&#x3D;&quot;pid&quot;&gt;div的p元素&lt;&#x2F;p&gt;</span><br><span class="line">   	&lt;&#x2F;div&gt;</span><br><span class="line">   	&lt;script&gt;</span><br><span class="line">       	function getName()&#123;</span><br><span class="line">       	    var count &#x3D; document.getElementsByName(&quot;pn&quot;);</span><br><span class="line">           	alert(count.length);</span><br><span class="line">           	var p &#x3D; count[3];</span><br><span class="line">           	p.innerHTML &#x3D; &quot;World&quot;;</span><br><span class="line">       	&#125;</span><br><span class="line">       	getName();</span><br><span class="line"></span><br><span class="line">       	function getAttr()&#123;</span><br><span class="line">           	var anode &#x3D; document.getElementById(&quot;aid&quot;);</span><br><span class="line">           	var attr &#x3D; anode.getAttribute(&quot;id&quot;);</span><br><span class="line">           	alert(attr);</span><br><span class="line">       	&#125;</span><br><span class="line">       	getAttr();</span><br><span class="line"></span><br><span class="line">       	function setAttr()&#123;</span><br><span class="line">           	var anode &#x3D; document.getElementById(&quot;aid2&quot;);</span><br><span class="line">           	anode.setAttribute(&quot;title&quot;, &quot;动态设置a的title属性&quot;);</span><br><span class="line">           	var attr &#x3D; anode.getAttribute(&quot;title&quot;);</span><br><span class="line">           	alert(attr);</span><br><span class="line">       	&#125;</span><br><span class="line">       	setAttr();</span><br><span class="line"></span><br><span class="line">       	function getChildNode()&#123;</span><br><span class="line">           	var childnode &#x3D; document.getElementsByTagName(&quot;ul&quot;)[0].childNodes;</span><br><span class="line">           	alert(childnode.length);</span><br><span class="line">           	alert(childnode[0].nodeType);</span><br><span class="line">       	&#125;</span><br><span class="line">       	getChildNode();</span><br><span class="line"></span><br><span class="line">       	function getParentNode()&#123;</span><br><span class="line">           	var div &#x3D; document.getElementById(&quot;pid&quot;).parentNode.nodeName;</span><br><span class="line">           	alert(div);</span><br><span class="line">       	&#125;</span><br><span class="line">       	getParentNode();</span><br><span class="line"></span><br><span class="line">       	function createNode()&#123;</span><br><span class="line">           	var body &#x3D; document.body;</span><br><span class="line">           	var input &#x3D; document.createElement(&quot;input&quot;);</span><br><span class="line">           	input.type &#x3D; &quot;button&quot;;</span><br><span class="line">           	input.value &#x3D; &quot;按钮&quot;;</span><br><span class="line">           	body.appendChild(input);</span><br><span class="line">       	&#125;</span><br><span class="line">       	createNode();</span><br><span class="line"></span><br><span class="line">       	function addNode()&#123;</span><br><span class="line">           	var div &#x3D; document.getElementById(&quot;div&quot;);</span><br><span class="line">           	var node &#x3D; document.getElementById(&quot;pid&quot;);</span><br><span class="line">           	var newnode &#x3D; document.createElement(&quot;p&quot;);</span><br><span class="line">           	newnode.innerHTML &#x3D; &quot;动态添加一个p元素&quot;;</span><br><span class="line">           	div.insertBefore(newnode, node);</span><br><span class="line">       	&#125;</span><br><span class="line">       	addNode();</span><br><span class="line"></span><br><span class="line">       	function removeNode()&#123;</span><br><span class="line">           	var div &#x3D; document.getElementById(&quot;div&quot;);</span><br><span class="line">          	&#x2F;&#x2F; var p &#x3D; div.removeChild(div.childNodes[1]);</span><br><span class="line">       	&#125;</span><br><span class="line">       	removeNode();</span><br><span class="line"></span><br><span class="line">       	function getSize()&#123;</span><br><span class="line">           	var width &#x3D; document.documentElement.offsetWidth||document.body.offsetWidth;</span><br><span class="line">           	var height &#x3D; document.documentElement.offsetHeight||document.body.offsetHeight;</span><br><span class="line">           	alert(width + &quot;，&quot; + height);</span><br><span class="line">       	&#125;</span><br><span class="line">       	getSize();</span><br><span class="line">   	&lt;&#x2F;script&gt;</span><br><span class="line">&lt;&#x2F;body&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure></p></li>
</ul>
<hr />
<h2 id="七js浏览器对象-1"><span id="7">七、JS浏览器对象</span></h2>
<h3 id="window对象"><span id="7.1">1. Window对象</span></h3>
<ul>
<li><p>Window对象</p>
<blockquote>
<p>Window对象是BOM的核心，Window对象指当前浏览器的窗口 所有JS全局对象、函数、以及变量均自动变成为Window对象的成员 全局变量是Window对象的属性 全局函数是Window对象的方法 甚至HTML DOM的document也是Window对象的属性之一</p>
</blockquote></li>
<li><p>Window尺寸</p>
<blockquote>
<p>window.innerHeight：浏览器窗口的内部高度（包括滚动条） window.innerWidth：浏览器窗口的内部宽度（包括滚动条）</p>
</blockquote></li>
<li><p>Window方法</p>
<blockquote>
<p>window.open()：打开新窗口 window.close()：关闭新窗口</p>
</blockquote></li>
<li><p>实例</p>
<p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang&#x3D;&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">   	&lt;meta charset&#x3D;&quot;UTF-8&quot;&gt;</span><br><span class="line">   	&lt;title&gt;JS浏览器对象——window对象&lt;&#x2F;title&gt;</span><br><span class="line">&lt;&#x2F;head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">   	&lt;button id&#x3D;&quot;btn&quot; onclick&#x3D;&quot;btnClicked()&quot;&gt;按钮&lt;&#x2F;button&gt;</span><br><span class="line">   	&lt;script&gt;</span><br><span class="line">       	function btnClicked()&#123;</span><br><span class="line">           	&#x2F;&#x2F;window.open(&quot;JS事件.html&quot;, &quot;windowname&quot;, &quot;height &#x3D; 200, width &#x3D; 200, top &#x3D; 100, left &#x3D; 100, toolbar &#x3D; no, menubar &#x3D; no&quot;);</span><br><span class="line">           	window.close();</span><br><span class="line">       	&#125;</span><br><span class="line">   	&lt;&#x2F;script&gt;</span><br><span class="line">&lt;&#x2F;body&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure></p></li>
</ul>
<h3 id="计时器对象"><span id="7.2">2. 计时器对象</span></h3>
<ul>
<li><p>计时事件</p>
<blockquote>
<p>通过JS，我们有能力做到在一个设定的时间间隔之后来执行代码，而不是函数调用后立刻执行</p>
</blockquote></li>
<li><p>计时方法</p>
<ol type="1">
<li><p>setInterval() / clearInterval()</p>
<blockquote>
<p>(函数, 时间间隔) <strong>//函数特别喜欢写成一种样子...祥看实例</strong> 间隔指定毫秒数 <strong>不停</strong> 地执行代码</p>
</blockquote></li>
<li><p>setTimeout() / clearTimeout()</p>
<blockquote>
<p>（函数，间隔时间） 暂停指定毫秒后 <strong>执行</strong> 指定代码 <strong>可以设计成循环，递归调用，即可不停得执行代码</strong>（祥看实例）</p>
</blockquote></li>
</ol></li>
<li><p>实例</p>
<p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang&#x3D;&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">   	&lt;meta charset&#x3D;&quot;UTF-8&quot;&gt;</span><br><span class="line">   	&lt;title&gt;JS浏览器对象——计时器对象&lt;&#x2F;title&gt;</span><br><span class="line">&lt;&#x2F;head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">   	&lt;p id&#x3D;&quot;ptime&quot;&gt;&lt;&#x2F;p&gt;</span><br><span class="line">   	&lt;button onclick&#x3D;&quot;stopTime()&quot;&gt;按钮&lt;&#x2F;button&gt;</span><br><span class="line">   	&lt;br&#x2F;&gt;&lt;br&#x2F;&gt;&lt;br&#x2F;&gt;&lt;br&#x2F;&gt;</span><br><span class="line">   	&lt;button onclick&#x3D;&quot;myWin()&quot;&gt;开始&lt;&#x2F;button&gt;</span><br><span class="line">   	&lt;br&#x2F;&gt;&lt;br&#x2F;&gt;</span><br><span class="line">   	&lt;button onclick&#x3D;&quot;stopWin()&quot;&gt;停止&lt;&#x2F;button&gt;</span><br><span class="line"></span><br><span class="line">   	&lt;script&gt;</span><br><span class="line">       	var mytime &#x3D; setInterval(function()&#123;</span><br><span class="line">           getTime();</span><br><span class="line">       	&#125;, 1000);</span><br><span class="line">       	function getTime()&#123;</span><br><span class="line">           	var d &#x3D; new Date();</span><br><span class="line">           	var t &#x3D; d.toLocaleTimeString();</span><br><span class="line">           	document.getElementById(&quot;ptime&quot;).innerHTML &#x3D; t;</span><br><span class="line">       	&#125;	</span><br><span class="line">       	function stopTime()&#123;</span><br><span class="line">           	clearInterval(mytime);</span><br><span class="line">       	&#125;</span><br><span class="line"></span><br><span class="line">       	var win;</span><br><span class="line">       	function myWin()&#123;</span><br><span class="line">           	alert(&quot;hello&quot;);</span><br><span class="line">           	win &#x3D; setTimeout(function () &#123;</span><br><span class="line">           	    myWin();</span><br><span class="line">           	&#125;, 3000);</span><br><span class="line">       	&#125;</span><br><span class="line">       	function stopWin()&#123;</span><br><span class="line">           	clearTimeout(win);</span><br><span class="line">       	&#125;</span><br><span class="line">   	&lt;&#x2F;script&gt;</span><br><span class="line">&lt;&#x2F;body&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure></p></li>
</ul>
<h3 id="history对象"><span id="7.3">3. History对象</span></h3>
<ul>
<li><p>window.history对象包含浏览器的历史（URL）的集合</p></li>
<li><p>方法</p>
<blockquote>
<p>history.back()：与浏览器点击后退键相同 history.forward()：与浏览器点击向前键相同 history.go()：进入历史中的某个页面</p>
</blockquote></li>
</ul>
<h3 id="location对象"><span id="7.4">4. Location对象</span></h3>
<ul>
<li><p>window.location对象用于获得当前页面的地址URL，并把浏览器重新定向到新的页面</p></li>
<li><p>Location对象的属性</p>
<blockquote>
<p>location.hostname：返回web主机的域名 location.pathname：返回当前页面的路径和文件名 location.port：返回web主机的端口 location.portocol：返回所使用的web协议（http://或https://） location.href：返回当前页面的URL location.assign：方法加载新的文档</p>
</blockquote></li>
<li><p>实例 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang&#x3D;&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">   	&lt;meta charset&#x3D;&quot;UTF-8&quot;&gt;</span><br><span class="line">   	&lt;title&gt;JS浏览器对象——Location对象&lt;&#x2F;title&gt;</span><br><span class="line">&lt;&#x2F;head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">   	&lt;button id&#x3D;&quot;btn&quot; onclick&#x3D;&quot;getLoc()&quot;&gt;按钮展示&lt;&#x2F;button&gt;</span><br><span class="line">   	&lt;br&#x2F;&gt;&lt;br&#x2F;&gt;&lt;br&#x2F;&gt;&lt;br&#x2F;&gt;&lt;br&#x2F;&gt;&lt;br&#x2F;&gt;&lt;br&#x2F;&gt;&lt;br&#x2F;&gt;</span><br><span class="line">   	&lt;button id&#x3D;&quot;btn1&quot; onclick&#x3D;&quot;assi()&quot;&gt;按钮跳转&lt;&#x2F;button&gt;</span><br><span class="line">   	&lt;p id&#x3D;&quot;pid&quot;&gt;&lt;&#x2F;p&gt;</span><br><span class="line">   	&lt;script&gt;</span><br><span class="line">       	function getLoc()&#123;</span><br><span class="line">           	document.getElementById(&quot;pid&quot;).innerHTML &#x3D; window.location.href;</span><br><span class="line">       	&#125;</span><br><span class="line">       	function assi() &#123;</span><br><span class="line">           	location.assign(&quot;https:&#x2F;&#x2F;www.baidu.com&quot;);</span><br><span class="line">       	&#125;</span><br><span class="line">   	&lt;&#x2F;script&gt;</span><br><span class="line">&lt;&#x2F;body&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure></p></li>
</ul>
<h3 id="screen对象"><span id="7.5">5. screen对象</span></h3>
<ul>
<li><p>window.screen对象包含有关用户屏幕的信息</p></li>
<li><p>属性</p>
<blockquote>
<p>screen.availWidth：可用屏幕宽度 screen.availHeight：可用屏幕高度 screen.height：屏幕高度 screen.width：屏幕宽度</p>
</blockquote></li>
</ul>
<hr />
<h2 id="八面向对象-1"><span id="8">八、面向对象</span></h2>
<h3 id="创建对象">1. 创建对象</h3>
<ul>
<li><p>new操作符 + Object创建对象</p>
<p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">var person &#x3D; new Object();</span><br><span class="line">person.name &#x3D; &quot;lisi&quot;;</span><br><span class="line">person.age &#x3D; 21;</span><br><span class="line">person.family &#x3D; [&quot;haha&quot;, &quot;heihei&quot;];</span><br><span class="line">person.say &#x3D; function()&#123;</span><br><span class="line">	alert(this.name);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p></li>
<li><p>字面式创建对象</p>
<p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">var person &#x3D; &#123;</span><br><span class="line">	name: &quot;lisi&quot;,</span><br><span class="line">	age: 21,</span><br><span class="line">	family: [&quot;haha&quot;, &quot;heihei&quot;],</span><br><span class="line">	say: function()&#123;</span><br><span class="line">		alert(this.name);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;; </span><br></pre></td></tr></table></figure> <strong>以上两种方法在使用同一接口创建多个对象 时，会产生大量重复代码，为了解决此问题，工厂模式被开发</strong></p></li>
<li><p>工厂模式</p>
<p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">function createPerson(name, age, family)&#123;</span><br><span class="line">	var o &#x3D; new Object();</span><br><span class="line">	o.name &#x3D; name;</span><br><span class="line">	o.age &#x3D; age;</span><br><span class="line">	o.family &#x3D; family;</span><br><span class="line">	o.say &#x3D; function()&#123;</span><br><span class="line">		alert(this.name);</span><br><span class="line">	&#125;</span><br><span class="line">	return o;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var person1 &#x3D; createPerson(&quot;lisi&quot;, 21, [&quot;haha&quot;, &quot;heihei&quot;]); &#x2F;&#x2F;instanceof无法判断它是谁的实例，只能判断他是对象，构造函数都可以判断出</span><br><span class="line">console.log(person1 instanceof Object); &#x2F;&#x2F;true</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>缺点：工厂模式解决了重复实例化多个对象的问题，但没有解决 * 对象识别 * 的问题，（工厂模式无从识别对象的类型，因为全部都是Object，不像Date, Array等），于是出现了构造函数模式。</p>
</blockquote></li>
<li><p>构造函数模式</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">function Person(name, age, job)&#123;</span><br><span class="line">	this.name &#x3D; name;</span><br><span class="line">	this.age &#x3D; age;</span><br><span class="line">	this.job &#x3D; job;</span><br><span class="line">	this.sayName &#x3D; function()&#123;</span><br><span class="line">		alert(this.name);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var person &#x3D; new Person(&quot;Jim&quot;, 22, &quot;Teacher&quot;);</span><br></pre></td></tr></table></figure>
<ol type="1">
<li><strong>构造函数模式相对于工厂模式有几个显著的区别</strong></li>
</ol>
<ul>
<li>没有显式地创建对象。</li>
<li>直接将属性和方法赋给了this对象。</li>
<li><strong>没有 return 语句</strong>。</li>
<li>函数名的首字母大写（Person 和 createPerson）：按照惯例，构造函数始终都是以大写字母开头，而非构造函数则应该以小写字母开头。</li>
</ul>
<ol start="2" type="1">
<li><p><strong>解决对象识别问题</strong></p></li>
<li><p>constructor</p>
<blockquote>
<p>上面的例子使person保存这个Person的示实例，因此有了一个constructor（构造函数）属性，该属性指向Person</p>
</blockquote>
<p><code>alert(person.constructor == Person); //true</code></p>
<blockquote>
<p>对象的constructor属性最初是用来标识对象类型的，但是检测对象类型还是instanceof操作符更加可靠</p>
</blockquote></li>
<li><p>instanceof</p>
<p><code>alert(person instanceof Object); //true</code> <code>alert(person instanceof Person); //true</code></p>
<blockquote>
<p>这个例子里创建的对象 既是Object实例又是Person的实例</p>
</blockquote></li>
<li><p>new Person()这条语句经历了什么</p></li>
</ol>
<blockquote>
<ol type="1">
<li>创建一个新对象</li>
<li>将构造函数的作用域赋给新对象（因此this就指向了这个新对象）</li>
<li>执行构造函数中的代码（为这个新对象添加属性）</li>
<li>返回新对象</li>
</ol>
</blockquote>
<ol start="4" type="1">
<li>构造函数中的问题</li>
</ol>
<blockquote>
<p>ECMAScript中的函数是对象，因此每定义一个函数，也就是实例化了一个对象。而构造函数在每次创建的时候都会完成同样function实例（sayName），这是很没有必要的。因此可以把函数定义转移到构造函数外部来解决这个问题。</p>
</blockquote></li>
<li><p>原型模式</p>
<p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">function Person()&#123;&#125;</span><br><span class="line">Person.prototype.name &#x3D; &quot;Jim&quot;;</span><br><span class="line">Person.prototype.age &#x3D; 22;</span><br><span class="line">Person.prototype.job &#x3D; &quot;Doctor&quot;;</span><br><span class="line">Person.prototype.sayName &#x3D; function()&#123;</span><br><span class="line">	alert(this.name);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var person &#x3D; new Person();</span><br><span class="line">person.age &#x3D; 50;</span><br><span class="line">person.sayName(); &#x2F;&#x2F;Jim</span><br></pre></td></tr></table></figure></p>
<ol type="1">
<li><p>原型模式的好处</p>
<blockquote>
<p>可以让所有对象实例共享它所包含的属性和方法。换句话说，不必在构造函数中定义对象实例的信息，而是可以让这些信息直接添加到原型对象中。</p>
</blockquote></li>
<li><p>原型对象是什么</p>
<blockquote>
<ol type="1">
<li><p>无论什么时候，只要创建了一个新函数，就会根据一组特定的规则为这个函数创建一个 prototype 属性，这个属性指向函数的原型对象。在默认情况下，所有的原型对象都会自动获得一个constructor（构造函数）的属性，这个属性包含一个指向prototype属性所在的函数的指针，如下： <code>alert(Person.prototype.constructor == Person); //true</code></p></li>
<li><p>在我们调用 <code>person.sayName();</code>的时候，会先后执行两次搜索，先找实例再找原型。 <em>首先编译器会问：“实例person有sayName属性吗？” 答曰：“没有” 然后继续搜索，再问“person的原型里有sayName属性吗？” 答曰：“有”</em> 于是他就读取那个保存在原型对象中的函数</p></li>
<li><p>当给person主动添加属性时，就会屏蔽掉原型的属性（但不会替代，其他Person对象调用更改的属性，依然会时默认值）</p></li>
</ol>
</blockquote>
<blockquote>
<ol start="4" type="1">
<li><p>使用delete操作符删除 <strong>实例</strong> 的属性</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">person.name &#x3D; &quot;Tom&quot;;</span><br><span class="line">alert(person.name); &#x2F;&#x2F;Tom</span><br><span class="line">delete person.name;</span><br><span class="line">alert(person.name); &#x2F;&#x2F;Jim</span><br></pre></td></tr></table></figure></li>
<li><p>hasOwnProperty()方法检测一个属性时存在于实例中还是原型中</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var person &#x3D; new Person();</span><br><span class="line">alert(person.hasOwnProperty(&quot;name&quot;)); &#x2F;&#x2F;false：在原型中</span><br><span class="line">person.name &#x3D; &quot;Tom&quot;;</span><br><span class="line">alert(person.hasOwnProperty(&quot;name&quot;)); &#x2F;&#x2F;true：存在对象实例中 </span><br></pre></td></tr></table></figure></li>
</ol>
</blockquote></li>
<li><p>原型与in操作符</p>
<blockquote>
<p>in操作符通过对象访问对象中的属性时，返回true，无论该属性是存在于实例中还是原型中</p>
<p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var person &#x3D; new Person();</span><br><span class="line">alert(&quot;name&quot; in person); &#x2F;&#x2F;true</span><br><span class="line">person.name &#x3D; &quot;Tom&quot;;</span><br><span class="line">alert(&quot;name&quot; in person); &#x2F;&#x2F;true</span><br></pre></td></tr></table></figure></p>
</blockquote></li>
<li><p>for-in循环</p>
<blockquote>
<p>循环遍历对象的属性</p>
<p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">for(var x in person)&#123; &#x2F;&#x2F;x为属性名</span><br><span class="line">    if(x &#x3D;&#x3D; &quot;name&quot;)&#123;</span><br><span class="line">        alert(&quot;Found name!&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
</blockquote></li>
</ol></li>
<li><p><strong>组合使用构造函数模式和原型模式</strong></p>
<blockquote>
<p>构造函数模式用于定义实例属性 原型模式用于定义方法和共享属性 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">   functon Person(name, age, job)&#123;</span><br><span class="line">	this.name &#x3D; name;</span><br><span class="line">	this.age &#x3D; age;</span><br><span class="line">	this.job &#x3D; job;</span><br><span class="line">	this.friends &#x3D; [&quot;Amy&quot;, &quot;Bob&quot;];</span><br><span class="line">   &#125;</span><br><span class="line">   Person.prototype &#x3D; &#123;</span><br><span class="line">	constructor: Person, &#x2F;&#x2F;每个函数都有prototype属性，指向该函数原型对象，原型对象都有constructor属性，这是一个指向prototype属性所在函数的指针</span><br><span class="line">	sayName: function()&#123;</span><br><span class="line">	alert(this.name);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
</blockquote>
<pre><code>   var person1 = new Person();
   var person2 = new Person();

   person1.friends.push(&quot;Van&quot;);
   alert(person1.friends); //Amy, Bob. Van
   alert(person2.friends); //Amy, Bob
   <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">### 2. 对象的封装###</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&gt;(function()&#123;</span><br><span class="line">&gt;    正常创建对象即可</span><br><span class="line">&gt;    **window.People &#x3D; People; &#x2F;&#x2F;对象名称**</span><br><span class="line">&gt;&#125;());</span><br><span class="line"></span><br><span class="line">+ 实例</span><br></pre></td></tr></table></figure></code></pre>
<p>(function () { function People(name){ this.name = name; } People.prototype = { say: function(){ alert("peo-hello "+this.name); } }; window.People = People; }()); <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">### 3. 对象的继承###</span><br><span class="line"></span><br><span class="line">&gt;继承的对象.prototype &#x3D; new 被继承对象();</span><br><span class="line"></span><br></pre></td></tr></table></figure> (function(){ function Student(name){ this.name = name; }</p>
<p>Student.prototype = new People();</p>
<p>var superSsay = Student.prototype.say;</p>
<p>Student.prototype.say = function(){ superSsay.call(this); alert("stu-hello "+this.name); }; window.Student = Student; }());</p></li>
</ul>
<p>var s = new Student("Olivia"); s.say(); ```</p>
<hr />
<h1 id="后记"><em><font color="darkcyan"><span id="9">后记</span> </em></h1>
<ul>
<li><h3 id="一边看当时的笔记一边看当时看网课时跟着写的代码遇到不会的和忘记的再到菜鸟论坛查一查补充一下整理笔记倒还是挺快乐的当然也有可能是课少hhh">一边看当时的笔记，一边看当时看网课时跟着写的代码，遇到不会的和忘记的再到菜鸟论坛查一查补充一下，整理笔记倒还是挺快乐的，当然也有可能是课少hhh。</h3></li>
<li><h3 id="经常复习是重点-时不时来看看">经常复习是重点 ！！时不时来看看！</h3>
</font></li>
</ul>
<hr />

      
    </div>

    
	
	

	
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/default-index/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/default-index/">1</a><span class="page-number current">2</span>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Olivia"
      src="/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">Olivia</p>
  <div class="site-description" itemprop="description">May All Your Troubles Be little Ones</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">17</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">8</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="/yajie.wang@mail.hfut.edu.cn" title="E-Mail → yajie.wang@mail.hfut.edu.cn"><i class="fa fa-envelope fa-fw"></i></a>
      </span>
  </div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title"><i class="fa fa-link fa-fw"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="http://www.hfut.edu.cn/" title="http:&#x2F;&#x2F;www.hfut.edu.cn&#x2F;" rel="noopener" target="_blank">合肥工业大学</a>
        </li>
    </ul>
  </div>

      </div>
        <div class="back-to-top motion-element">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 2019 – 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">wyj-Olivia</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
      <span class="post-meta-item-text">站点总字数：</span>
    <span title="站点总字数">111k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
      <span class="post-meta-item-text">站点阅读时长 &asymp;</span>
    <span title="站点阅读时长">1:41</span>
</div>

        








      </div>
    </footer>
  </div>

  
  <script color='0,0,255' opacity='0.5' zIndex='-1' count='99' src="/lib/canvas-nest/canvas-nest-nomobile.min.js"></script>
  <script src="/lib/anime.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script>
  <script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  
      

<script>
  if (typeof MathJax === 'undefined') {
    window.MathJax = {
      loader: {
        source: {
          '[tex]/amsCd': '[tex]/amscd',
          '[tex]/AMScd': '[tex]/amscd'
        }
      },
      tex: {
        inlineMath: {'[+]': [['$', '$']]},
        tags: 'ams'
      },
      options: {
        renderActions: {
          findScript: [10, doc => {
            document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
              const display = !!node.type.match(/; *mode=display/);
              const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
              const text = document.createTextNode('');
              node.parentNode.replaceChild(text, node);
              math.start = {node: text, delim: '', n: 0};
              math.end = {node: text, delim: '', n: 0};
              doc.math.push(math);
            });
          }, '', false],
          insertedScript: [200, () => {
            document.querySelectorAll('mjx-container').forEach(node => {
              let target = node.parentNode;
              if (target.nodeName.toLowerCase() === 'li') {
                target.parentNode.classList.add('has-jax');
              }
            });
          }, '', false]
        }
      }
    };
    (function () {
      var script = document.createElement('script');
      script.src = '//cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js';
      script.defer = true;
      document.head.appendChild(script);
    })();
  } else {
    MathJax.startup.document.state(0);
    MathJax.texReset();
    MathJax.typeset();
  }
</script>

    

  
<div id="needsharebutton-float">
      <span class="btn">
        <i class="fa fa-share-alt" aria-hidden="true"></i>
      </span>
    </div>
  <script src="//cdn.jsdelivr.net/gh/theme-next/theme-next-needmoreshare2@1/needsharebutton.min.js"></script>
  <script>
      pbOptions = {};
        pbOptions.iconStyle = "box";
        pbOptions.boxForm = "horizontal";
        pbOptions.position = "bottomCenter";
        pbOptions.networks = "Weibo,Wechat,Douban,QQZone,Twitter,Facebook";
      new needShareButton('#needsharebutton-postbottom', pbOptions);
      flOptions = {};
        flOptions.iconStyle = "box";
        flOptions.boxForm = "horizontal";
        flOptions.position = "middleRight";
        flOptions.networks = "Weibo,Wechat,Douban,QQZone,Twitter,Facebook";
      new needShareButton('#needsharebutton-float', flOptions);
  </script>
</body>
</html>
