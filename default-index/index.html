<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":null},"back2top":{"enable":true,"sidebar":true,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="May All Your Troubles Be little Ones">
<meta property="og:type" content="website">
<meta property="og:title" content="Olivia的博客">
<meta property="og:url" content="http://example.com/default-index/index.html">
<meta property="og:site_name" content="Olivia的博客">
<meta property="og:description" content="May All Your Troubles Be little Ones">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Olivia">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://example.com/default-index/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>Olivia的博客</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Olivia的博客</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="reading-progress-bar"></div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/05/03/test/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Olivia">
      <meta itemprop="description" content="May All Your Troubles Be little Ones">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Olivia的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/05/03/test/" class="post-title-link" itemprop="url">test.md</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-05-03 14:35:33 / 修改时间：15:06:18" itemprop="dateCreated datePublished" datetime="2021-05-03T14:35:33+08:00">2021-05-03</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p> 展示：<script type="math/tex">evidence_{i}=\sum_{j}W_{ij}x_{j}+b_{i}</script></p>
<p> 在公式$evidence_{i}=\sum_{j}W_{ij}x_{j}+b_{i} $中，$W_i$和$b_i$分别为类别$i$的权值和偏置。</p>

      
    </div>

    
	
	

	
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/05/01/hello-world/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Olivia">
      <meta itemprop="description" content="May All Your Troubles Be little Ones">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Olivia的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/05/01/hello-world/" class="post-title-link" itemprop="url">Hello World</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-05-01 22:01:59" itemprop="dateCreated datePublished" datetime="2021-05-01T22:01:59+08:00">2021-05-01</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Welcome to <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a target="_blank" rel="noopener" href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a target="_blank" rel="noopener" href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a target="_blank" rel="noopener" href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>
<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>
<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>
<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>
<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>

      
    </div>

    
	
	

	
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/01/25/%E5%9F%BA%E6%9C%ACnlp%E6%A8%A1%E5%9E%8B%E6%95%B4%E7%90%86/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Olivia">
      <meta itemprop="description" content="May All Your Troubles Be little Ones">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Olivia的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/01/25/%E5%9F%BA%E6%9C%ACnlp%E6%A8%A1%E5%9E%8B%E6%95%B4%E7%90%86/" class="post-title-link" itemprop="url">基本NLP模型整理</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-01-25 20:54:51" itemprop="dateCreated datePublished" datetime="2021-01-25T20:54:51+08:00">2021-01-25</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-05-02 11:41:42" itemprop="dateModified" datetime="2021-05-02T11:41:42+08:00">2021-05-02</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="NLP"><a href="#NLP" class="headerlink" title="NLP"></a>NLP</h1><h2 id="N-gram"><a href="#N-gram" class="headerlink" title="N-gram"></a>N-gram</h2><ul>
<li><p>贝叶斯公式：</p>
<script type="math/tex; mode=display">
P(A | B)= \frac {P(B|A)P(A)}{P(B)}</script></li>
<li><p>马科夫假设：句子中一个词的出现概率仅仅依赖于它前面的若干个词。此假设即可在一定程度上解决<strong>维度灾难(curse of dimensionality)</strong>问题。由此引入<strong>Bi-gram</strong>与<strong>Tri-gram</strong>。</p>
</li>
<li><p><strong>Bi-gram</strong>：只依赖它前面出现的一个词</p>
<script type="math/tex; mode=display">
p(S)=p(w_1w_2w_3...w_n)=p(w_1)p(w_2|w_1)...p(w_n|w_{n-1})</script><p><strong>Tri-gram</strong>：只依赖于它前面出现的两个词</p>
<script type="math/tex; mode=display">
p(S)=p(w_1w_2...w_3)=p(w_1)p(w_2|w_1)...p(w_n|w_{n-1}w_{n-2})</script></li>
<li><p><strong>数据平滑(data Smoothing)</strong>：理论上N越大效果越好，但是N过大会出现<strong>稀疏问题（Sparsity）</strong>。故需进行数据平滑，目的有两个：使所有N-gram概率之和为1，使所有的N-gram概率都不为0。<strong>本质其实就是重新分配整个概率空间，使已经出现过的n-gram的概率降低，补充给未曾出现过的n-gram。</strong>常见平滑方法有<strong>插值平滑（Interpolation）与回溯法（backoff）</strong>，具体核心思想不再赘述。</p>
</li>
<li><p><strong>存在问题</strong>：不考虑超过1个或者2个单词的上下文（n），无法计算词汇间的相似度。</p>
</li>
</ul>
<h2 id="NNLM"><a href="#NNLM" class="headerlink" title="NNLM"></a>NNLM</h2><ul>
<li><p>创新：提出词向量、引入神经网络。</p>
</li>
<li><p>模型结构：</p>
<ul>
<li><p>输入层：</p>
<p><strong>one-hot vector</strong>形式的编码，对于每个one-hot vector$(1 × |V|)$，与Embedding size为$m$的<strong>矩阵$ C (|V| × m) $相乘</strong>，得到一个<strong>distribution vector</strong>$（1 × m）$。$m$比|V|小很多，从而达到了降维的目的，同时 $ C $ 可由神经网络的Back propagation训练不断优化。</p>
</li>
<li><p>隐藏层：</p>
<p>得到所有词的词向量后（即一个 $( n - 1) × m$ 的矩阵），进行处理得到一个 $(n - 1)m×1$的<strong>向量$x$</strong>。</p>
<p>隐含层为一个简单的tanh激活层，公式为</p>
<script type="math/tex; mode=display">
hidden=tanh(Hx+d)</script><p>其维度信息为：</p>
<script type="math/tex; mode=display">
H：h×(n-1)m\\
d:h×1\\
x:(n-1)m×1</script></li>
<li><p>输出层</p>
<p><strong>利用了隐藏层的输出及原始词向量</strong>，最后还需用$softmax$，具体公式如下：</p>
<script type="math/tex; mode=display">
y=b+Wx+Utanh(Hx+d)</script><p>其维度信息为：</p>
<script type="math/tex; mode=display">
U:|V|×h\\
W:|V|×(n-1)m\\
b:|V|×1</script><p>若不想利用原始词向量信息则将$W$设置为零矩阵</p>
</li>
<li><p>损失函数为</p>
<script type="math/tex; mode=display">
L=\frac {1}{T}\sum_{t}log\tilde{P}(w_t|w_{t-1},...w_{t-1+n})+R(\theta)</script><p>$R(\theta)$为正则化项</p>
<script type="math/tex; mode=display">
\theta=(b,d,W,U,H,C)\\
\theta\leftarrow\theta+\epsilon\frac{\partial{log\tilde{P}(w_t|w_{t-1},...,w_{t-n+1})}}{\partial\theta}</script></li>
</ul>
</li>
<li><p>存在问题</p>
<ul>
<li>NNML只用了左边的n-1个词，不能利用更多的上下文信息（如2010年Mikolov提出RNNLM）</li>
<li><p>NNML的输出层计算量太大，需减少计算量使得大规模语料上的训练变得可行（如Minh和Hinton提出的LBL以及后续的一系列模型）</p>
</li>
<li><p>优化（简要）：</p>
<ul>
<li>2007年Mnih和Hinton提出的<strong>LBL以及后续的一系列相关模型，省去了NNLM中的激活函数，直接把模型变成了一个线性变换</strong>，尤其是后来将Hierarchical Softmax引入到LBL后，训练效率进一步增强，但是表达能力不如NNLM这种神经网络的结构；</li>
<li><p>2008年Collobert和Weston提出的<strong>C&amp;W模型不再利用语言模型的结构，而是将目标文本片段整体当做输入，然后预测这个片段是真实文本的概率</strong>，所以它的工作主要是改变了目标输出，由于输出只是一个概率大小，不再是词典大小，因此训练效率大大提升，但由于使用了这种比较“别致”的目标输出，使得它的词向量表征能力有限；</p>
</li>
<li><p>2010年Mikolov提出的<strong>RNNLM</strong>主要是为了解决长程依赖关系，时间复杂度问题依然存在。</p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="Word2vec"><a href="#Word2vec" class="headerlink" title="Word2vec"></a>Word2vec</h2><ul>
<li><p>两种模型and两种优化算法</p>
<ul>
<li>$CBOW$（连续词袋模型）：利用上下文预测中心词</li>
<li>$Skip-gram$（跳字模型）：利用中心词预测上下文</li>
<li>$hierarchical\ softmax$（层次$softmax$）</li>
<li>$negative\ sampling$（负采样）</li>
</ul>
</li>
<li><p>与NNLM的区别</p>
<p>​    不涉及两个优化算法的角度讲，word2vec本质上是描述从自然语言到词向量转换的技术，同时<strong>蕴含语义信息：语义相近的词映射到欧式空间后具有较高的余弦相似度</strong>。NNML是把上下文词的向量进行拼接，word2vec是进行sum，<strong>求平均值来转换成低维词向量</strong>。</p>
<p>​    涉及的<strong>两个优化算法</strong>可在一定程度上<strong>解决</strong>NNLM模型中出现的从隐藏层到输出到$softmax$层的<strong>计算量很大的问题</strong>，因为NNLM要计算所有词的$softmax$概率，再去寻找最大值。而word2vec<strong>采用了哈夫曼树</strong>来代替从隐藏层到输出$softmax$层的映射从而避免计算所有词的$softmax$概率。在实际计算中，只需沿着哈夫曼树从根结点走到叶节点即可。<strong>时间复杂度从$O(n)$降低到$O(logN)$</strong></p>
</li>
<li><p>具体过程</p>
<p>详见：<a target="_blank" rel="noopener" href="http://flyrie.top/2018/10/31/Word2vec_Hierarchical_Softmax/">http://flyrie.top/2018/10/31/Word2vec_Hierarchical_Softmax/</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/itplus/article/details/37998797">https://blog.csdn.net/itplus/article/details/37998797</a></p>
</li>
</ul>
<h2 id="RNN"><a href="#RNN" class="headerlink" title="RNN"></a>RNN</h2><ul>
<li><p>循环神经网络相较于普通神经网络，可结合上下文去训练模型。</p>
</li>
<li><p><strong>Forward Propagation</strong>【此部分来自吴恩达深度学习网课】</p>
<ul>
<li><p>循环神经网络隐藏层常用的激活函数是$tanh$，输出层的激活函数采用为$sigmoid$函数（根据实际需要）</p>
</li>
<li><p>公式推导详解</p>
<p><img src="http://www.ai-start.com/dl2017/images/19cbb2d356a2a6e0f35aa2a946b23a2a.png" alt="img"></p>
<p>在$t$时刻</p>
</li>
</ul>
<script type="math/tex; mode=display">
a^{<t>}=g_1(W_{aa}a^{<t-1>}+W_{ax}x^{<t>}+b_a)\\
\hat y=g_2(W_{ya}a^{<t>}+b_y)</script><p>​        上标表示时间步，第一个字符表示将要求解的变量，第二个字符表示使用的变量</p>
<ul>
<li><p>公式简化</p>
<p><img src="http://www.ai-start.com/dl2017/images/27afdd27f45ad8ddf78677af2a3eeaf8.png" alt="img"></p>
<p>说明：为了简化将$W_{aa}$与$W_{ax}$水平放置组成$W_a$；将$a^{<t-1>}$与$x^{<t>}$叠在一起；</p>
</li>
<li><p>更形象的总体说明：</p>
<p><img src="http://www.ai-start.com/dl2017/images/rnn-f.png" alt="nn-"></p>
</li>
</ul>
</li>
<li><p><strong>Backpropagation through time</strong></p>
<p>交叉熵损失函数：</p>
<script type="math/tex; mode=display">
L^{<t>}(\hat y^{<t>},y^{<t>})=-y^{<t>}log\hat y^{<t>}-(1-y^{<t>})log(1-\hat y^{<t>})</script><p>整个序列的损失函数$L$</p>
<script type="math/tex; mode=display">
L(\hat y, y)=\sum_{t=1}^{T_x}L^{<t>}(\hat y^{<t>},y^{<t>})</script><ul>
<li><p>更具体公式</p>
<p><img src="http://www.ai-start.com/dl2017/images/rnn_cell_backprop.png" alt="nn_cell_backpro"></p>
</li>
</ul>
</li>
<li><p>分类</p>
<p><img src="http://www.ai-start.com/dl2017/images/1daa38085604dd04e91ebc5e609d1179.png" alt="img"></p>
</li>
<li><p>存在问题</p>
<ul>
<li>梯度消失问题（Vanishing gradients with RNNs）：对于很深的神经网络后面层的输出误差很难影响到前面层的计算，故<strong>RNN不擅长处理长期依赖问题</strong></li>
<li>梯度爆炸问题：一般可通过梯度修剪处理</li>
</ul>
</li>
</ul>
<h2 id="GRU"><a href="#GRU" class="headerlink" title="GRU"></a>GRU</h2><p>Gated Recurrent Unit（门控循环单元）</p>
<ul>
<li><p>增加新变量$c$，即代表记忆细胞$(cell)$</p>
<p>$c^{<t>}=a^{<t>}$（与LSTMs的区别）</p>
</li>
<li><p>$c$的更新过程</p>
<hr>
<p>$\tilde c^{<t>} = tanh(W_c[\Gamma_r*c^{<t-1>},x^{<t>}]+b_c)$</p>
<p>$\Gamma_u=\sigma(W_u[c^{<t-1>},x^{<t>}]+b_u)$【<strong>$sigmoid$函数，大部分情况下非常接近0或1</strong>】</p>
<p>$\Gamma_r=\sigma(W_r[c^{<t-1>},x^{<t>}]+b_r)$</p>
<p>$c^{<t>}=\Gamma_u<em>\tilde c^{<t>}+(1-\Gamma_u)</em>c^{<t-1>}$【为0则不更新】</p>
<hr>
<p>$u$：update</p>
<p>$r$：relevance</p>
<p>*：每个元素相乘，而非矩阵乘法</p>
<p><strong>相关门</strong>$\Gamma_r$门表示计算出的下一个$c^{<t>}$的候选值$\tilde c^{<t>}$与$c^{<t-1>}$的相关性</p>
<p><strong>更新门</strong>$\Gamma_u$门表示更新，并且十分容易取0值，这个更新式子就会变为$c^{<t>}=c^{<t-1>}$，<strong>有利于维持细胞的值，从而缓解梯度消失的问题，允许神经网络运行在非常庞大的依赖词上。</strong></p>
</li>
</ul>
<h2 id="LSTM"><a href="#LSTM" class="headerlink" title="LSTM"></a>LSTM</h2><p>long short term memory unit（长短期记忆）</p>
<ul>
<li><p>$c$的更新过程</p>
<hr>
<p>$\tilde c^{<t>}=tanh(W_c[a^{<t-1>},x^{<t>}]+b_c)$</p>
<p>$\Gamma_u=\sigma(W_u[a^{<t-1>},x^{<t>}]+ b_u)$</p>
<p>$\Gamma_f=\sigma(W_f[a^{<t-1>},x^{<t>}]+ b_f)$</p>
<p>$\Gamma_o=\sigma(W_o[a^{<t-1>},x^{<t>}]+ b_o)$</p>
<p>$c^{<t>}=\Gamma_u<em>\tilde c^{<t>}+\Gamma_f</em>c^{<t-1>}$</p>
<p>$a^{<t>}=\Gamma_o*tanh(c^{<t>})$</p>
<hr>
<p>$\Gamma u$：更新门</p>
<p>$\Gamma_f$：遗忘门</p>
<p>$\Gamma_o$：输出门</p>
<p>图片表述</p>
<p><img src="C:\Users\Olivia~\AppData\Roaming\Typora\typora-user-images\image-20210125201411508.png" alt="image-20210125201411508"></p>
<p>​    看公式可得，各门值只取决于$a^{<t-1>}$与$x^{<t>}$，但有时也可以偷窥一下$c^{<t-1>}$的值，这叫做“窥视孔连接”$(peephole\ connection)$。故有时说$c^{<t-1>}$也能影响门值。</p>
</li>
<li><p>前向传递</p>
<p><img src="http://www.ai-start.com/dl2017/images/LSTM.png" alt="ST"></p>
</li>
<li><p>反向传播</p>
<p><img src="C:\Users\Olivia~\AppData\Roaming\Typora\typora-user-images\image-20210125204542244.png" alt="image-20210125204542244"></p>
<p>具体推导过程见：<a target="_blank" rel="noopener" href="https://zybuluo.com/hanbingtao/note/581764">https://zybuluo.com/hanbingtao/note/581764</a></p>
</li>
</ul>
<h2 id="Bi-directional-RNN"><a href="#Bi-directional-RNN" class="headerlink" title="Bi-directional RNN"></a>Bi-directional RNN</h2><p>双向循环神经网络，单元可使用标准的RNN或者GRU、LSTM单元都可，一个有LSTM单元的双向RNN模型是最常用的</p>
<p><img src="http://www.ai-start.com/dl2017/images/053831ff43d039bd5e734df96d8794cb.png" alt="img"></p>
<p>此处为标准的RNN单元$\hat y^{<t>}=g(W_g[\vec a^{<t>}, \overleftarrow a^{<t>}]+b_y)$</p>
<p>$\overleftarrow a$只是从右到左，也是在计算激活值</p>
<ul>
<li>缺点为需要完整的数据序列</li>
</ul>
<h2 id="Deep-RNNs"><a href="#Deep-RNNs" class="headerlink" title="Deep RNNs"></a>Deep RNNs</h2><p>深层循环神经网络</p>
<p><img src="http://www.ai-start.com/dl2017/images/455863a3c8c2dfaa0e5474bfa2c6824d.png" alt="img"></p>
<p>计算方法：例$a^{[2]<3>}$有两个输入，下面的和右面的，故可写为下式：</p>
<p>$a^{[2]<3>}=g(W_a^{[2]}[a^{[2]<2>}, a^{[1]<3>}]+b_a^{[2]})$</p>
<p>一般RNN不会特别深，更多会将输出去掉而换成一些深的层，这些层并不水平相连，而只是一个深层的往来，用来预测$y$。</p>
<h2 id="TODO"><a href="#TODO" class="headerlink" title="TODO"></a>TODO</h2><ul>
<li><p>ELMo(Embeddings from Language Models)</p>
<ul>
<li>为了利用无标记数据使用了<strong>语言模型</strong></li>
<li>双向LSTM</li>
</ul>
</li>
<li><p>OpenAI GPT(<strong>Generative Pre-training Transformer</strong>)</p>
</li>
<li><p>BERT(<strong>Bidirectional Encoder Representations from Transformers</strong>)</p>
</li>
</ul>

      
    </div>

    
	
	

	
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2019/09/14/JS-jQuery-2048%E5%B0%8F%E6%B8%B8%E6%88%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Olivia">
      <meta itemprop="description" content="May All Your Troubles Be little Ones">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Olivia的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/09/14/JS-jQuery-2048%E5%B0%8F%E6%B8%B8%E6%88%8F/" class="post-title-link" itemprop="url">JS-jQuery-2048小游戏</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-09-14 20:54:51" itemprop="dateCreated datePublished" datetime="2019-09-14T20:54:51+08:00">2019-09-14</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-05-01 14:37:00" itemprop="dateModified" datetime="2021-05-01T14:37:00+08:00">2021-05-01</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/JavaScript/" itemprop="url" rel="index"><span itemprop="name">JavaScript</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <span id="more"></span>
<font size=3 face= "微软雅黑" color="darkred">
　　这是暑假的课设，也是我学习JS的动力，提前使用C++实现一遍过了，然而实现过后打算再用JS写一遍时，有一种无从下手的感觉，所以参考了一下其他人的代码，也由此认识到了jQuery框架中对于动画实现部分的便利，于是又开始花时间学习jQuery框架，这个就是纯看菜鸟教程学习的了，学习得倒也很快，所以再次下手做2048时动画效果实现部分就是采用了jQuery中的相关部分。</font>

<blockquote>
<h2 id="目录"><a href="#目录" class="headerlink" title="目录"></a><em>目录</em></h2><h3 id="一、游戏流程介绍"><a href="#一、游戏流程介绍" class="headerlink" title="一、游戏流程介绍"></a><em><a href="#1">一、游戏流程介绍</a></em></h3><h3 id="二、具体代码展示"><a href="#二、具体代码展示" class="headerlink" title="二、具体代码展示"></a><em><a href="#2">二、具体代码展示</a></em></h3><h3 id="三、C-版本代码展示"><a href="#三、C-版本代码展示" class="headerlink" title="三、C++版本代码展示"></a><em><a href="#3">三、C++版本代码展示</a></em></h3><h3 id="四、后记"><a href="#四、后记" class="headerlink" title="四、后记"></a><em>四、后记</em></h3></blockquote>
<hr>
<h2 id="一、游戏流程介绍-1"><a href="#一、游戏流程介绍-1" class="headerlink" title="一、游戏流程介绍"></a><span id="1">一、游戏流程介绍</span></h2><ul>
<li><p>流程图展示</p>
<blockquote>
<p>game：游戏状态<br>updateGameView()：更新游戏界面<br>createNumber()：产生新的数字格<br>check()：判断游戏状态<br>check2048()：判断是否出现2048<br>allCheck()：判断是否游戏失败而结束，即无空白格，也无相邻可合并数字格</p>
</blockquote>
<p>  <img src="https://i.loli.net/2019/09/15/TOkoG4WMjXHSNJA.jpg" alt="2048流程图"></p>
</li>
</ul>
<hr>
<h2 id="二、具体代码展示-1"><a href="#二、具体代码展示-1" class="headerlink" title="二、具体代码展示"></a><span id="2">二、具体代码展示</span></h2><ul>
<li><p>HTML文件</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang&#x3D;&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">  		&lt;meta charset&#x3D;&quot;UTF-8&quot;&gt;</span><br><span class="line">  		&lt;title&gt;2048--Olivia&lt;&#x2F;title&gt;</span><br><span class="line">  		&lt;link rel&#x3D;&quot;icon&quot; href&#x3D;&quot;可爱图标2.png&quot; sizes&#x3D;&quot;2000x2000&quot;&gt;</span><br><span class="line">  		&lt;link rel&#x3D;&quot;stylesheet&quot; type&#x3D;&quot;text&#x2F;css&quot; href&#x3D;&quot;2048.css&quot;&gt;</span><br><span class="line">  		&lt;script src&#x3D;&quot;https:&#x2F;&#x2F;cdn.staticfile.org&#x2F;jquery&#x2F;1.10.2&#x2F;jquery.min.js&quot;&gt;&lt;&#x2F;script&gt;</span><br><span class="line">  		&lt;script src&#x3D;&quot;2048.js&quot;&gt;&lt;&#x2F;script&gt;</span><br><span class="line">&lt;&#x2F;head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">  	&lt;div id&#x3D;&quot;container&quot;&gt;</span><br><span class="line">      	&lt;div id&#x3D;&quot;show&quot;&gt;</span><br><span class="line">          	&lt;p&gt;&lt;b&gt;2048&lt;&#x2F;b&gt;&lt;&#x2F;p&gt;</span><br><span class="line">      	&lt;&#x2F;div&gt;</span><br><span class="line">      	&lt;img src&#x3D;&quot;头像.jpg&quot;&gt;</span><br><span class="line">      	&lt;div id&#x3D;&quot;er&quot;&gt;</span><br><span class="line">          	&lt;p id&#x3D;&quot;per&quot;&gt;by Olivia~~&lt;&#x2F;p&gt;</span><br><span class="line">      	&lt;&#x2F;div&gt;</span><br><span class="line">      	&lt;div id&#x3D;&quot;game&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class="line">      	&lt;div id&#x3D;&quot;github&quot;&gt;</span><br><span class="line">          	&lt;a href&#x3D;&quot;http:&#x2F;&#x2F;wyj-olivia.github.io&quot; target&#x3D;&quot;_blank&quot;&gt;&lt;img id&#x3D;&quot;git_img&quot; src&#x3D;&quot;github.png&quot;</span><br><span class="line">                                                                     				onmouseover&#x3D;&quot;showp()&quot; onmouseout&#x3D;&quot;hidep()&quot;&gt;&lt;&#x2F;a&gt;</span><br><span class="line">          	&lt;p id&#x3D;&quot;git_p&quot;&gt;Olivia的github&lt;&#x2F;p&gt;</span><br><span class="line">      	&lt;&#x2F;div&gt;</span><br><span class="line">      	&lt;div id&#x3D;&quot;time&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class="line">  	&lt;&#x2F;div&gt;</span><br><span class="line"></span><br><span class="line">&lt;&#x2F;body&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>CSS文件</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br></pre></td><td class="code"><pre><span class="line">*&#123;</span><br><span class="line">  		margin: 0px;</span><br><span class="line">  		padding: 0px;</span><br><span class="line">&#125;</span><br><span class="line">#container&#123;</span><br><span class="line">  		position: relative;</span><br><span class="line">  		background-color: #FAF8EF;</span><br><span class="line">  		top: 0px;</span><br><span class="line">  		margin: 0px auto;</span><br><span class="line">  		width: 75%;</span><br><span class="line">  		height: 715px;</span><br><span class="line">  		border-style: double;</span><br><span class="line">  		border-top-style: dotted;</span><br><span class="line">  		border-bottom-style: dotted;</span><br><span class="line">  		border-color: dimgray;</span><br><span class="line">  		border-width: 10px;</span><br><span class="line">&#125;</span><br><span class="line">body&#123;</span><br><span class="line">  		background-color: aliceblue;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#show&#123;</span><br><span class="line">  		position: absolute;</span><br><span class="line">  		width: auto;</span><br><span class="line">    height: auto;</span><br><span class="line">    margin: 25px 360px;</span><br><span class="line"></span><br><span class="line">    border-color: darkseagreen;</span><br><span class="line">    border-style: dashed;</span><br><span class="line">    border-width: 7px;</span><br><span class="line">    border-radius: 15px;</span><br><span class="line">    padding: 6px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#show p&#123;</span><br><span class="line">    font-size: 80px;</span><br><span class="line">    font-family: fantasy;</span><br><span class="line">    color: darkslategray;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">img&#123;</span><br><span class="line">    margin: 30px 670px;</span><br><span class="line">    position: absolute;</span><br><span class="line">    width: 100px;</span><br><span class="line">    height: 100px;</span><br><span class="line">    border-radius: 40px;</span><br><span class="line">    border-style: groove;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#time&#123;</span><br><span class="line">    position: absolute;</span><br><span class="line">    font-size: 18px;</span><br><span class="line">    margin: 665px 800px;</span><br><span class="line">    color: darkslategray;</span><br><span class="line">    font-family: fantasy;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#er&#123;</span><br><span class="line">    position: absolute;</span><br><span class="line">    width: 150px;</span><br><span class="line">    height: auto;</span><br><span class="line">    margin: 145px 640px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#per&#123;</span><br><span class="line">    font-size: 20px;</span><br><span class="line">    color: darkcyan;</span><br><span class="line">    font-family: 微软雅黑;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#game&#123;</span><br><span class="line">    position: absolute;</span><br><span class="line">    border-radius: 8px;</span><br><span class="line">    background-color: #BBADA0;</span><br><span class="line">    margin: 180px 350px;</span><br><span class="line">    font-family: 微软雅黑;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#git_img&#123;</span><br><span class="line">    position: absolute;</span><br><span class="line">    width: 40px;</span><br><span class="line">    height: 40px;</span><br><span class="line">    margin: 650px 360px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#git_p&#123;</span><br><span class="line">    position: absolute;</span><br><span class="line">    color: darkcyan;</span><br><span class="line">    margin: 660px 420px;</span><br><span class="line">    padding: 5px;</span><br><span class="line">    background-color: cornsilk;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">a&#123;</span><br><span class="line">    text-decoration: unset;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.default-cell&#123;</span><br><span class="line">    position: absolute;</span><br><span class="line">    border-radius: 8px;</span><br><span class="line">    background-color: #CDC1B4;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.cell&#123;</span><br><span class="line">    position: absolute;</span><br><span class="line">    border-radius: 8px;</span><br><span class="line">    text-align: center;</span><br><span class="line">    font-weight: bolder;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
</li>
<li><p>JS文件</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;横竖方向方块数量</span><br><span class="line">const ROW &#x3D; 4; const COL &#x3D; 4;</span><br><span class="line">&#x2F;&#x2F;验证游戏是否结束</span><br><span class="line">const GAME_OVER &#x3D; -1;</span><br><span class="line">const GAME_WIN &#x3D; 1;</span><br><span class="line">const GAME_CON &#x3D; 0;</span><br><span class="line">let game &#x3D; GAME_CON;</span><br><span class="line">&#x2F;&#x2F;方块大小</span><br><span class="line">const CELL_SIZE &#x3D; 100;</span><br><span class="line">&#x2F;&#x2F;间距</span><br><span class="line">const MARGIN &#x3D; Math.floor(CELL_SIZE &#x2F; 10);</span><br><span class="line">&#x2F;&#x2F;存放数字的二维数组</span><br><span class="line">let board &#x3D; new Array();</span><br><span class="line">&#x2F;&#x2F;移动动画时长</span><br><span class="line">const MOVE_ANIMATION_TIME &#x3D; 100;</span><br><span class="line">&#x2F;&#x2F;最小数字</span><br><span class="line">const MIN_NUMBER &#x3D; 2;</span><br><span class="line"></span><br><span class="line">&#x2F;*游戏过程</span><br><span class="line">* 按键 --&gt; move --&gt;updateGameView() --&gt; game &#x3D;&#x3D; GAME_CON? --true--&gt; createNumber() --&gt; check() --&gt; check2048() --true--&gt; game &#x3D; GAME_WIN alert</span><br><span class="line">*                                                         -------------false--------&gt;                         --false--&gt; allCheck() --true--&gt; game &#x3D; GAME_OVER alert</span><br><span class="line">*                                                                                                                                   --false--&gt; move*&#x2F;</span><br><span class="line"></span><br><span class="line">window.onload &#x3D; function()&#123;</span><br><span class="line">	init();  &#x2F;&#x2F;初始化数组和游戏界面</span><br><span class="line">	updateGameView();  &#x2F;&#x2F;更新游戏视图</span><br><span class="line">	&#x2F;&#x2F;生成两个数字</span><br><span class="line">	createOneNumber();</span><br><span class="line">	createOneNumber();</span><br><span class="line">	startTime();</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">function startTime()&#123;</span><br><span class="line">	let today &#x3D; new Date();</span><br><span class="line">	let t &#x3D; today.toLocaleTimeString();</span><br><span class="line">	document.getElementById(&quot;time&quot;).innerHTML &#x3D; t;</span><br><span class="line">	setTimeout(function()&#123;</span><br><span class="line">		startTime();</span><br><span class="line">	&#125;, 500);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; $(document).ready(function () &#123;</span><br><span class="line">&#x2F;&#x2F;    $(&quot;#git_img&quot;).onmouseover(function () &#123;</span><br><span class="line">&#x2F;&#x2F;        $(&quot;#git_p&quot;).fadeIn();</span><br><span class="line">&#x2F;&#x2F;    &#125;) ;</span><br><span class="line">&#x2F;&#x2F;     $(&quot;#git_img&quot;).onmouseout(function () &#123;</span><br><span class="line">&#x2F;&#x2F;         $(&quot;#git_p&quot;).fadeOut();</span><br><span class="line">&#x2F;&#x2F;     &#125;) ;</span><br><span class="line">&#x2F;&#x2F; &#125;);</span><br><span class="line"></span><br><span class="line">function showp()&#123;</span><br><span class="line">	$(&quot;#git_p&quot;).fadeIn();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function hidep()&#123;</span><br><span class="line">	$(&quot;#git_p&quot;).fadeOut();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">window.onkeydown &#x3D; function(e)&#123;</span><br><span class="line">	switch (e.keyCode) &#123;</span><br><span class="line">	&#x2F;&#x2F;上</span><br><span class="line">		case 87: moveUp(); break;</span><br><span class="line">		case 38: moveUp(); break;</span><br><span class="line">		&#x2F;&#x2F;下</span><br><span class="line">		case 40: moveDown();break;</span><br><span class="line">		case 83: moveDown();break;</span><br><span class="line">		&#x2F;&#x2F;左</span><br><span class="line">		case 65: moveLeft();break;</span><br><span class="line">		case 37: moveLeft();break;</span><br><span class="line">		&#x2F;&#x2F;右</span><br><span class="line">		case 68: moveRight();break;</span><br><span class="line">		case 39: moveRight();break;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">function moveUp()</span><br><span class="line">&#123;</span><br><span class="line">	&#x2F;&#x2F;合并注意事项</span><br><span class="line">	&#x2F;&#x2F;1.不能合并的情况：堆在一起且无可合并的格子</span><br><span class="line">	&#x2F;&#x2F;2.每次合并时合并相邻的两个，不可多合并</span><br><span class="line">	let can &#x3D; false;</span><br><span class="line">	&#x2F;&#x2F;先合并</span><br><span class="line">	for(let col &#x3D; 0; col &lt; COL; col++)&#123;</span><br><span class="line">	let temp &#x3D; 0;</span><br><span class="line">	let rl &#x3D; 0;</span><br><span class="line">		for(let row &#x3D; 0; row &lt; ROW; row++)&#123;</span><br><span class="line">		    if(board[row][col] !&#x3D; 0)&#123;</span><br><span class="line">		        if(board[row][col] !&#x3D; temp)&#123;</span><br><span class="line">		            temp &#x3D; board[row][col];</span><br><span class="line">		            rl &#x3D; row;</span><br><span class="line">		        &#125;else &#123;</span><br><span class="line">		            board[rl][col] &#x3D; temp * 2;</span><br><span class="line">		            board[row][col] &#x3D; 0;</span><br><span class="line">		            cellMoveAnimation(row, col, rl, col);</span><br><span class="line">		            can &#x3D; true;</span><br><span class="line">		            temp &#x3D; 0;</span><br><span class="line">		        &#125;</span><br><span class="line">		    &#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	&#x2F;&#x2F;再移动</span><br><span class="line">	for(let col &#x3D; 0; col &lt; COL; col++)&#123;</span><br><span class="line">		for(let row &#x3D; 0; row &lt;ROW; row++)&#123;</span><br><span class="line">		    if(board[row][col] !&#x3D; 0)&#123;</span><br><span class="line">		        for(let i &#x3D; 0; i &lt; row; i++)&#123;</span><br><span class="line">		            if(board[i][col] &#x3D;&#x3D; 0)&#123;</span><br><span class="line">		                board[i][col] &#x3D; board[row][col];</span><br><span class="line">		                board[row][col] &#x3D; 0;</span><br><span class="line">		                cellMoveAnimation(row, col, i, col);</span><br><span class="line">		                can &#x3D; true;</span><br><span class="line">		                break;</span><br><span class="line">		            &#125;</span><br><span class="line">		        &#125;</span><br><span class="line">		    &#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	&#x2F;&#x2F;重新渲染页面</span><br><span class="line">	setTimeout(&quot;updateGameView()&quot;, MOVE_ANIMATION_TIME);</span><br><span class="line">	&#x2F;&#x2F;若游戏未凑齐2048，符合移动条件条件则新建格子</span><br><span class="line">	if(can &amp;&amp; (game &#x3D;&#x3D; GAME_CON))&#123;</span><br><span class="line">		&#x2F;&#x2F;新建格子</span><br><span class="line">		setTimeout(&quot;createOneNumber()&quot;, MOVE_ANIMATION_TIME);</span><br><span class="line">	&#125;</span><br><span class="line">	check();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function moveDown() &#123;</span><br><span class="line">	let can &#x3D; false;</span><br><span class="line">	</span><br><span class="line">	&#x2F;&#x2F;先合并</span><br><span class="line">	for (let col &#x3D; 0; col &lt; COL; col++) &#123;</span><br><span class="line">	let temp &#x3D; 0;</span><br><span class="line">	let rl &#x3D; 0;</span><br><span class="line">		for (let row &#x3D; ROW - 1; row &gt;&#x3D; 0; row--) &#123;</span><br><span class="line">		    if (board[row][col] !&#x3D; 0) &#123;</span><br><span class="line">		        if (board[row][col] !&#x3D; temp) &#123;</span><br><span class="line">		            temp &#x3D; board[row][col];</span><br><span class="line">		            rl &#x3D; row;</span><br><span class="line">		        &#125; else &#123;</span><br><span class="line">		            board[rl][col] &#x3D; temp * 2;</span><br><span class="line">		            board[row][col] &#x3D; 0;</span><br><span class="line">		            cellMoveAnimation(row, col, rl, col);</span><br><span class="line">		            can &#x3D; true;</span><br><span class="line">		            temp &#x3D; 0;</span><br><span class="line">		        &#125;</span><br><span class="line">		    &#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	&#x2F;&#x2F;再移动</span><br><span class="line">	for (let col &#x3D; 0; col &lt; COL; col++) &#123;</span><br><span class="line">		for (let row &#x3D; ROW - 2; row &gt;&#x3D; 0; row--)&#123;</span><br><span class="line">		    if(board[row][col] !&#x3D; 0)&#123;</span><br><span class="line">		        for(let i &#x3D; ROW - 1; i &gt; row; i--)&#123;</span><br><span class="line">		            if(board[i][col] &#x3D;&#x3D; 0)&#123;</span><br><span class="line">		                board[i][col] &#x3D; board[row][col];</span><br><span class="line">		                board[row][col] &#x3D; 0;</span><br><span class="line">		                cellMoveAnimation(row, col, i, col);</span><br><span class="line">		                can &#x3D; true;</span><br><span class="line">		                break;</span><br><span class="line">		            &#125;</span><br><span class="line">		        &#125;</span><br><span class="line">		    &#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	&#x2F;&#x2F;重新渲染页面</span><br><span class="line">	setTimeout(&quot;updateGameView()&quot;, MOVE_ANIMATION_TIME);</span><br><span class="line">	&#x2F;&#x2F;若满足条件且未凑齐2048，则新建格子</span><br><span class="line">	if(can &amp;&amp; (game &#x3D;&#x3D; GAME_CON))&#123;</span><br><span class="line">		setTimeout(&quot;createOneNumber()&quot;, MOVE_ANIMATION_TIME);</span><br><span class="line">	&#125;</span><br><span class="line">	check();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function moveLeft()</span><br><span class="line">&#123;</span><br><span class="line">	let can &#x3D; false;</span><br><span class="line">	</span><br><span class="line">	&#x2F;&#x2F;先合并</span><br><span class="line">	for(let row &#x3D; 0; row &lt; ROW; row++)&#123;</span><br><span class="line">	let temp &#x3D; 0;</span><br><span class="line">	let cl &#x3D; 0;</span><br><span class="line">		for(let col &#x3D; 0; col &lt; COL; col++)&#123;</span><br><span class="line">		    if(board[row][col] !&#x3D; 0)&#123;</span><br><span class="line">		        if(temp !&#x3D; board[row][col])&#123;</span><br><span class="line">		            temp &#x3D; board[row][col];</span><br><span class="line">		            cl &#x3D; col;</span><br><span class="line">		        &#125;else&#123;</span><br><span class="line">		            board[row][cl] &#x3D; temp * 2;</span><br><span class="line">		            board[row][col] &#x3D; 0;</span><br><span class="line">		            cellMoveAnimation(row, col, row, cl);</span><br><span class="line">		            can &#x3D; true;</span><br><span class="line">		            temp &#x3D; 0;</span><br><span class="line">		        &#125;</span><br><span class="line">		    &#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	&#x2F;&#x2F;再移动</span><br><span class="line">	for(let row &#x3D; 0; row &lt; ROW; row++)&#123;</span><br><span class="line">		for(let col &#x3D; 1; col &lt; COL; col++)&#123;</span><br><span class="line">		    if(board[row][col] !&#x3D; 0)&#123;</span><br><span class="line">		        for(let i &#x3D; 0; i &lt; col; i++)&#123;</span><br><span class="line">		            if(board[row][i] &#x3D;&#x3D; 0)&#123;</span><br><span class="line">		                board[row][i] &#x3D; board[row][col];</span><br><span class="line">		                board[row][col] &#x3D; 0;</span><br><span class="line">		                cellMoveAnimation(row, col, row, i);</span><br><span class="line">		                can &#x3D; true;</span><br><span class="line">		                break;</span><br><span class="line">		            &#125;</span><br><span class="line">		        &#125;</span><br><span class="line">		    &#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	setTimeout(&quot;updateGameView()&quot;, MOVE_ANIMATION_TIME);</span><br><span class="line">	if(can &amp;&amp; (game &#x3D;&#x3D; GAME_CON))&#123;</span><br><span class="line">		setTimeout(&quot;createOneNumber()&quot;, MOVE_ANIMATION_TIME);</span><br><span class="line">	&#125;</span><br><span class="line">	check();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;向右</span><br><span class="line">function moveRight()</span><br><span class="line">&#123;</span><br><span class="line">	let can &#x3D; false;</span><br><span class="line">	</span><br><span class="line">	&#x2F;&#x2F;先合并</span><br><span class="line">	for(let row &#x3D; 0; row &lt; ROW; row++)&#123;</span><br><span class="line">	let temp &#x3D; 0;</span><br><span class="line">	let cl &#x3D; 0;</span><br><span class="line">		for(let col &#x3D; COL - 1; col &gt;&#x3D; 0; col--)&#123;</span><br><span class="line">		    if(board[row][col] !&#x3D; 0)&#123;</span><br><span class="line">		        if(board[row][col] !&#x3D; temp)&#123;</span><br><span class="line">		            temp &#x3D; board[row][col];</span><br><span class="line">		            cl &#x3D; col;</span><br><span class="line">		        &#125;else&#123;</span><br><span class="line">		            board[row][cl] &#x3D; temp * 2;</span><br><span class="line">		            board[row][col] &#x3D; 0;</span><br><span class="line">		            cellMoveAnimation(row, col, row, cl);</span><br><span class="line">		            can &#x3D; true;</span><br><span class="line">		            temp &#x3D; 0;</span><br><span class="line">		        &#125;</span><br><span class="line">		    &#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	&#x2F;&#x2F;再平移</span><br><span class="line">	for(let row &#x3D; 0; row &lt; ROW; row++)&#123;</span><br><span class="line">		for(let col &#x3D; COL - 2; col &gt;&#x3D; 0; col--)&#123;</span><br><span class="line">		    if(board[row][col])&#123;</span><br><span class="line">		        for(let i &#x3D; COL - 1; i &gt; col; i--)&#123;</span><br><span class="line">		            if(board[row][i] &#x3D;&#x3D; 0)&#123;</span><br><span class="line">		                board[row][i] &#x3D; board[row][col];</span><br><span class="line">		                board[row][col] &#x3D; 0;</span><br><span class="line">		                cellMoveAnimation(row, col, row, i);</span><br><span class="line">		                can &#x3D; true;</span><br><span class="line">		                break;</span><br><span class="line">		            &#125;</span><br><span class="line">		        &#125;</span><br><span class="line">		    &#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	setTimeout(&quot;updateGameView()&quot;, MOVE_ANIMATION_TIME);</span><br><span class="line">	if(can &amp;&amp; (game &#x3D;&#x3D; GAME_CON))&#123;</span><br><span class="line">		setTimeout(&quot;createOneNumber()&quot;, MOVE_ANIMATION_TIME);</span><br><span class="line">	&#125;</span><br><span class="line">	check();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function check()</span><br><span class="line">&#123;</span><br><span class="line">	if(!check2048())&#123;</span><br><span class="line">		if(allCheck())&#123;</span><br><span class="line">		    game &#x3D; GAME_OVER;</span><br><span class="line">		    alert(&quot;What a pity... Do It Again!&quot;);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;检查是否凑齐2048</span><br><span class="line">function check2048()</span><br><span class="line">&#123;</span><br><span class="line">	let max &#x3D; 0;</span><br><span class="line">	for(let row &#x3D; 0; row &lt; ROW; row++)&#123;</span><br><span class="line">		for(let col &#x3D; 0; col &lt; COL; col++)&#123;</span><br><span class="line">		    if(board[row][col] &gt; max)&#123;</span><br><span class="line">		        max &#x3D; board[row][col];</span><br><span class="line">		    &#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	if(max &#x3D;&#x3D; 2048)&#123;</span><br><span class="line">		game &#x3D; GAME_WIN;</span><br><span class="line">		alert(&quot;Congratulations!!   You Win!!&quot;);</span><br><span class="line">		return true;</span><br><span class="line">		&#125;else&#123;</span><br><span class="line">		game &#x3D; GAME_CON;</span><br><span class="line">		return false;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#x2F;&#x2F;检查游戏是否结束</span><br><span class="line">function allCheck()</span><br><span class="line">&#123;</span><br><span class="line">	&#x2F;&#x2F;有没有空格</span><br><span class="line">	for(let i &#x3D; 0; i &lt; ROW; i++)</span><br><span class="line">		for(let j &#x3D; 0; j &lt; COL; j++)</span><br><span class="line">		    if(board[i][j] &#x3D;&#x3D; 0)&#123;</span><br><span class="line">		        game &#x3D; GAME_CON;</span><br><span class="line">		        return false;</span><br><span class="line">		    &#125;</span><br><span class="line">	&#x2F;&#x2F;横向检查有没有相邻可合并的格子</span><br><span class="line">	for(let i &#x3D; 0; i &lt; ROW; i++)</span><br><span class="line">		for(let j &#x3D; 0; j &lt; COL - 1; j++)</span><br><span class="line">		    if(board[i][j] &#x3D;&#x3D; board[i][j+1])&#123;</span><br><span class="line">		        game &#x3D; GAME_CON;</span><br><span class="line">		        return false;</span><br><span class="line">		    &#125;</span><br><span class="line">	&#x2F;&#x2F;横向检查有没有相邻可合并的格子</span><br><span class="line">	for(let i &#x3D; 0; i &lt; ROW - 1; i++)</span><br><span class="line">		for(let j &#x3D; 0; j &lt; COL; j++)</span><br><span class="line">		    if(board[i][j] &#x3D;&#x3D; board[i+1][j])&#123;</span><br><span class="line">		        game &#x3D; GAME_CON;</span><br><span class="line">		        return false;</span><br><span class="line">		    &#125;</span><br><span class="line">	return true;</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;*</span><br><span class="line">&#x2F;&#x2F;生成随机数</span><br><span class="line">function createOneNumber()</span><br><span class="line">&#123;</span><br><span class="line">	&#x2F;&#x2F;   1&#x2F;20的几率生成最小数字的两倍</span><br><span class="line">	let num;</span><br><span class="line">	let per &#x3D; Math.floor(Math.random() * 19) + 1;  &#x2F;&#x2F;生成1到20之间的随机整数</span><br><span class="line">	if( per &#x3D;&#x3D; 1 )&#123;</span><br><span class="line">		num &#x3D; MIN_NUMBER * 2;</span><br><span class="line">	&#125;else&#123;</span><br><span class="line">		num &#x3D; MIN_NUMBER;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	&#x2F;&#x2F;  生成随机数字的格子</span><br><span class="line">	let x, y;</span><br><span class="line">	do&#123;</span><br><span class="line">		x &#x3D; Math.floor(Math.random() * (ROW - 1));</span><br><span class="line">		y &#x3D; Math.floor(Math.random() * (COL - 1));</span><br><span class="line">	&#125;while (board[x][y] !&#x3D; 0);</span><br><span class="line">	board[x][y] &#x3D; num;</span><br><span class="line">	</span><br><span class="line">	&#x2F;&#x2F;  生成随机数字的动画效果</span><br><span class="line">	$(&quot;#cell-&quot; + x + &quot;-&quot; + y).css(&#123;</span><br><span class="line">		&quot;background-color&quot;: getColorByNumber(board[x][y]),</span><br><span class="line">		&quot;font-size&quot;: CELL_SIZE &#x2F; 2.5,</span><br><span class="line">		&quot;line-height&quot;: CELL_SIZE + &#39;px&#39;</span><br><span class="line">	&#125;);</span><br><span class="line">	$(&quot;#cell-&quot; + x + &quot;-&quot; + y).text(board[x][y]);</span><br><span class="line">	$(&quot;#cell-&quot; + x + &quot;-&quot; + y).animate(&#123;</span><br><span class="line">		width: CELL_SIZE,</span><br><span class="line">		height: CELL_SIZE,</span><br><span class="line">		left: getCellLeft(x, y),</span><br><span class="line">		top: getCellTop(x, y),</span><br><span class="line">	&#125;);</span><br><span class="line">&#125;</span><br><span class="line">*&#x2F;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 生成一个随机的数字</span><br><span class="line">function createOneNumber() &#123;</span><br><span class="line">let i, j;</span><br><span class="line">while(true) &#123;</span><br><span class="line">	i &#x3D; Math.floor(Math.random() * ROW);</span><br><span class="line">	j &#x3D; Math.floor(Math.random() * COL);</span><br><span class="line">	&#x2F;&#x2F; 如果此处是零</span><br><span class="line">	if (board[i][j] &#x3D;&#x3D; 0) &#123;</span><br><span class="line">	    board[i][j] &#x3D; Math.random() &gt; 0.05 ? MIN_NUMBER : 2 * MIN_NUMBER;</span><br><span class="line">	    &#x2F;&#x2F; 显示数字动画</span><br><span class="line">	    $(&quot;#cell-&quot; + i + &quot;-&quot; + j).css(&#123;</span><br><span class="line">	        &quot;background-color&quot;: getColorByNumber(board[i][j]),</span><br><span class="line">	        &quot;font-size&quot;: CELL_SIZE &#x2F; 2.5,</span><br><span class="line">	        &quot;line-height&quot;: CELL_SIZE + &#39;px&#39;</span><br><span class="line">	    &#125;);</span><br><span class="line">	    $(&quot;#cell-&quot; + i + &quot;-&quot; + j).text(board[i][j]);</span><br><span class="line">	    $(&quot;#cell-&quot; + i + &quot;-&quot; + j).animate(&#123;</span><br><span class="line">	        width: CELL_SIZE,</span><br><span class="line">	        height: CELL_SIZE,</span><br><span class="line">	        left: getCellLeft(i, j),</span><br><span class="line">	        top: getCellTop(i, j),</span><br><span class="line">	    &#125;);</span><br><span class="line">	    break;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;移动方块动画</span><br><span class="line">function cellMoveAnimation(i, j, toi, toj)</span><br><span class="line">&#123;</span><br><span class="line">	$(&#39;#cell-&#39; + i + &#39;-&#39; + j).animate(&#123;</span><br><span class="line">	 	top: getCellTop(toi, toj),</span><br><span class="line">	 	left: getCellLeft(toi, toj)</span><br><span class="line">	&#125;, MOVE_ANIMATION_TIME)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;更新游戏视图</span><br><span class="line">function updateGameView()</span><br><span class="line">&#123;</span><br><span class="line">	&#x2F;&#x2F;清除旧的游戏视图</span><br><span class="line">	$(&quot;.cell&quot;).remove();</span><br><span class="line">	for(let i &#x3D; 0; i &lt; ROW; i++)&#123;</span><br><span class="line">		for(let j &#x3D; 0; j &lt; COL; j++)&#123;</span><br><span class="line">		    $(&quot;#game&quot;).append(&#39;&lt;div class&#x3D;&quot;cell&quot; id&#x3D;&quot;cell-&#39; + i + &#39;-&#39; + j +&#39;&quot;&gt;&lt;&#x2F;div&gt;&#39;);</span><br><span class="line">		    &#x2F;&#x2F;判断此处是否为0</span><br><span class="line">		    if (board[i][j] &#x3D;&#x3D; 0) &#123;</span><br><span class="line">		        $(&quot;#cell-&quot; + i + &quot;-&quot; + j).css(&#123;</span><br><span class="line">		            &quot;width&quot;: 0,</span><br><span class="line">		            &quot;height&quot;: 0,</span><br><span class="line">		            &quot;top&quot;: getCellTop(i, j) + CELL_SIZE &#x2F; 2,</span><br><span class="line">		            &quot;left&quot;: getCellLeft(i, j) + CELL_SIZE &#x2F; 2</span><br><span class="line">		        &#125;);</span><br><span class="line">		    &#125; else &#123;</span><br><span class="line">		        &#x2F;*</span><br><span class="line">		        $(&quot;#cell-&quot; + i + &quot;-&quot; + j).css(&#123;</span><br><span class="line">		            &quot;width&quot;: CELL_SIZE,</span><br><span class="line">		            &quot;height&quot;: CELL_SIZE,</span><br><span class="line">		            &quot;top&quot;: getCellTop(i, j),</span><br><span class="line">		            &quot;left&quot;: getCellLeft(i, j),</span><br><span class="line">		            &quot;font-size&quot;: CELL_SIZE &#x2F; 2.5,</span><br><span class="line">		            &quot;line-height&quot;: CELL_SIZE,</span><br><span class="line">		            &quot;background-color&quot;: getColorByNumber(board[i][j])</span><br><span class="line">		        &#125;);</span><br><span class="line">		        $(&quot;#cell-&quot; + i + &quot;-&quot; + j).text(board[i][j]);</span><br><span class="line">		        *&#x2F;</span><br><span class="line">		</span><br><span class="line">		        $(&#39;#cell-&#39; + i + &#39;-&#39; + j).css(&#39;width&#39;, CELL_SIZE);</span><br><span class="line">		        $(&#39;#cell-&#39; + i + &#39;-&#39; + j).css(&#39;height&#39;, CELL_SIZE);</span><br><span class="line">		        $(&#39;#cell-&#39; + i + &#39;-&#39; + j).css(&#39;top&#39;, getCellTop(i, j));</span><br><span class="line">		        $(&#39;#cell-&#39; + i + &#39;-&#39; + j).css(&#39;left&#39;, getCellLeft(i, j));</span><br><span class="line">		        $(&#39;#cell-&#39; + i + &#39;-&#39; + j).css(&#39;font-size&#39;, CELL_SIZE &#x2F; 2.5);</span><br><span class="line">		        $(&#39;#cell-&#39; + i + &#39;-&#39; + j).css(&#39;line-height&#39;, CELL_SIZE + &#39;px&#39;);</span><br><span class="line">		        $(&#39;#cell-&#39; + i + &#39;-&#39; + j).css(&#39;background-color&#39;, getColorByNumber(board[i][j]));</span><br><span class="line">		        $(&#39;#cell-&#39; + i + &#39;-&#39; + j).text(board[i][j]);</span><br><span class="line">		    &#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;初始化数组和游戏界面</span><br><span class="line">function init()</span><br><span class="line">&#123;</span><br><span class="line">	$(&quot;#game&quot;).css(&#123;</span><br><span class="line">		&quot;width&quot;: COL * (CELL_SIZE + MARGIN) + MARGIN,</span><br><span class="line">		&quot;height&quot;: ROW * (CELL_SIZE + MARGIN) + MARGIN</span><br><span class="line">	&#125;);</span><br><span class="line">	&#x2F;&#x2F;初始化数组</span><br><span class="line">	for(let i &#x3D; 0; i &lt; ROW; i++)&#123;</span><br><span class="line">		board[i] &#x3D; new Array();</span><br><span class="line">		for(let j &#x3D; 0; j &lt; COL; j++)&#123;</span><br><span class="line">		    board[i][j] &#x3D; 0;</span><br><span class="line">		    $(&quot;#game&quot;).append(&#39;&lt;div class&#x3D;&quot;default-cell&quot; id&#x3D;&quot;default-&#39; + i + &#39;-&#39; + j + &#39;&quot;&gt;&lt;&#x2F;div&gt;&#39;);</span><br><span class="line">		    $(&quot;#default-&quot; + i + &quot;-&quot; + j).css(&#123;</span><br><span class="line">		        &quot;width&quot;: CELL_SIZE,</span><br><span class="line">		        &quot;height&quot;: CELL_SIZE,</span><br><span class="line">		        &quot;top&quot;: getCellTop(i, j),</span><br><span class="line">		        &quot;left&quot;: getCellLeft(i, j)</span><br><span class="line">		    &#125;);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;获取方块到上方的距离</span><br><span class="line">function getCellTop(i, j)</span><br><span class="line">&#123;</span><br><span class="line">	return i * (CELL_SIZE + MARGIN) + MARGIN;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;获取方块到左边的距离</span><br><span class="line">function getCellLeft(i, j)</span><br><span class="line">&#123;</span><br><span class="line">	return j * (CELL_SIZE + MARGIN) + MARGIN;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;设置每个不同数字的方块颜色</span><br><span class="line">function getColorByNumber(number) &#123;</span><br><span class="line">	switch (number) &#123;</span><br><span class="line">		case 2: return &quot;#eee4da&quot;; break;</span><br><span class="line">		case 4: return &quot;#ede0c8&quot;; break;</span><br><span class="line">		case 8: return &quot;#f2b179&quot;; break;</span><br><span class="line">		case 16: return &quot;#f59563&quot;; break;</span><br><span class="line">		case 32: return &quot;#f67c5f&quot;; break;</span><br><span class="line">		case 64: return &quot;#f65e3b&quot;; break;</span><br><span class="line">		case 128: return &quot;#edcf72&quot;; break;</span><br><span class="line">		case 256: return &quot;#edcc61&quot;; break;</span><br><span class="line">		case 512: return &quot;#9c0&quot;; break;</span><br><span class="line">		case 1024: return &quot;#33b5e5&quot;; break;</span><br><span class="line">		case 2048: return &quot;#09c&quot;; break;</span><br><span class="line">		case 4096: return &quot;#a6c&quot;; break;</span><br><span class="line">		case 8192: return &quot;#93c&quot;; break;</span><br><span class="line">		default: return &#39;break&#39;;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<hr>
<h2 id="三、C-版本代码展示-1"><a href="#三、C-版本代码展示-1" class="headerlink" title="三、C++版本代码展示"></a><span id="3">三、C++版本代码展示</span></h2><ul>
<li><p>Game.h</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">#pragma once</span><br><span class="line">constexpr int COL &#x3D; 4;</span><br><span class="line">constexpr int ROW &#x3D; 4;</span><br><span class="line">constexpr int GAME_OVER &#x3D; -1;</span><br><span class="line">constexpr int GAME_WIN &#x3D; 1;</span><br><span class="line">constexpr int GAME_CON &#x3D; 0;</span><br><span class="line"></span><br><span class="line">class Game</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">	Game();</span><br><span class="line">	~Game();</span><br><span class="line">	void moveUp();</span><br><span class="line">	void moveDown();</span><br><span class="line">	void moveLeft();</span><br><span class="line">	void moveRight();</span><br><span class="line">	bool check2048();</span><br><span class="line">	bool allCheck();</span><br><span class="line">	void newGrid();</span><br><span class="line">	void Print();</span><br><span class="line">	void Input();</span><br><span class="line">private:</span><br><span class="line">	int (*Grid)[ROW];</span><br><span class="line">	int game &#x3D; GAME_CON;</span><br><span class="line">	int ua[2], rl[2]; &#x2F;&#x2F;ua记录数值作比较， rl记录行数方便合并</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
</li>
<li><p>Game.cpp</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br></pre></td><td class="code"><pre><span class="line">#include &quot;Game.h&quot;</span><br><span class="line">#include &lt;iostream&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">#include &lt;stdlib.h&gt;</span><br><span class="line">#include &lt;time.h&gt;</span><br><span class="line">#include &lt;conio.h&gt;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;can&#x3D;false --&gt; show()（无变化）--&gt;continue</span><br><span class="line">&#x2F;&#x2F;                                             allCheck()&#x3D;&#x3D;true&#x3D;&#x3D;over  --&gt;show() --&gt;over      </span><br><span class="line">&#x2F;&#x2F;move --&gt; check2084 --没到2084--&gt; newGrid --&gt; allCheck()&#x3D;&#x3D;false&#x3D;&#x3D;continue --&gt; show() --&gt;continue</span><br><span class="line">&#x2F;&#x2F;                   --到2084--&gt; game&#x3D;GAME_WIN --&gt; show() --&gt;win</span><br><span class="line"></span><br><span class="line">Game::Game()</span><br><span class="line">&#123;</span><br><span class="line">	Grid &#x3D; new int[ROW][COL];</span><br><span class="line">	for (int i &#x3D; 0; i &lt; ROW; i++)</span><br><span class="line">		for (int j &#x3D; 0; j &lt; COL; j++)</span><br><span class="line">			Grid[i][j] &#x3D; 0;</span><br><span class="line">	for(int i &#x3D; 0; i &lt; 2; i++)</span><br><span class="line">		newGrid();</span><br><span class="line">	Print();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Game::~Game()</span><br><span class="line">&#123;</span><br><span class="line">	delete[]Grid;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void Game::moveUp()</span><br><span class="line">&#123;</span><br><span class="line">	&#x2F;*合并注意事项</span><br><span class="line">	  1.不能合并的情况：堆在一起且无可合并的格子</span><br><span class="line">	  2.每次合并时合并相邻的两个，不可多合并*&#x2F;</span><br><span class="line">	bool can &#x3D; false;</span><br><span class="line"></span><br><span class="line">	&#x2F;* &#x2F;&#x2F;先移动</span><br><span class="line">	for (int col &#x3D; 0; col &lt; col; col++)</span><br><span class="line">		for (int row &#x3D; 1; row &lt; row; row++)</span><br><span class="line">			if (grid[row][col] !&#x3D; 0)</span><br><span class="line">				for (int i &#x3D; 0; i &lt; row; i++)</span><br><span class="line">					if (!grid[i][col]) &#123;</span><br><span class="line">						grid[i][col] &#x3D; grid[row][col];</span><br><span class="line">						grid[row][col] &#x3D; 0;</span><br><span class="line">						can &#x3D; true;</span><br><span class="line">						break;</span><br><span class="line">					&#125;</span><br><span class="line"></span><br><span class="line">	&#x2F;&#x2F;再合并</span><br><span class="line">	for (int col &#x3D; 0; col &lt; col; col++)</span><br><span class="line">		for (int row &#x3D; 0; row &lt; row - 1; row++)</span><br><span class="line">			if (grid[row][col] &#x3D;&#x3D; grid[row + 1][col]) &#123;</span><br><span class="line">				grid[row][col] *&#x3D; 2;</span><br><span class="line">				grid[row + 1][col] &#x3D; 0;</span><br><span class="line">				can &#x3D; true;</span><br><span class="line">				for (int i &#x3D; row + 1; i &lt; row - 1; i++)</span><br><span class="line">					grid[i][col] &#x3D; grid[i + 1][col];</span><br><span class="line">				grid[row - 1][col] &#x3D; 0;</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">	&#x2F;&#x2F;若满足合并条件且游戏未结束，则新建格子</span><br><span class="line">	if (check() &amp;&amp; can)</span><br><span class="line">		newgrid();</span><br><span class="line">	*&#x2F;</span><br><span class="line">	&#x2F;&#x2F;先合并</span><br><span class="line">	for (int col &#x3D; 0; col &lt; COL; col++) &#123;</span><br><span class="line">		int num_ua &#x3D; 0;</span><br><span class="line">		int num_rl &#x3D; 0;</span><br><span class="line">		for (int row &#x3D; 0; row &lt; ROW; row++) &#123;</span><br><span class="line">			if (Grid[row][col] !&#x3D; 0) &#123;</span><br><span class="line">				ua[num_ua++] &#x3D; Grid[row][col];</span><br><span class="line">				rl[num_rl++] &#x3D; row;</span><br><span class="line">			&#125;</span><br><span class="line">			if (num_ua &#x3D;&#x3D; 2) &#123;</span><br><span class="line">				if (ua[0] &#x3D;&#x3D; ua[1]) &#123;</span><br><span class="line">					Grid[rl[0]][col] &#x3D; ua[0] * 2;</span><br><span class="line">					Grid[rl[1]][col] &#x3D; 0;</span><br><span class="line">					can &#x3D; true;</span><br><span class="line">				&#125;</span><br><span class="line">				else &#123;</span><br><span class="line">					num_ua--;</span><br><span class="line">					num_rl--;</span><br><span class="line">					ua[num_ua - 1] &#x3D; ua[num_ua];</span><br><span class="line">					rl[num_rl - 1] &#x3D; rl[num_rl];</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">				</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	&#x2F;&#x2F;再移动</span><br><span class="line">	for (int col &#x3D; 0; col &lt; COL; col++)</span><br><span class="line">		for (int row &#x3D; 1; row &lt; ROW; row++)</span><br><span class="line">			if (Grid[row][col] !&#x3D; 0)</span><br><span class="line">				for (int i &#x3D; 0; i &lt; row; i++)</span><br><span class="line">					if (Grid[i][col] &#x3D;&#x3D; 0) &#123;</span><br><span class="line">						Grid[i][col] &#x3D; Grid[row][col];</span><br><span class="line">						Grid[row][col] &#x3D; 0;</span><br><span class="line">						can &#x3D; true;</span><br><span class="line">						break;</span><br><span class="line">					&#125;</span><br><span class="line"></span><br><span class="line">	&#x2F;&#x2F;若满足合并条件且游戏未结束，则新建格子</span><br><span class="line">	if (!check2048() &amp;&amp; can)</span><br><span class="line">		newGrid();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void Game::moveDown()</span><br><span class="line">&#123;</span><br><span class="line">	bool can &#x3D; false;</span><br><span class="line"></span><br><span class="line">	&#x2F;&#x2F;先合并</span><br><span class="line">	for (int col &#x3D; 0; col &lt; COL; col++) &#123;</span><br><span class="line">		int num_ua &#x3D; 0;</span><br><span class="line">		int num_rl &#x3D; 0;</span><br><span class="line">		for (int row &#x3D; ROW - 1; row &gt;&#x3D; 0; row--) &#123;</span><br><span class="line">			if (Grid[row][col] !&#x3D; 0) &#123;</span><br><span class="line">				ua[num_ua++] &#x3D; Grid[row][col];</span><br><span class="line">				rl[num_rl++] &#x3D; row;</span><br><span class="line">			&#125;</span><br><span class="line">			if (num_ua &#x3D;&#x3D; 2) &#123;</span><br><span class="line">				if (ua[0] &#x3D;&#x3D; ua[1]) &#123;</span><br><span class="line">					Grid[rl[0]][col] &#x3D; ua[0] * 2;</span><br><span class="line">					Grid[rl[1]][col] &#x3D; 0;</span><br><span class="line">					can &#x3D; true;</span><br><span class="line">				&#125;</span><br><span class="line">				else &#123;</span><br><span class="line">					num_ua--;</span><br><span class="line">					num_rl--;</span><br><span class="line">					ua[num_ua - 1] &#x3D; ua[num_ua];</span><br><span class="line">					rl[num_rl - 1] &#x3D; rl[num_rl];</span><br><span class="line">				&#125;</span><br><span class="line">				</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	&#x2F;&#x2F;再移动</span><br><span class="line">	for(int col &#x3D; 0; col &lt; COL; col++)</span><br><span class="line">		for(int row &#x3D; ROW - 2; row &gt;&#x3D; 0; row--)</span><br><span class="line">			if(Grid[row][col] !&#x3D; 0)</span><br><span class="line">				for (int i &#x3D; ROW - 1; i &gt; row; i--)</span><br><span class="line">					if (Grid[i][col] &#x3D;&#x3D; 0) &#123;</span><br><span class="line">						Grid[i][col] &#x3D; Grid[row][col];</span><br><span class="line">						Grid[row][col] &#x3D; 0;</span><br><span class="line">						can &#x3D; true;</span><br><span class="line">						break;</span><br><span class="line">					&#125;</span><br><span class="line">	</span><br><span class="line">	if (!check2048() &amp;&amp; can)</span><br><span class="line">		newGrid();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void Game::moveLeft()</span><br><span class="line">&#123;</span><br><span class="line">	bool can &#x3D; false;</span><br><span class="line"></span><br><span class="line">	&#x2F;&#x2F;先合并</span><br><span class="line">	for (int row &#x3D; 0; row &lt; ROW; row++) &#123;</span><br><span class="line">		int temp &#x3D; 0;</span><br><span class="line">		int c1;</span><br><span class="line">		for (int col &#x3D; 0; col &lt; COL; col++)</span><br><span class="line">			if (Grid[row][col])</span><br><span class="line">				if (temp !&#x3D; Grid[row][col]) &#123;</span><br><span class="line">					temp &#x3D; Grid[row][col];</span><br><span class="line">					c1 &#x3D; col;</span><br><span class="line">				&#125;</span><br><span class="line">				else &#123;</span><br><span class="line">					Grid[row][c1] &#x3D; temp * 2;</span><br><span class="line">					Grid[row][col] &#x3D; 0;</span><br><span class="line">					can &#x3D; true;</span><br><span class="line">					temp &#x3D; 0;</span><br><span class="line">				&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	&#x2F;&#x2F;再移动</span><br><span class="line">	for(int row &#x3D; 0; row &lt; ROW; row++)</span><br><span class="line">		for(int col &#x3D; 1; col &lt; COL; col++)</span><br><span class="line">			if(Grid[row][col])</span><br><span class="line">				for(int i &#x3D; 0; i &lt; col; i++)</span><br><span class="line">					if (Grid[row][i] &#x3D;&#x3D; 0) &#123;</span><br><span class="line">						Grid[row][i] &#x3D; Grid[row][col];</span><br><span class="line">						Grid[row][col] &#x3D; 0;</span><br><span class="line">						can &#x3D; true;</span><br><span class="line">						break;</span><br><span class="line">					&#125;</span><br><span class="line"></span><br><span class="line">	if (!check2048() &amp;&amp; can)</span><br><span class="line">		newGrid();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void Game::moveRight()</span><br><span class="line">&#123;</span><br><span class="line">	bool can &#x3D; false;</span><br><span class="line"></span><br><span class="line">	&#x2F;&#x2F;先合并</span><br><span class="line">	for (int row &#x3D; 0; row &lt; ROW; row++) &#123;</span><br><span class="line">		int temp &#x3D; 0;</span><br><span class="line">		int c1;</span><br><span class="line">		for(int col &#x3D; COL - 1; col &gt;&#x3D; 0; col--)</span><br><span class="line">			if (Grid[row][col])</span><br><span class="line">				if (Grid[row][col] !&#x3D; temp) &#123;</span><br><span class="line">					temp &#x3D; Grid[row][col];</span><br><span class="line">					c1 &#x3D; col;</span><br><span class="line">				&#125;</span><br><span class="line">				else &#123;</span><br><span class="line">					Grid[row][c1] &#x3D; temp * 2;</span><br><span class="line">					Grid[row][col] &#x3D; 0;</span><br><span class="line">					can &#x3D; true;</span><br><span class="line">					temp &#x3D; 0;</span><br><span class="line">				&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	&#x2F;&#x2F;再平移</span><br><span class="line">	for(int row &#x3D; 0; row &lt; ROW; row++)</span><br><span class="line">		for(int col &#x3D; COL - 2; col &gt;&#x3D; 0; col--)</span><br><span class="line">			if(Grid[row][col])</span><br><span class="line">				for(int i &#x3D; COL - 1; i &gt; col; i--)</span><br><span class="line">					if (Grid[row][i] &#x3D;&#x3D; 0) &#123;</span><br><span class="line">						Grid[row][i] &#x3D; Grid[row][col];</span><br><span class="line">						Grid[row][col] &#x3D; 0;</span><br><span class="line">						can &#x3D; true;</span><br><span class="line">						break;</span><br><span class="line">					&#125;</span><br><span class="line"></span><br><span class="line">	if (!check2048() &amp;&amp; can)</span><br><span class="line">		newGrid();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">bool Game::check2048()</span><br><span class="line">&#123;</span><br><span class="line">	int max &#x3D; 0;</span><br><span class="line">	for (int row &#x3D; 0; row &lt; ROW; row++)</span><br><span class="line">		for (int col &#x3D; 0; col &lt; COL; col++)</span><br><span class="line">			if (Grid[row][col] &gt; max)</span><br><span class="line">				max &#x3D; Grid[row][col];</span><br><span class="line">	if (max &#x3D;&#x3D; 2048) &#123;</span><br><span class="line">		game &#x3D; GAME_WIN;</span><br><span class="line">		return true;</span><br><span class="line">	&#125;</span><br><span class="line">	else &#123;</span><br><span class="line">		game &#x3D; GAME_CON;</span><br><span class="line">		return false;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">bool Game::allCheck()</span><br><span class="line">&#123;</span><br><span class="line">	&#x2F;&#x2F;有没有空格</span><br><span class="line">	for(int row &#x3D; 0; row &lt; ROW; row++)</span><br><span class="line">		for(int col &#x3D; 0; col &lt; COL; col++)</span><br><span class="line">			if (Grid[row][col] &#x3D;&#x3D; 0) &#123;</span><br><span class="line">				game &#x3D; GAME_CON;</span><br><span class="line">				return false;</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">	&#x2F;&#x2F;横向检查有没有相邻可合并的格子</span><br><span class="line">	for(int row &#x3D; 0; row &lt; ROW; row++)</span><br><span class="line">		for(int col &#x3D; 0; col &lt; COL - 1; col++)</span><br><span class="line">			if (Grid[row][col] &#x3D;&#x3D; Grid[row][col + 1]) &#123;</span><br><span class="line">				game &#x3D; GAME_CON;</span><br><span class="line">				return false;</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">	&#x2F;&#x2F;纵向检查有没有相邻可合并的格子</span><br><span class="line">	for(int row &#x3D; 0; row &lt; ROW - 1; row++)</span><br><span class="line">		for(int col &#x3D; 0; col &lt; COL; col++)</span><br><span class="line">			if (Grid[row][col] &#x3D;&#x3D; Grid[row + 1][col]) &#123;</span><br><span class="line">				game &#x3D; GAME_CON;</span><br><span class="line">				return false;</span><br><span class="line">			&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void Game::newGrid()</span><br><span class="line">&#123;</span><br><span class="line">	srand(int(time(0)));</span><br><span class="line">	int num &#x3D; rand() % 20 &#x3D;&#x3D; 1 ? 4 : 2;</span><br><span class="line">	</span><br><span class="line">	int x, y;</span><br><span class="line">	do &#123;</span><br><span class="line">		x &#x3D; rand() % ROW;</span><br><span class="line">		y &#x3D; rand() % COL;</span><br><span class="line">	&#125; while (Grid[x][y] !&#x3D; 0);</span><br><span class="line">	Grid[x][y] &#x3D; num;</span><br><span class="line"></span><br><span class="line">	if (allCheck())</span><br><span class="line">		game &#x3D; GAME_OVER;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void Game::Input()</span><br><span class="line">&#123;</span><br><span class="line">	&#x2F;&#x2F;if (game &#x3D;&#x3D; GAME_OVER)</span><br><span class="line">	&#x2F;&#x2F;	return;</span><br><span class="line">	&#x2F;&#x2F;if (!_kbhit())</span><br><span class="line">	&#x2F;&#x2F;	return;</span><br><span class="line">	switch (_getch()) &#123;</span><br><span class="line">		case &#39;w&#39;:</span><br><span class="line">		case &#39;W&#39;:</span><br><span class="line">			moveUp();</span><br><span class="line">			break;</span><br><span class="line">	</span><br><span class="line">		case &#39;s&#39;:</span><br><span class="line">		case &#39;S&#39;:</span><br><span class="line">			moveDown();</span><br><span class="line">			break;</span><br><span class="line">	</span><br><span class="line">		case &#39;a&#39;:</span><br><span class="line">		case &#39;A&#39;:</span><br><span class="line">			moveLeft();</span><br><span class="line">			break;</span><br><span class="line">	</span><br><span class="line">		case &#39;d&#39;:</span><br><span class="line">		case &#39;D&#39;:</span><br><span class="line">			moveRight();</span><br><span class="line">			break;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void Game::Print()</span><br><span class="line">&#123;</span><br><span class="line">	</span><br><span class="line">	cout &lt;&lt; &quot;**********    2048 游 戏    **********&quot; &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; &quot;**************************************&quot; &lt;&lt; endl &lt;&lt; endl;</span><br><span class="line">	if (game &#x3D;&#x3D; GAME_WIN) &#123;</span><br><span class="line">		cout &lt;&lt; &quot;Congratulations!!   You Win!!&quot; &lt;&lt; endl;</span><br><span class="line">	&#125;</span><br><span class="line">	else if (game &#x3D;&#x3D; GAME_OVER) &#123;</span><br><span class="line">		cout &lt;&lt; &quot;What a pity... Do It Again!&quot; &lt;&lt; endl;</span><br><span class="line">	&#125;</span><br><span class="line">	else &#123;</span><br><span class="line">		for (int i &#x3D; 0; i &lt; ROW; ++i)&#123;</span><br><span class="line">			cout &lt;&lt; &quot;---------------------------------&quot; &lt;&lt; endl;</span><br><span class="line">			for (int j &#x3D; 0; j &lt; COL; ++j)&#123;</span><br><span class="line">				if (Grid[i][j] &#x3D;&#x3D; 0)</span><br><span class="line">				&#123;</span><br><span class="line">					cout &lt;&lt; &quot;|   \t&quot;;</span><br><span class="line">				&#125;</span><br><span class="line">				else</span><br><span class="line">				&#123;</span><br><span class="line">					cout &lt;&lt; &quot;|   &quot; &lt;&lt; Grid[i][j] &lt;&lt; &quot;\t&quot;;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">			cout &lt;&lt; &quot;|&quot; &lt;&lt; endl;</span><br><span class="line">		&#125;</span><br><span class="line">		cout &lt;&lt; &quot;---------------------------------&quot; &lt;&lt; endl;</span><br><span class="line">		return;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>main.cpp</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">#include &quot;Game.h&quot;</span><br><span class="line">#include &lt;Windows.h&gt;</span><br><span class="line"></span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">	Game g;</span><br><span class="line">	int i &#x3D; 1;</span><br><span class="line">	while (true) &#123;</span><br><span class="line">		g.Input();</span><br><span class="line">		system(&quot;cls&quot;);</span><br><span class="line">		g.Print();</span><br><span class="line">		Sleep(30);</span><br><span class="line">	&#125;</span><br><span class="line">	return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>

      
    </div>

    
	
	

	
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2019/09/03/JS%E5%AD%A6%E4%B9%A0%E7%9F%A5%E8%AF%86%E6%80%BB%E7%BB%93/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Olivia">
      <meta itemprop="description" content="May All Your Troubles Be little Ones">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Olivia的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/09/03/JS%E5%AD%A6%E4%B9%A0%E7%9F%A5%E8%AF%86%E6%80%BB%E7%BB%93/" class="post-title-link" itemprop="url">JS基础知识总结</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-09-03 20:50:03" itemprop="dateCreated datePublished" datetime="2019-09-03T20:50:03+08:00">2019-09-03</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-05-01 14:37:06" itemprop="dateModified" datetime="2021-05-01T14:37:06+08:00">2021-05-01</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/JavaScript/" itemprop="url" rel="index"><span itemprop="name">JavaScript</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <span id="more"></span>
<font size=3 face= "微软雅黑" color="darkred">
　　早就想学习JS了，正好又有课设要做，就学习了JS，但是看着网课学习的东西我觉得并不是很全面，但是基本的学到了，还需要继续深入学习，所以就把学习到的JS先整理下来，后期会慢慢整理学到的 HTML5 和 CSS。</font>

<blockquote>
<h2 id="目录"><a href="#目录" class="headerlink" title="目录"></a><em>目录</em></h2><h3 id="一、JS实现、变量"><a href="#一、JS实现、变量" class="headerlink" title="一、JS实现、变量"></a><em><a href="#1">一、JS实现、变量</a></em></h3><h3 id="二、JS异常捕获、事件"><a href="#二、JS异常捕获、事件" class="headerlink" title="二、JS异常捕获、事件"></a><em><a href="#2">二、JS异常捕获、事件</a></em></h3><h3 id="三、DOM操作HTML、CSS、EventListener"><a href="#三、DOM操作HTML、CSS、EventListener" class="headerlink" title="三、DOM操作HTML、CSS、EventListener"></a><em><a href="#3">三、DOM操作HTML、CSS、EventListener</a></em></h3><h3 id="四、JS事件详解、事件流、事件处理、事件对象"><a href="#四、JS事件详解、事件流、事件处理、事件对象" class="headerlink" title="四、JS事件详解、事件流、事件处理、事件对象"></a><em><a href="#4">四、JS事件详解、事件流、事件处理、事件对象</a></em></h3><h3 id="五、事件对象"><a href="#五、事件对象" class="headerlink" title="五、事件对象"></a><em><a href="#5">五、事件对象</a></em></h3><ul>
<li><em><a href="#5.1">对象</a></em></li>
<li><em><a href="#5.2">string对象</a></em></li>
<li><em><a href="#5.3">data日期对象</a></em></li>
<li><em><a href="#5.4">Array数组对象</a></em></li>
<li><em><a href="#5.5">Math对象</a></em></li>
</ul>
<h3 id="六、DOM对象控制HTML"><a href="#六、DOM对象控制HTML" class="headerlink" title="六、DOM对象控制HTML"></a><em><a href="#6">六、DOM对象控制HTML</a></em></h3><h3 id="七、JS浏览器对象"><a href="#七、JS浏览器对象" class="headerlink" title="七、JS浏览器对象"></a><em><a href="#7">七、JS浏览器对象</a></em></h3><ul>
<li><em><a href="#7.1">Window对象</a></em></li>
<li><em><a href="#7.2">计时器对象</a></em></li>
<li><em><a href="#7.3">History对象</a></em></li>
<li><em><a href="#7.4">Location对象</a></em></li>
<li><em><a href="#7.5">screen对象</a></em></li>
</ul>
<h3 id="八、面向对象"><a href="#八、面向对象" class="headerlink" title="八、面向对象"></a><em><a href="#8">八、面向对象</a></em></h3><h3 id="九、后记"><a href="#九、后记" class="headerlink" title="九、后记"></a><em><a href="#9">九、后记</a></em></h3></blockquote>
<hr>
<h2 id="一、JS实现、变量-1"><a href="#一、JS实现、变量-1" class="headerlink" title="一、JS实现、变量"></a><span id="1">一、JS实现、变量</span></h2><h3 id="1-JS实现"><a href="#1-JS实现" class="headerlink" title="1. JS实现"></a>1. JS实现</h3><ul>
<li><p>JS用法</p>
<blockquote>
<p>HTML中的脚本必须位于<code>&lt;script&gt;&lt;/script&gt;</code>标签之间<br>脚本可被放置在HTML页面中<code>&lt;body&gt;&lt;/body&gt;</code>和<code>&lt;head&gt;</code>部分中  </p>
</blockquote>
</li>
<li><p>JS标签</p>
<blockquote>
<p>在HTML中插入JS，使用<code>&lt;script&gt;</code>标签<br>在<code>&lt;script&gt;&lt;/script&gt;</code>中书写代码</p>
</blockquote>
</li>
<li><p>JS使用限制</p>
<blockquote>
<p>在HTML中，不限制脚本数量<br>通常把脚本放置于<code>&lt;head&gt;</code>标签中，以免干扰页面内容</p>
</blockquote>
</li>
</ul>
<h3 id="2-JS变量"><a href="#2-JS变量" class="headerlink" title="2. JS变量"></a>2. JS变量</h3><ul>
<li><blockquote>
<p>用var来声明，例var i = 10; 后面讲解 var 和 let 区别  </p>
</blockquote>
</li>
<li>数据类型  <ol>
<li>字符串（string）</li>
<li>数字(number)</li>
<li>布尔值(boolean)</li>
<li>数组(Array) <br><blockquote>
<p>声明数组的方法<br>（1）var arr[1, 3, 2, 4];<br>（2）var arr = new Array(“miao”, “wong”);<br>（3）var arr = new Array; arr[0] = 10; arr[1] = 20; …..</p>
</blockquote>
</li>
<li>对象(Object)</li>
<li>空(null)</li>
<li>未定义</li>
<li>可通过赋值为null的方式消除变量</li>
</ol>
</li>
<li><p>var 和 let 区别</p>
<ol>
<li><p>全局变量：</p>
<blockquote>
<p>在函数外声明的变量，在JavaScript程序的任何地方都可以访问。  </p>
</blockquote>
</li>
<li><p>局部变量：</p>
<blockquote>
<p>在函数内声明的变量的作用域是局部的，函数内使用 var 声明的变量只能在函数内部访问，如果不使用 var 则是全局变量  </p>
</blockquote>
</li>
<li><p>块级作用域：  </p>
<blockquote>
<p>使用 var 关键字声明的变量不具备块级作用域的特性，它在 {} 外依然能被访问到。</p>
</blockquote>
</li>
<li><p>重新定义变量</p>
<blockquote>
<p>var：在块中重新声明变量，也会重新声明变量块外的变量<br>let：let命令只在所在的代码块 {} 内有效</p>
</blockquote>
</li>
<li><p>var 和 let 局部变量</p>
<blockquote>
<p>在函数体内声明的变量 var 和 let 的作用域都是局部的</p>
</blockquote>
</li>
<li><p>var 和 let 全局变量</p>
<blockquote>
<p>在 函数体外 或 代码块外 使用 var 和 let 关键字声明的变量的作用域是全局的。</p>
</blockquote>
</li>
<li><p>HTML代码中使用全局变量</p>
<blockquote>
<ol>
<li>在JavaScript中，全局作用域是针对JavaScript环境。  </li>
<li>在HTML中，全局作用域是针对window对象  </li>
<li>使用 var 关键字的全局作用域是属于window对象。var i = 10; 可以使用 window.i 访问变量。  </li>
<li>使用let关键字声明的全局作用域变量不属于window对象。</li>
</ol>
</blockquote>
</li>
<li><p>重置变量</p>
<blockquote>
<ol>
<li>在相同的作用域或块级作用域中，不能使用 let 关键字来重置 var 关键字声明的变量。  </li>
<li>在相同的作用域或块级作用域中，不能使用 let 关键字来重置 let 关键字声明的变量。  </li>
<li>在相同的作用域或块级作用域中，不能使用 var 关键字来重置 let 关键字声明的变量。  </li>
<li>let 关键字在不同作用域，或不同块级作用域中是可以重新声明赋值的。  </li>
</ol>
</blockquote>
</li>
<li><p>变量提升</p>
<blockquote>
<p>var：定义的变量可以在使用后声明，也就是变量可以先使用再声明。<br>let：定义的变量则不可以在使用后声明，也就是变量需要先声明再使用。</p>
</blockquote>
</li>
</ol>
</li>
<li><p>this指针</p>
<blockquote>
<p>在方法中，this表示该方法所属的对象。<br>如果单独使用，this表示全局对象。<br>在函数中，this表示全局对象。<br>在函数中，在严格模式下，this是未定义的（undefined）。<br>在事件中，this表示接收事件的元素<br>类似 call() 和 apply() 方法可以将this引用到任何对象<br>（<em>详情见菜鸟教程</em>）</p>
</blockquote>
</li>
</ul>
<hr>
<h2 id="二、JS异常捕获、事件-1"><a href="#二、JS异常捕获、事件-1" class="headerlink" title="二、JS异常捕获、事件"></a><span id="2">二、JS异常捕获、事件</span></h2><h3 id="1-JS异常捕获"><a href="#1-JS异常捕获" class="headerlink" title="1. JS异常捕获"></a>1. JS异常捕获</h3><ul>
<li><p>try 和 catch</p>
<blockquote>
<p>try：在执行时进行错误，需要测试的代码块<br>catch：当try代码块发生错误时所执行的代码<br>try 和 catch 是成对出现的</p>
</blockquote>
<p>  1.语法</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">try&#123;</span><br><span class="line">	...  &#x2F;&#x2F;异常的抛出</span><br><span class="line">&#125; catch(err)&#123;</span><br><span class="line">	...  &#x2F;&#x2F;异常的捕获与处理</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>  2.实例</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">	&lt;head&gt;</span><br><span class="line">		&lt;meta charset&#x3D;&quot;UTF-8&quot;&gt;</span><br><span class="line">		&lt;title&gt;JS异常捕获&lt;&#x2F;title&gt;</span><br><span class="line">	&lt;&#x2F;head&gt;</span><br><span class="line">	&lt;body&gt;</span><br><span class="line">		&lt;button onclick&#x3D;&quot;demo()&quot;&gt;按钮&lt;&#x2F;button&gt;</span><br><span class="line">		&lt;script&gt;</span><br><span class="line">			function demo()&#123;</span><br><span class="line">				try&#123;</span><br><span class="line">					adddlert(&quot;hello&quot;);</span><br><span class="line">				&#125; catch(err)&#123;</span><br><span class="line">					alert(err);</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&lt;&#x2F;script&gt;</span><br><span class="line">	&lt;&#x2F;body&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure></li>
<li><p>throw语句</p>
<blockquote>
<p>允许创建自定义错误<br>可以把 throw 与 try 和 catch 一起使用</p>
</blockquote>
<ol>
<li><p>实例</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang&#x3D;&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">  		&lt;meta charset&#x3D;&quot;UTF-8&quot;&gt;</span><br><span class="line">  		&lt;title&gt;JS异常捕获&lt;&#x2F;title&gt;</span><br><span class="line">&lt;&#x2F;head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">  		&lt;form&gt;</span><br><span class="line">      		&lt;input id&#x3D;&quot;txt&quot; type&#x3D;&quot;text&quot;&gt;</span><br><span class="line">      		&lt;input id&#x3D;&quot;btn&quot; type&#x3D;&quot;button&quot; onclick&#x3D;&quot;demo()&quot; value&#x3D;&quot;按钮&quot;&gt;</span><br><span class="line">  		&lt;&#x2F;form&gt;</span><br><span class="line">  		&lt;script&gt;</span><br><span class="line">      		function demo()&#123;</span><br><span class="line">          		try&#123;</span><br><span class="line">              		var e &#x3D; document.getElementById(&quot;txt&quot;).value;</span><br><span class="line">              		if(e&#x3D;&#x3D;&quot;&quot;)&#123;</span><br><span class="line">                  		throw&quot;请输入&quot;;</span><br><span class="line">              		&#125;</span><br><span class="line">          		&#125;catch(err)&#123;</span><br><span class="line">              		alert(err);  &#x2F;&#x2F;将throw中的内容扔到err处</span><br><span class="line">          		&#125;</span><br><span class="line">      		&#125;</span><br><span class="line">  		&lt;&#x2F;script&gt;</span><br><span class="line">&lt;&#x2F;body&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
</ul>
<h3 id="2-JS事件"><a href="#2-JS事件" class="headerlink" title="2. JS事件"></a>2. JS事件</h3><ul>
<li>经常用到的事件</li>
</ul>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">事件（都是小写）</th>
<th style="text-align:center">作用</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">onClick</td>
<td style="text-align:center">单击事件</td>
</tr>
<tr>
<td style="text-align:center">onMouseOver</td>
<td style="text-align:center">鼠标经过事件</td>
</tr>
<tr>
<td style="text-align:center">onMouseOut</td>
<td style="text-align:center">鼠标移出事件</td>
</tr>
<tr>
<td style="text-align:center">onChange</td>
<td style="text-align:center">文本内容改变事件</td>
</tr>
<tr>
<td style="text-align:center">onSelect</td>
<td style="text-align:center">文本框选中事件</td>
</tr>
<tr>
<td style="text-align:center">onFocus</td>
<td style="text-align:center">光标聚集事件</td>
</tr>
<tr>
<td style="text-align:center">onBlur</td>
<td style="text-align:center">移开光标事件</td>
</tr>
<tr>
<td style="text-align:center">onLoad</td>
<td style="text-align:center">网页加载事件</td>
</tr>
<tr>
<td style="text-align:center">onUnLoad</td>
<td style="text-align:center">网页关闭事件</td>
</tr>
</tbody>
</table>
</div>
<ul>
<li>实例<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang&#x3D;&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset&#x3D;&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;JS事件&lt;&#x2F;title&gt;</span><br><span class="line">&lt;&#x2F;head&gt;</span><br><span class="line">&lt;body onload&#x3D;&quot;mgs()&quot;&gt;</span><br><span class="line">    &lt;!--onclick--&gt;</span><br><span class="line">    &lt;button onclick&#x3D;&quot;demo()&quot;&gt;按钮&lt;&#x2F;button&gt;</span><br><span class="line">    &lt;script&gt;</span><br><span class="line">        function demo()&#123;</span><br><span class="line">            alert(&quot;hello&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;&#x2F;script&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!--onMouseOver  onMouseOut--&gt;</span><br><span class="line">    &lt;div style&#x3D;&quot;width: 100px; height: 100px; background-color: cadetblue;&quot;</span><br><span class="line">         onmouseover&#x3D;&quot;onOver(this)&quot; onmouseout&#x3D;&quot;onOut(this)&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class="line">    &lt;script&gt;</span><br><span class="line">        function onOver(ooj)&#123;</span><br><span class="line">            ooj.innerHTML &#x3D; &quot;Hello&quot;;</span><br><span class="line">        &#125;</span><br><span class="line">        function onOut(ooj)&#123;</span><br><span class="line">            ooj.innerHTML &#x3D; &quot;World&quot;;</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;&#x2F;script&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!--onChange--&gt;</span><br><span class="line">    &lt;form&gt;</span><br><span class="line">        &lt;input type&#x3D;&quot;text&quot; onchange&#x3D;&quot;changeDemo1()&quot;&gt;</span><br><span class="line">    &lt;&#x2F;form&gt;</span><br><span class="line">    &lt;script&gt;</span><br><span class="line">        function changeDemo1()&#123;</span><br><span class="line">            alert(&quot;Hello, 内容改变了！&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;&#x2F;script&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!--onSelect  onfocus--&gt;</span><br><span class="line">    &lt;form&gt;</span><br><span class="line">        &lt;input type&#x3D;&quot;text&quot; onselect&#x3D;&quot;changeDemo(this)&quot; onfocus&#x3D;&quot;changeDemo2(this)&quot;&gt;</span><br><span class="line">    &lt;&#x2F;form&gt;</span><br><span class="line">    &lt;script&gt;</span><br><span class="line">        function changeDemo(bg)&#123;</span><br><span class="line">            bg.style.background&#x3D;&quot;red&quot;;</span><br><span class="line">        &#125;</span><br><span class="line">        function changeDemo2(bg)&#123;</span><br><span class="line">            bg.style.background&#x3D;&quot;blue&quot;;</span><br><span class="line">        &#125;</span><br><span class="line">        function mgs()&#123;</span><br><span class="line">            alert(&quot;网页内容加载完毕&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;&#x2F;script&gt;</span><br><span class="line">&lt;&#x2F;body&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<hr>
<h2 id="三、DOM操作HTML、CSS、EventListener-1"><a href="#三、DOM操作HTML、CSS、EventListener-1" class="headerlink" title="三、DOM操作HTML、CSS、EventListener"></a><span id="3">三、DOM操作HTML、CSS、EventListener</span></h2><h3 id="1-DOM操作HTML"><a href="#1-DOM操作HTML" class="headerlink" title="1. DOM操作HTML"></a>1. DOM操作HTML</h3><ul>
<li><p><strong>绝对不要在文档加载完成之后使用 <code>document.write()</code> 会覆盖整个文档</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;meta charset&#x3D;&quot;utf-8&quot;&gt;</span><br><span class="line">	&lt;title&gt;覆盖文档&lt;&#x2F;title&gt;</span><br><span class="line">&lt;&#x2F;head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;script&gt;</span><br><span class="line">        document.write(&quot;首先输出&quot;);</span><br><span class="line">    &lt;&#x2F;script&gt;</span><br><span class="line">    &lt;p&gt;请点击这&lt;&#x2F;p&gt;</span><br><span class="line">    &lt;br&#x2F;&gt;</span><br><span class="line">    &lt;input type&#x3D;&quot;button&quot; onclick&#x3D;&quot;test()&quot; value&#x3D;&quot;调用函数&quot;&#x2F;&gt;</span><br><span class="line">    &lt;script&gt;</span><br><span class="line">        function test()&#123;</span><br><span class="line">        	document.write(&quot;覆盖输出:&quot;);  &#x2F;&#x2F;点击后 首先输出 则被覆盖</span><br><span class="line">            document.write(Date());</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;&#x2F;script&gt;</span><br><span class="line">&lt;&#x2F;body&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>寻找元素</p>
<ol>
<li>通过 <strong>id</strong> 找到HTML元素：<code>document.getElementById(&quot;&quot;)</code> 。</li>
<li>通过 <strong>标签名</strong> 找到HTML元素：<code>getElementsByTagName(&quot;&quot;)</code> 。  </li>
</ol>
</li>
<li><p>改变HTML内容</p>
<blockquote>
<p>使用属性 innerHTML<br>例：document.getElementById(“”).innerHTML = “”  //“”中跟具体内容，若是其他的，则不需””。</p>
</blockquote>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset&#x3D;&quot;utf-8&quot;&gt;</span><br><span class="line">&lt;title&gt;改变HTML内容&lt;&#x2F;title&gt;</span><br><span class="line">&lt;&#x2F;head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">&lt;p id&#x3D;&quot;p1&quot;&gt;Hello World!&lt;&#x2F;p&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">document.getElementById(&quot;p1&quot;).innerHTML&#x3D;&quot;新文本!&quot;;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line">&lt;p&gt;以上段落通过脚本修改文本。&lt;&#x2F;p&gt;</span><br><span class="line"></span><br><span class="line">&lt;&#x2F;body&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>改变HTML属性</p>
<blockquote>
<p>使用语法 document.getElementById(“”).attribute = 新属性值;<br>例：document.getElementById(“id”).href=”www.baidu.com”;</p>
</blockquote>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang&#x3D;&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">   	&lt;meta charset&#x3D;&quot;UTF-8&quot;&gt;</span><br><span class="line">   	&lt;title&gt;JS操作HTML&lt;&#x2F;title&gt;</span><br><span class="line">&lt;&#x2F;head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">   	&lt;a id&#x3D;&quot;aid&quot; href&#x3D;&quot;http:&#x2F;&#x2F;www.baidu.com&quot;&gt;百度一下&lt;&#x2F;a&gt;</span><br><span class="line">   	&lt;button onclick&#x3D;&quot;demo()&quot;&gt;按钮&lt;&#x2F;button&gt;</span><br><span class="line">   	&lt;script&gt;</span><br><span class="line">       	function demo()&#123;</span><br><span class="line">           	document.getElementById(&quot;aid&quot;).href&#x3D;&quot;https:&#x2F;&#x2F;www.hao123.com&quot;;</span><br><span class="line">       	&#125;</span><br><span class="line">   	&lt;&#x2F;script&gt;</span><br><span class="line">&lt;&#x2F;body&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="2-DOM操作CSS"><a href="#2-DOM操作CSS" class="headerlink" title="2. DOM操作CSS"></a>2. DOM操作CSS</h3><ul>
<li><p>语法</p>
<blockquote>
<p>document.getElementById(“”).style.property=新样式</p>
</blockquote>
</li>
<li><p>实例</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;meta charset&#x3D;&quot;utf-8&quot;&gt;</span><br><span class="line">	&lt;title&gt;DOM操作CSS&lt;&#x2F;title&gt;</span><br><span class="line">&lt;&#x2F;head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">	&lt;h1 id&#x3D;&quot;id1&quot;&gt;我的标题 1&lt;&#x2F;h1&gt;</span><br><span class="line">	&lt;button type&#x3D;&quot;button&quot; onclick&#x3D;&quot;document.getElementById(&#39;id1&#39;).style.color&#x3D;&#39;red&#39;&quot;&gt;</span><br><span class="line">	点我!&lt;&#x2F;button&gt;</span><br><span class="line">	</span><br><span class="line">&lt;&#x2F;body&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>
<h3 id="3-DOM操作EventListener"><a href="#3-DOM操作EventListener" class="headerlink" title="3. DOM操作EventListener"></a>3. DOM操作EventListener</h3><ul>
<li><p>DOM EventListener 方法</p>
<blockquote>
<p>addEventListener()<br>removeEventListener()</p>
</blockquote>
<ol>
<li><p>addEventListener()</p>
<blockquote>
<p>向指定元素添加事件句柄，且不会覆盖整个文档<br>可以向一个元素添加多个事件句柄</p>
</blockquote>
</li>
<li><p>removeEventListener()</p>
<blockquote>
<p>移除方法添加的事件句柄</p>
</blockquote>
</li>
</ol>
</li>
<li><p><strong>addEventListener</strong></p>
<ol>
<li><p>语法</p>
<blockquote>
<p>element.addEventListener(event, function, useCapture);<br>第一个参数是事件类型（如”click”或”mousedown”）。<br>第二个参数是事件触发后调用的函数。<br>第三个参数是个布尔值用于描述事件是冒泡（false）还是捕获（true），该参数是可选的。</p>
</blockquote>
</li>
<li><p><strong>注意！</strong></p>
<ul>
<li><strong>事件类型不要使用 “on” 前缀，例如，使用”click”，而不是”onclick”。</strong></li>
<li><strong>调用函数不加括号，例如调用 mydemo() 函数，应该直接写成 mydemo。</strong></li>
</ul>
</li>
</ol>
</li>
<li><p>实例</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang&#x3D;&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">   	&lt;meta charset&#x3D;&quot;UTF-8&quot;&gt;</span><br><span class="line">   	&lt;title&gt;JS操作Dom EventListener&lt;&#x2F;title&gt;</span><br><span class="line">&lt;&#x2F;head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">	&lt;button id&#x3D;&quot;btn&quot;&gt;按钮&lt;&#x2F;button&gt;</span><br><span class="line">	&lt;script&gt;</span><br><span class="line">   		document.getElementById(&quot;btn&quot;).addEventListener(&quot;click&quot;, function()&#123;</span><br><span class="line">       	alert(&quot;hello&quot;);</span><br><span class="line">   		&#125;);</span><br><span class="line">	&lt;&#x2F;script&gt;</span><br><span class="line"></span><br><span class="line">	&lt;button id&#x3D;&quot;btnn&quot;&gt;按钮&lt;&#x2F;button&gt;</span><br><span class="line">	&lt;script&gt;</span><br><span class="line">   		var x &#x3D; document.getElementById(&quot;btnn&quot;);</span><br><span class="line">   		x.addEventListener(&quot;click&quot;, hello);</span><br><span class="line">   		x.addEventListener(&quot;click&quot;, world);</span><br><span class="line"></span><br><span class="line">   		function hello()&#123;</span><br><span class="line">       		alert(&quot;Hello&quot;);</span><br><span class="line">   		&#125;</span><br><span class="line">   		function world()&#123;</span><br><span class="line">       		alert(&quot;World&quot;);</span><br><span class="line">   		&#125;</span><br><span class="line">	&lt;&#x2F;script&gt;</span><br><span class="line">&lt;&#x2F;body&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<hr>
<h2 id="四、JS事件详解、事件流、事件处理、事件对象-1"><a href="#四、JS事件详解、事件流、事件处理、事件对象-1" class="headerlink" title="四、JS事件详解、事件流、事件处理、事件对象"></a><span id="4">四、JS事件详解、事件流、事件处理、事件对象</span></h2><h3 id="1-JS事件详解"><a href="#1-JS事件详解" class="headerlink" title="1. JS事件详解"></a>1. JS事件详解</h3><ul>
<li><p>事件流</p>
<blockquote>
<p>描述的是在页面中接受事件的顺序。</p>
</blockquote>
</li>
<li><p>事件冒泡</p>
<blockquote>
<p>由最具体的元素接收，然后逐级向上传播至最不具体的元素的节点（文档）。</p>
</blockquote>
</li>
<li><p>事件捕获</p>
<blockquote>
<p>最不具体的节点先接收事件，而最具体的节点应该是最后接收事件。</p>
</blockquote>
</li>
<li><p>实例</p>
<blockquote>
<p>将 p 元素插入到 div 元素中，用户点击 p 元素，观察哪个元素的 “click” 事件先被触发。</p>
<p>在 冒泡 中，p先  再div<br>在 捕获 中，div先 再p</p>
</blockquote>
</li>
</ul>
<h3 id="2-JS事件处理"><a href="#2-JS事件处理" class="headerlink" title="2. JS事件处理"></a>2. JS事件处理</h3><ul>
<li><p>HTML事件处理</p>
<blockquote>
<p>直接添加到HTML结构中（修改一处同时修改很多处）</p>
</blockquote>
</li>
<li><p>DOM 0级事件处理</p>
<blockquote>
<p>把一个函数赋值给一个 事件处理程序 属性（会被覆盖掉）<br>例 btn1.onclick = function(){}</p>
</blockquote>
</li>
<li><p>DOM 2级事件处理</p>
<blockquote>
<p>addEventListener() 和 removeEventListener</p>
</blockquote>
</li>
<li><p>IE事件处理程序（不同浏览器所支持的事件不同）</p>
<blockquote>
<p>attachEvent<br>detachEvent</p>
</blockquote>
</li>
<li><p>实例</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">	&lt;!DOCTYPE html&gt;</span><br><span class="line">	&lt;html lang&#x3D;&quot;en&quot;&gt;</span><br><span class="line">	&lt;head&gt;</span><br><span class="line">    	&lt;meta charset&#x3D;&quot;UTF-8&quot;&gt;</span><br><span class="line">    	&lt;title&gt;JS事件处理&lt;&#x2F;title&gt;</span><br><span class="line">	&lt;&#x2F;head&gt;</span><br><span class="line">	&lt;body&gt;</span><br><span class="line">    	&lt;div id&#x3D;&quot;div&quot;&gt;</span><br><span class="line">        	&lt;button id&#x3D;&quot;btn&quot;&gt;按钮&lt;&#x2F;button&gt;</span><br><span class="line">    	&lt;&#x2F;div&gt;</span><br><span class="line">	</span><br><span class="line">    &lt;!--HTML事件处理--&gt;</span><br><span class="line">	&lt;!--    &lt;script&gt;--&gt;</span><br><span class="line">	&lt;!--        function demo()&#123;--&gt;</span><br><span class="line">	&lt;!--            alert(&quot;hello HTML事件处理&quot;);--&gt;</span><br><span class="line">	&lt;!--        &#125;--&gt;</span><br><span class="line">	&lt;!--    &lt;&#x2F;script&gt;--&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!--DOM 0级事件处理--&gt;</span><br><span class="line">	&lt;!--    &lt;script&gt;--&gt;</span><br><span class="line">	&lt;!--        var btn1 &#x3D; document.getElementById(&quot;btn&quot;);--&gt;</span><br><span class="line">	&lt;!--        btn1.onclick &#x3D; function()&#123; alert(&quot;Hello DOM 0级事件处理1&quot;);&#125;;&#x2F;&#x2F;会被覆盖--&gt;</span><br><span class="line">	&lt;!--        btn1.onclick &#x3D; function()&#123; alert(&quot;Hello DOM 0级事件处理2&quot;);&#125;;--&gt;</span><br><span class="line">	&lt;!--    &lt;&#x2F;script&gt;--&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!--DOM 2级事件处理--&gt;</span><br><span class="line">	&lt;!--    &lt;script&gt;--&gt;</span><br><span class="line">	&lt;!--        var btn1 &#x3D; document.getElementById(&quot;btn&quot;).addEventListener(&quot;click&quot;, demo);--&gt;</span><br><span class="line">	&lt;!--        function demo()&#123;--&gt;</span><br><span class="line">	&lt;!--            alert(&quot;DOM 2级事件处理程序&quot;);--&gt;</span><br><span class="line">	&lt;!--        &#125;--&gt;</span><br><span class="line">	&lt;!--    &lt;&#x2F;script&gt;--&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!--IE事件处理程序--&gt;</span><br><span class="line">    &lt;script&gt;</span><br><span class="line">        var btn1 &#x3D; document.getElementById(&quot;btn&quot;);</span><br><span class="line">        if(btn1.addEventListener)&#123;</span><br><span class="line">            btn1.addEventListener(&quot;click&quot;, demo);</span><br><span class="line">        &#125;else if(btn1.attachEvent)&#123;</span><br><span class="line">            btn1.attachEvent(&quot;onclick&quot;, demo);</span><br><span class="line">        &#125;else&#123;</span><br><span class="line">            btn1.onclick &#x3D; demo();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        function demo()&#123;</span><br><span class="line">            alert(&quot;Hello IE事件处理程序&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;&#x2F;script&gt;</span><br><span class="line">&lt;&#x2F;body&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="3-JS事件对象"><a href="#3-JS事件对象" class="headerlink" title="3. JS事件对象"></a>3. JS事件对象</h3><ul>
<li><p>事件对象</p>
<blockquote>
<p>在触发DOM事件的时候都会产生一个对象</p>
</blockquote>
</li>
<li><p>事件对象event</p>
<ol>
<li>type：获取事件类型</li>
<li>target：获取事件目标</li>
<li>stopPropagation()：阻止事件冒泡</li>
<li>preventDefault()：阻止事件默认行为</li>
</ol>
</li>
<li><p>实例</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang&#x3D;&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">   	&lt;meta charset&#x3D;&quot;UTF-8&quot;&gt;</span><br><span class="line">   	&lt;title&gt;JS事件对象&lt;&#x2F;title&gt;</span><br><span class="line">&lt;&#x2F;head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">   	&lt;div id&#x3D;&quot;div&quot;&gt;</span><br><span class="line">       	&lt;button id&#x3D;&quot;btn&quot;&gt;按钮&lt;&#x2F;button&gt;</span><br><span class="line">       	&lt;a href&#x3D;&quot;http:&#x2F;&#x2F;www.baidu.com&quot; id&#x3D;&quot;aid&quot;&gt;搜索&lt;&#x2F;a&gt;</span><br><span class="line">   	&lt;&#x2F;div&gt;</span><br><span class="line">   	&lt;script&gt;</span><br><span class="line">       	document.getElementById(&quot;aid&quot;).addEventListener(&quot;click&quot;, showA);</span><br><span class="line">       	document.getElementById(&quot;div&quot;).addEventListener(&quot;click&quot;, showDiv);</span><br><span class="line">       	document.getElementById(&quot;btn&quot;).addEventListener(&quot;click&quot;, showType);</span><br><span class="line">       	function showType(event)&#123;</span><br><span class="line">           	alert(event.type);  &#x2F;&#x2F;获取事件类型</span><br><span class="line">           	alert(event.target);  &#x2F;&#x2F;获取事件目标</span><br><span class="line">           	event.stopPropagation();</span><br><span class="line">       	&#125;</span><br><span class="line">       	function showDiv()&#123;</span><br><span class="line">           	alert(&quot;div&quot;);</span><br><span class="line">       	&#125;</span><br><span class="line">       	function showA(event)&#123;</span><br><span class="line">           	event.stopPropagation();</span><br><span class="line">           	event.preventDefault();</span><br><span class="line">       	&#125;</span><br><span class="line">   	&lt;&#x2F;script&gt;</span><br><span class="line">&lt;&#x2F;body&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<hr>
<h2 id="五、事件对象-1"><a href="#五、事件对象-1" class="headerlink" title="五、事件对象"></a><span id="5">五、事件对象</span></h2><h3 id="1-JS对象"><a href="#1-JS对象" class="headerlink" title="1. JS对象"></a><span id="5.1">1. JS对象</span></h3><ul>
<li>JS中的所有事物都是对象：字符串、数值、数组、函数。。</li>
<li>每个对象都带有属性和方法</li>
<li><p>JS允许自定义对象</p>
<blockquote>
<p>自定义并创建对象实例<br>使用函数来定义对象，然后创建新的对象实例</p>
</blockquote>
</li>
<li><p>具体详见后面 <strong><a href="#8">八、面向对象</a></strong></p>
</li>
</ul>
<h3 id="2-string对象"><a href="#2-string对象" class="headerlink" title="2. string对象"></a><span id="5.2">2. string对象</span></h3><ul>
<li><blockquote>
<p>string对象用于处理已有的字符串<br>字符串可以用单引号或双引号</p>
</blockquote>
</li>
<li><p>常用方法</p>
<ol>
<li><p>length属性来计算字符串长度</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var txt&#x3D;&quot;ABCDEFGHIJKLMNOPQRSTUVWXYZ&quot;;</span><br><span class="line">document.write(txt.length);</span><br></pre></td></tr></table></figure></li>
<li><p>indexOf() 定位字符串中某一个指定字符串首次出现的位置</p>
<blockquote>
<p>返回位置，从 0 开始。<br>若没有找到则返回 -1。<br>lastIndexOf() 在字符串末尾开始查找字符串出现的位置。</p>
</blockquote>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var str&#x3D;&quot;Hello world, welcome to the universe.&quot;;</span><br><span class="line">var n&#x3D;str.indexOf(&quot;welcome&quot;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>
</li>
<li><p>match() 内容匹配</p>
<blockquote>
<p>查找字符串中特定的字符（串）。<br>找到的话，则返回这个字符。<br>若没有则返回 null。</p>
</blockquote>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var str&#x3D;&quot;Hello world!&quot;;</span><br><span class="line">document.write(str.match(&quot;world&quot;) + &quot;&lt;br&gt;&quot;);</span><br><span class="line">document.write(str.match(&quot;World&quot;) + &quot;&lt;br&gt;&quot;);</span><br><span class="line">document.write(str.match(&quot;world!&quot;));</span><br></pre></td></tr></table></figure>
</li>
<li><p>replace() 替换内容</p>
<blockquote>
<p>在字符串中用某些字符替换另一些字符。<br>replace(“ “, “ “)，后面替换前面</p>
</blockquote>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">str&#x3D;&quot;Please visit Microsoft!&quot;</span><br><span class="line">var n&#x3D;str.replace(&quot;Microsoft&quot;,&quot;Runoob&quot;);</span><br></pre></td></tr></table></figure>
</li>
<li><p>toUpperCase() / toLowerCase 字符大小写转换</p>
<blockquote>
<p>toUpperCase()：转换为大写<br>toLowerCase()：转换为小写</p>
</blockquote>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var txt&#x3D;&quot;Hello World!&quot;;       &#x2F;&#x2F; String</span><br><span class="line">var txt1&#x3D;txt.toUpperCase();   &#x2F;&#x2F; txt1 文本会转换为大写</span><br><span class="line">var txt2&#x3D;txt.toLowerCase();   &#x2F;&#x2F; txt2 文本会转换为小写</span><br><span class="line"></span><br></pre></td></tr></table></figure>
</li>
<li><p>split() 字符串转换为数组</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var txt&#x3D;&quot;a,b,c,d,e&quot;   &#x2F;&#x2F; String</span><br><span class="line">txt.split(&quot;,&quot;);   &#x2F;&#x2F; 使用逗号分隔</span><br><span class="line">txt.split(&quot; &quot;);   &#x2F;&#x2F; 使用空格分隔</span><br><span class="line">txt.split(&quot;|&quot;);   &#x2F;&#x2F; 使用竖线分隔 </span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
</ul>
<h3 id="3-data日期对象"><a href="#3-data日期对象" class="headerlink" title="3. data日期对象"></a><span id="5.3">3. data日期对象</span></h3><ul>
<li><p>Date对象</p>
<ol>
<li>日期对象用于处理日期和时间<blockquote>
<p>var date = Date();<br>document.write(date);<br>即可获得当前时间</p>
</blockquote>
</li>
</ol>
</li>
<li><p>常用方法</p>
<blockquote>
<p>getFullYear()：获取年份<br>getTime()：获取毫秒（自1970年1月1日至今）<br>setFullYear()：设置具体的日期<br>getDay()：获取星期</p>
</blockquote>
</li>
<li><p>实例</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang&#x3D;&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">   	&lt;meta charset&#x3D;&quot;UTF-8&quot;&gt;</span><br><span class="line">   	&lt;title&gt;JS data日期对象&lt;&#x2F;title&gt;</span><br><span class="line">&lt;&#x2F;head&gt;</span><br><span class="line">&lt;body onload&#x3D;&quot;startTime()&quot;&gt;</span><br><span class="line">   	&lt;div id&#x3D;&quot;timetxt&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class="line">   	&lt;script&gt;</span><br><span class="line">       	var date &#x3D; Date();</span><br><span class="line">     	&#x2F;&#x2F;  document.write(date);</span><br><span class="line">     	&#x2F;&#x2F;  document.write(date.getFullYear());</span><br><span class="line">     	&#x2F;&#x2F;  date.setFullYear(2010,1,1);</span><br><span class="line">     	&#x2F;&#x2F;  document.write(date);</span><br><span class="line">     	&#x2F;&#x2F;  时钟</span><br><span class="line">       	function startTime()&#123;</span><br><span class="line">           	var today &#x3D; new Date();</span><br><span class="line">           	var h &#x3D; today.getHours();</span><br><span class="line">           	var m &#x3D; today.getMinutes();</span><br><span class="line">           	var s &#x3D; today.getSeconds();</span><br><span class="line">           	m &#x3D; checkTime(m);</span><br><span class="line">           	s &#x3D; checkTime(s);</span><br><span class="line">           	document.getElementById(&quot;timetxt&quot;).innerHTML &#x3D; h + &quot;:&quot; + m + &quot;:&quot; +s;</span><br><span class="line">           	t &#x3D; setTimeout(function()&#123;</span><br><span class="line">               	startTime();</span><br><span class="line">           	&#125;, 500);</span><br><span class="line">       	&#125;</span><br><span class="line"></span><br><span class="line">       	function checkTime(i)&#123;</span><br><span class="line">           	if(i&lt;10)&#123;</span><br><span class="line">               	i &#x3D; &quot;0&quot;+ i;</span><br><span class="line">           	&#125;</span><br><span class="line">           	return i;</span><br><span class="line">       	&#125;</span><br><span class="line">   	&lt;&#x2F;script&gt;</span><br><span class="line">&lt;&#x2F;body&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="4-Array数组对象"><a href="#4-Array数组对象" class="headerlink" title="4. Array数组对象"></a><span id="5.4">4. Array数组对象</span></h3><ul>
<li><p>Array对象</p>
<blockquote>
<p>仅用单独的变量名来存储一</p>
<p>系列的值</p>
<p>数组中可以包含对象元素、函数、数组</p>
</blockquote>
</li>
<li><p>数组的创建</p>
<ol>
<li><p>常规方式</p>
<blockquote>
<p>var myCars=new Array();<br>myCars[0]=”Saab”;<br>myCars[1]=”Volvo”;<br>myCars[2]=”BMW”;</p>
</blockquote>
</li>
<li><p>简洁方式</p>
<blockquote>
<p>var myCars=new Array(“Saab”, “Volvo”, “BMW”);</p>
</blockquote>
</li>
<li><p>字面</p>
<blockquote>
<p>var myCars=[“Saab”, “Volvo”, “BMW”];</p>
</blockquote>
</li>
</ol>
</li>
<li><p>数组的常用方法</p>
<blockquote>
<p>concat()：合并数组 例：var c = a.concat(b);<br>sort()：排序（升序），降序见后面实例 例：a.sort();<br>push()：末尾追加元素<br>reverse()：数组元素翻身</p>
</blockquote>
</li>
<li><p>实例</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang&#x3D;&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">   	&lt;meta charset&#x3D;&quot;UTF-8&quot;&gt;</span><br><span class="line">   	&lt;title&gt;JS Array数组对象&lt;&#x2F;title&gt;</span><br><span class="line">&lt;&#x2F;head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">   	&lt;script&gt;</span><br><span class="line">       	var a &#x3D; [&quot;hello&quot;, &quot;world&quot;];</span><br><span class="line">       	var b &#x3D; [&quot;iwen&quot;, &quot;ime&quot;];</span><br><span class="line">       	var c &#x3D; a.concat(b);</span><br><span class="line">       	document.write(c + &quot;&lt;br&#x2F;&gt;&quot;);</span><br><span class="line"></span><br><span class="line">       	var d &#x3D; [&quot;a&quot;, &quot;c&quot;, &quot;d&quot;, &quot;t&quot;, &quot;e&quot;, &quot;p&quot;];</span><br><span class="line">       	document.write(d.sort() + &quot;&lt;br&#x2F;&gt;&quot;);</span><br><span class="line">       	document.write(d.sort(function(a, b)&#123;</span><br><span class="line">           	return b-a;</span><br><span class="line">       	&#125;) + &quot;&lt;br&#x2F;&gt;&quot;);</span><br><span class="line"></span><br><span class="line">       	var e &#x3D; [&quot;a&quot;, &quot;b&quot;];</span><br><span class="line">       	e.push(&quot;c&quot;);</span><br><span class="line">       	document.write(e + &quot;&lt;br&#x2F;&gt;&quot;);</span><br><span class="line"></span><br><span class="line">       	var f &#x3D; [&quot;c&quot;, &quot;b&quot;, &quot;a&quot;];</span><br><span class="line">       	document.write(f.reverse());</span><br><span class="line">   	&lt;&#x2F;script&gt;</span><br><span class="line">&lt;&#x2F;body&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="5-Math对象"><a href="#5-Math对象" class="headerlink" title="5. Math对象"></a><span id="5.5">5. Math对象</span></h3><ul>
<li><blockquote>
<p>执行常见的算数任务</p>
</blockquote>
</li>
<li><p>算数值</p>
<blockquote>
<p>Math.E<br>Math.PI<br>Math.SQRT2  //返回2的平方根<br>Math.SQRT1_2  //返回2的平方根的倒数</p>
</blockquote>
</li>
<li><p>常见方法</p>
<blockquote>
<p>round()：四舍五入<br>random()：返回0-1之间的随机数<br>　　　　　０-10：<em>10<br>　　　　　０-100：</em>100<br>　　　　　整型：parseInt(Math.random() * 10);<br>floor()：返回小于等于x的最大整数<br>max()：返回最大值<br>min()：返回最小值<br>abs()：返回绝对值</p>
</blockquote>
</li>
<li><p>生成指定范围内的随机整数</p>
<ol>
<li><p>包括下限数字 (lower) ，不包括上限数字 (upper)</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">function random(lower, upper)&#123;</span><br><span class="line">	return Math.floor(Math.random() * (upper - lower)) + lower;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>包括下限数字 (lower) ，也包括上限数字 (upper)</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">function random(lower, upper)&#123;</span><br><span class="line">	return Math.floor(Math.random() * (upper - lower+1)) + lower;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>扩展：产生一个随机的rgb颜色</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">function randomColor()&#123;</span><br><span class="line">	var r &#x3D; random(0, 256),</span><br><span class="line">	g &#x3D; random(0, 256),</span><br><span class="line">	b &#x3D; random(0, 256);</span><br><span class="line">	&#x2F;&#x2F;连接字符串结果</span><br><span class="line">	var result &#x3D; &quot;rgb(&quot; + r + &quot;,&quot; + g + &quot;,&quot; + b + &quot;)&quot;;</span><br><span class="line">	return result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
<li><p>实例</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang&#x3D;&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">   	&lt;meta charset&#x3D;&quot;UTF-8&quot;&gt;</span><br><span class="line">   	&lt;title&gt;JS Math对象&lt;&#x2F;title&gt;</span><br><span class="line">&lt;&#x2F;head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">   	&lt;script&gt;</span><br><span class="line">       	document.write(Math.round(2.3) + &quot;&lt;br&#x2F;&gt;&quot;);</span><br><span class="line">       	document.write(Math.random() * 10 + &quot;&lt;br&#x2F;&gt;&quot;);</span><br><span class="line">       	document.write(parseInt(Math.random()*10) + &quot;&lt;br&#x2F;&gt;&quot;);</span><br><span class="line">       	document.write(Math.max(10, 20, 4, 1));</span><br><span class="line">   	&lt;&#x2F;script&gt;</span><br><span class="line">&lt;&#x2F;body&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<hr>
<h2 id="六、DOM对象控制HTML-1"><a href="#六、DOM对象控制HTML-1" class="headerlink" title="六、DOM对象控制HTML"></a><span id="6">六、DOM对象控制HTML</span></h2><h3 id="1-方法"><a href="#1-方法" class="headerlink" title="1. 方法"></a>1. 方法</h3><ul>
<li><p>getElementByName()</p>
<blockquote>
<p>通过name属性来获取元素</p>
</blockquote>
</li>
<li><p>getElementByTagName()</p>
<blockquote>
<p>通过标签名称来获取元素</p>
</blockquote>
</li>
<li><p>getAttribute()</p>
<blockquote>
<p>获取元素属性<br><em>想要获取的元素</em>.getAttribute(“<em>想要获取的属性</em>“);</p>
</blockquote>
</li>
<li><p>setAttribute()</p>
<blockquote>
<p>设置元素属性<br><em>想要设置的元素</em>.(“<em>要设置的属性</em>“, “<em>属性内容</em> “)</p>
</blockquote>
</li>
<li><p>childNodes</p>
<blockquote>
<p>访问子节点, <strong>注意空白项</strong> ,空白项算文本节点<br>类似于存放节点的数组，故需用[0] / [1]等确定具体的子节点<br><em>length</em> 属性可获得节点数<br><em>nodeType</em> 属性</p>
<blockquote>
<p>返回节点的类型</p>
<ol>
<li>如果节点是一个元素节点，nodeType属性返回1。</li>
<li>如果节点是属性节点，nodeType属性返回2。</li>
<li>如果节点是一个文本节点，nodeType属性返回3。</li>
<li>如果节点是一个注释节点，nodeType属性返回8。</li>
</ol>
<p>该属性是只读的。</p>
</blockquote>
</blockquote>
</li>
<li><p>parentNode</p>
<blockquote>
<p>访问父节点<br>nodeName：节点名称</p>
</blockquote>
</li>
<li><p>createElement()</p>
<blockquote>
<p>创建元素节点<br>例：var input = document.createElement(“input”);</p>
</blockquote>
</li>
<li><p>createTextNode()</p>
<blockquote>
<p>创建文本节点<br>与 createElement() 和 appendChild() 共同使用</p>
<blockquote>
<p>var para = document.createElement(“p”);<br>var node = document.createTextNode(“这是创建的新文本”);<br>   para.appendChild(node);</p>
</blockquote>
</blockquote>
</li>
<li><p>appendChild()</p>
<blockquote>
<p>创建新的HTML元素（节点）</p>
<blockquote>
<p>要创建新的HTML元素（节点）需要先创建一个元素，然后在已存在的元素中添加它。</p>
</blockquote>
<p>在节点之后添加。例：<em>打算添加到它的最后</em>.appendChild( <em>要添加的节点</em> )</p>
<blockquote>
<p>（接上面createTextNode()部分代码）<br>var element = document.getElementById(“div1”);<br>element.appendChild(para);</p>
</blockquote>
</blockquote>
</li>
<li><p>insertBefore()</p>
<blockquote>
<p>用法和 appendChild() 很像，不过它用于添加新元素到开始位置</p>
<p>例：<em>打算添加到它中</em>.insertBefore(<em>要添加的元素, 它中打算添加到现在这个元素之前的元素</em> )</p>
<blockquote>
<p>（接上面createTextNode()部分代码）<br>var element = documentById(“div1”);<br>var child = documentById(“p1”);<br>element.insertBefore(para, child);</p>
</blockquote>
</blockquote>
</li>
<li><p>removeChild()</p>
<blockquote>
<p>删除节点 例：<em>想要删除节点的父节点</em>.removeChild(<em>想要删除的节点</em> )<br>两种方法</p>
<blockquote>
<p>var parent = document.getElementById(“div1”);<br>var child = document.getElementById(“p1”);<br>parent.removeChild(child);</p>
<hr>
<p>var parent = document.getElementById(“div”);<br>div.removeChild(div.childNodes[1]);</p>
</blockquote>
</blockquote>
</li>
<li><p>offsetHeight / offsetWidth</p>
<blockquote>
<p>返回任何一个元素的高度或宽度，包括边框和填充，但不是边距</p>
<blockquote>
<p>element.offsetHeight;<br>element.offsetWidth;</p>
</blockquote>
<p>返回网页尺寸（不包含滚动条）</p>
<blockquote>
<p>document.documentElement.offsetWidth || document.body.offsetWidth;<br>//考虑到兼容性，故还有 || 后面的内容</p>
</blockquote>
</blockquote>
</li>
</ul>
<ul>
<li><p>scrollHeight / scrollWidth</p>
<blockquote>
<p>网页尺寸，包含滚动条</p>
</blockquote>
</li>
<li><p><strong>实例（这一节请仔细查看实例）</strong></p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang&#x3D;&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">   	&lt;meta charset&#x3D;&quot;UTF-8&quot;&gt;</span><br><span class="line">   	&lt;title&gt;DOM对象控制HTML&lt;&#x2F;title&gt;</span><br><span class="line">&lt;&#x2F;head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">   	&lt;p name&#x3D;&quot;pn&quot;&gt;hello&lt;&#x2F;p&gt;</span><br><span class="line">   	&lt;p name&#x3D;&quot;pn&quot;&gt;hello&lt;&#x2F;p&gt;</span><br><span class="line">   	&lt;p name&#x3D;&quot;pn&quot;&gt;hello&lt;&#x2F;p&gt;</span><br><span class="line">   	&lt;p name&#x3D;&quot;pn&quot;&gt;hello&lt;&#x2F;p&gt;</span><br><span class="line">   	&lt;a id&#x3D;&quot;aid&quot; title&#x3D;&quot;得到了a标签的属性&quot;&gt;hello&lt;&#x2F;a&gt;</span><br><span class="line">   	&lt;a id&#x3D;&quot;aid2&quot;&gt;aid2&lt;&#x2F;a&gt;</span><br><span class="line">   	&lt;ul&gt;&lt;li&gt;1&lt;&#x2F;li&gt;&lt;li&gt;2&lt;&#x2F;li&gt;&lt;li&gt;3&lt;&#x2F;li&gt;&lt;&#x2F;ul&gt;</span><br><span class="line">   	&lt;div id&#x3D;&quot;div&quot;&gt;</span><br><span class="line">       	&lt;p id&#x3D;&quot;pid&quot;&gt;div的p元素&lt;&#x2F;p&gt;</span><br><span class="line">   	&lt;&#x2F;div&gt;</span><br><span class="line">   	&lt;script&gt;</span><br><span class="line">       	function getName()&#123;</span><br><span class="line">       	    var count &#x3D; document.getElementsByName(&quot;pn&quot;);</span><br><span class="line">           	alert(count.length);</span><br><span class="line">           	var p &#x3D; count[3];</span><br><span class="line">           	p.innerHTML &#x3D; &quot;World&quot;;</span><br><span class="line">       	&#125;</span><br><span class="line">       	getName();</span><br><span class="line"></span><br><span class="line">       	function getAttr()&#123;</span><br><span class="line">           	var anode &#x3D; document.getElementById(&quot;aid&quot;);</span><br><span class="line">           	var attr &#x3D; anode.getAttribute(&quot;id&quot;);</span><br><span class="line">           	alert(attr);</span><br><span class="line">       	&#125;</span><br><span class="line">       	getAttr();</span><br><span class="line"></span><br><span class="line">       	function setAttr()&#123;</span><br><span class="line">           	var anode &#x3D; document.getElementById(&quot;aid2&quot;);</span><br><span class="line">           	anode.setAttribute(&quot;title&quot;, &quot;动态设置a的title属性&quot;);</span><br><span class="line">           	var attr &#x3D; anode.getAttribute(&quot;title&quot;);</span><br><span class="line">           	alert(attr);</span><br><span class="line">       	&#125;</span><br><span class="line">       	setAttr();</span><br><span class="line"></span><br><span class="line">       	function getChildNode()&#123;</span><br><span class="line">           	var childnode &#x3D; document.getElementsByTagName(&quot;ul&quot;)[0].childNodes;</span><br><span class="line">           	alert(childnode.length);</span><br><span class="line">           	alert(childnode[0].nodeType);</span><br><span class="line">       	&#125;</span><br><span class="line">       	getChildNode();</span><br><span class="line"></span><br><span class="line">       	function getParentNode()&#123;</span><br><span class="line">           	var div &#x3D; document.getElementById(&quot;pid&quot;).parentNode.nodeName;</span><br><span class="line">           	alert(div);</span><br><span class="line">       	&#125;</span><br><span class="line">       	getParentNode();</span><br><span class="line"></span><br><span class="line">       	function createNode()&#123;</span><br><span class="line">           	var body &#x3D; document.body;</span><br><span class="line">           	var input &#x3D; document.createElement(&quot;input&quot;);</span><br><span class="line">           	input.type &#x3D; &quot;button&quot;;</span><br><span class="line">           	input.value &#x3D; &quot;按钮&quot;;</span><br><span class="line">           	body.appendChild(input);</span><br><span class="line">       	&#125;</span><br><span class="line">       	createNode();</span><br><span class="line"></span><br><span class="line">       	function addNode()&#123;</span><br><span class="line">           	var div &#x3D; document.getElementById(&quot;div&quot;);</span><br><span class="line">           	var node &#x3D; document.getElementById(&quot;pid&quot;);</span><br><span class="line">           	var newnode &#x3D; document.createElement(&quot;p&quot;);</span><br><span class="line">           	newnode.innerHTML &#x3D; &quot;动态添加一个p元素&quot;;</span><br><span class="line">           	div.insertBefore(newnode, node);</span><br><span class="line">       	&#125;</span><br><span class="line">       	addNode();</span><br><span class="line"></span><br><span class="line">       	function removeNode()&#123;</span><br><span class="line">           	var div &#x3D; document.getElementById(&quot;div&quot;);</span><br><span class="line">          	&#x2F;&#x2F; var p &#x3D; div.removeChild(div.childNodes[1]);</span><br><span class="line">       	&#125;</span><br><span class="line">       	removeNode();</span><br><span class="line"></span><br><span class="line">       	function getSize()&#123;</span><br><span class="line">           	var width &#x3D; document.documentElement.offsetWidth||document.body.offsetWidth;</span><br><span class="line">           	var height &#x3D; document.documentElement.offsetHeight||document.body.offsetHeight;</span><br><span class="line">           	alert(width + &quot;，&quot; + height);</span><br><span class="line">       	&#125;</span><br><span class="line">       	getSize();</span><br><span class="line">   	&lt;&#x2F;script&gt;</span><br><span class="line">&lt;&#x2F;body&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<hr>
<h2 id="七、JS浏览器对象-1"><a href="#七、JS浏览器对象-1" class="headerlink" title="七、JS浏览器对象"></a><span id="7">七、JS浏览器对象</span></h2><h3 id="1-Window对象"><a href="#1-Window对象" class="headerlink" title="1. Window对象"></a><span id="7.1">1. Window对象</span></h3><ul>
<li><p>Window对象</p>
<blockquote>
<p>Window对象是BOM的核心，Window对象指当前浏览器的窗口<br>所有JS全局对象、函数、以及变量均自动变成为Window对象的成员<br>全局变量是Window对象的属性<br>全局函数是Window对象的方法<br>甚至HTML DOM的document也是Window对象的属性之一</p>
</blockquote>
</li>
<li><p>Window尺寸</p>
<blockquote>
<p>window.innerHeight：浏览器窗口的内部高度（包括滚动条）<br>window.innerWidth：浏览器窗口的内部宽度（包括滚动条）</p>
</blockquote>
</li>
<li><p>Window方法</p>
<blockquote>
<p>window.open()：打开新窗口<br>window.close()：关闭新窗口</p>
</blockquote>
</li>
<li><p>实例</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang&#x3D;&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">   	&lt;meta charset&#x3D;&quot;UTF-8&quot;&gt;</span><br><span class="line">   	&lt;title&gt;JS浏览器对象——window对象&lt;&#x2F;title&gt;</span><br><span class="line">&lt;&#x2F;head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">   	&lt;button id&#x3D;&quot;btn&quot; onclick&#x3D;&quot;btnClicked()&quot;&gt;按钮&lt;&#x2F;button&gt;</span><br><span class="line">   	&lt;script&gt;</span><br><span class="line">       	function btnClicked()&#123;</span><br><span class="line">           	&#x2F;&#x2F;window.open(&quot;JS事件.html&quot;, &quot;windowname&quot;, &quot;height &#x3D; 200, width &#x3D; 200, top &#x3D; 100, left &#x3D; 100, toolbar &#x3D; no, menubar &#x3D; no&quot;);</span><br><span class="line">           	window.close();</span><br><span class="line">       	&#125;</span><br><span class="line">   	&lt;&#x2F;script&gt;</span><br><span class="line">&lt;&#x2F;body&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="2-计时器对象"><a href="#2-计时器对象" class="headerlink" title="2. 计时器对象"></a><span id="7.2">2. 计时器对象</span></h3><ul>
<li><p>计时事件</p>
<blockquote>
<p>通过JS，我们有能力做到在一个设定的时间间隔之后来执行代码，而不是函数调用后立刻执行</p>
</blockquote>
</li>
<li><p>计时方法</p>
<ol>
<li><p>setInterval() / clearInterval()</p>
<blockquote>
<p>(函数, 时间间隔) <strong>//函数特别喜欢写成一种样子…祥看实例</strong><br>间隔指定毫秒数 <strong>不停</strong> 地执行代码</p>
</blockquote>
</li>
<li><p>setTimeout() / clearTimeout()</p>
<blockquote>
<p>（函数，间隔时间）<br>暂停指定毫秒后 <strong>执行</strong> 指定代码<br><strong>可以设计成循环，递归调用，即可不停得执行代码</strong>（祥看实例）</p>
</blockquote>
</li>
</ol>
</li>
<li><p>实例</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang&#x3D;&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">   	&lt;meta charset&#x3D;&quot;UTF-8&quot;&gt;</span><br><span class="line">   	&lt;title&gt;JS浏览器对象——计时器对象&lt;&#x2F;title&gt;</span><br><span class="line">&lt;&#x2F;head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">   	&lt;p id&#x3D;&quot;ptime&quot;&gt;&lt;&#x2F;p&gt;</span><br><span class="line">   	&lt;button onclick&#x3D;&quot;stopTime()&quot;&gt;按钮&lt;&#x2F;button&gt;</span><br><span class="line">   	&lt;br&#x2F;&gt;&lt;br&#x2F;&gt;&lt;br&#x2F;&gt;&lt;br&#x2F;&gt;</span><br><span class="line">   	&lt;button onclick&#x3D;&quot;myWin()&quot;&gt;开始&lt;&#x2F;button&gt;</span><br><span class="line">   	&lt;br&#x2F;&gt;&lt;br&#x2F;&gt;</span><br><span class="line">   	&lt;button onclick&#x3D;&quot;stopWin()&quot;&gt;停止&lt;&#x2F;button&gt;</span><br><span class="line"></span><br><span class="line">   	&lt;script&gt;</span><br><span class="line">       	var mytime &#x3D; setInterval(function()&#123;</span><br><span class="line">           getTime();</span><br><span class="line">       	&#125;, 1000);</span><br><span class="line">       	function getTime()&#123;</span><br><span class="line">           	var d &#x3D; new Date();</span><br><span class="line">           	var t &#x3D; d.toLocaleTimeString();</span><br><span class="line">           	document.getElementById(&quot;ptime&quot;).innerHTML &#x3D; t;</span><br><span class="line">       	&#125;	</span><br><span class="line">       	function stopTime()&#123;</span><br><span class="line">           	clearInterval(mytime);</span><br><span class="line">       	&#125;</span><br><span class="line"></span><br><span class="line">       	var win;</span><br><span class="line">       	function myWin()&#123;</span><br><span class="line">           	alert(&quot;hello&quot;);</span><br><span class="line">           	win &#x3D; setTimeout(function () &#123;</span><br><span class="line">           	    myWin();</span><br><span class="line">           	&#125;, 3000);</span><br><span class="line">       	&#125;</span><br><span class="line">       	function stopWin()&#123;</span><br><span class="line">           	clearTimeout(win);</span><br><span class="line">       	&#125;</span><br><span class="line">   	&lt;&#x2F;script&gt;</span><br><span class="line">&lt;&#x2F;body&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="3-History对象"><a href="#3-History对象" class="headerlink" title="3. History对象"></a><span id="7.3">3. History对象</span></h3><ul>
<li>window.history对象包含浏览器的历史（URL）的集合</li>
<li><p>方法</p>
<blockquote>
<p>history.back()：与浏览器点击后退键相同<br>history.forward()：与浏览器点击向前键相同<br>history.go()：进入历史中的某个页面</p>
</blockquote>
</li>
</ul>
<h3 id="4-Location对象"><a href="#4-Location对象" class="headerlink" title="4. Location对象"></a><span id="7.4">4. Location对象</span></h3><ul>
<li>window.location对象用于获得当前页面的地址URL，并把浏览器重新定向到新的页面</li>
<li><p>Location对象的属性</p>
<blockquote>
<p>location.hostname：返回web主机的域名<br>location.pathname：返回当前页面的路径和文件名<br>location.port：返回web主机的端口<br>location.portocol：返回所使用的web协议（<a target="_blank" rel="noopener" href="http://或https://）">http://或https://）</a><br>location.href：返回当前页面的URL<br>location.assign：方法加载新的文档</p>
</blockquote>
</li>
<li><p>实例</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang&#x3D;&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">   	&lt;meta charset&#x3D;&quot;UTF-8&quot;&gt;</span><br><span class="line">   	&lt;title&gt;JS浏览器对象——Location对象&lt;&#x2F;title&gt;</span><br><span class="line">&lt;&#x2F;head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">   	&lt;button id&#x3D;&quot;btn&quot; onclick&#x3D;&quot;getLoc()&quot;&gt;按钮展示&lt;&#x2F;button&gt;</span><br><span class="line">   	&lt;br&#x2F;&gt;&lt;br&#x2F;&gt;&lt;br&#x2F;&gt;&lt;br&#x2F;&gt;&lt;br&#x2F;&gt;&lt;br&#x2F;&gt;&lt;br&#x2F;&gt;&lt;br&#x2F;&gt;</span><br><span class="line">   	&lt;button id&#x3D;&quot;btn1&quot; onclick&#x3D;&quot;assi()&quot;&gt;按钮跳转&lt;&#x2F;button&gt;</span><br><span class="line">   	&lt;p id&#x3D;&quot;pid&quot;&gt;&lt;&#x2F;p&gt;</span><br><span class="line">   	&lt;script&gt;</span><br><span class="line">       	function getLoc()&#123;</span><br><span class="line">           	document.getElementById(&quot;pid&quot;).innerHTML &#x3D; window.location.href;</span><br><span class="line">       	&#125;</span><br><span class="line">       	function assi() &#123;</span><br><span class="line">           	location.assign(&quot;https:&#x2F;&#x2F;www.baidu.com&quot;);</span><br><span class="line">       	&#125;</span><br><span class="line">   	&lt;&#x2F;script&gt;</span><br><span class="line">&lt;&#x2F;body&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="5-screen对象"><a href="#5-screen对象" class="headerlink" title="5. screen对象"></a><span id="7.5">5. screen对象</span></h3><ul>
<li>window.screen对象包含有关用户屏幕的信息</li>
<li><p>属性</p>
<blockquote>
<p>screen.availWidth：可用屏幕宽度<br>screen.availHeight：可用屏幕高度<br>screen.height：屏幕高度<br>screen.width：屏幕宽度</p>
</blockquote>
</li>
</ul>
<hr>
<h2 id="八、面向对象-1"><a href="#八、面向对象-1" class="headerlink" title="八、面向对象"></a><span id="8">八、面向对象</span></h2><h3 id="1-创建对象"><a href="#1-创建对象" class="headerlink" title="1. 创建对象"></a>1. 创建对象</h3><ul>
<li><p>new操作符 + Object创建对象</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">var person &#x3D; new Object();</span><br><span class="line">person.name &#x3D; &quot;lisi&quot;;</span><br><span class="line">person.age &#x3D; 21;</span><br><span class="line">person.family &#x3D; [&quot;haha&quot;, &quot;heihei&quot;];</span><br><span class="line">person.say &#x3D; function()&#123;</span><br><span class="line">	alert(this.name);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>字面式创建对象</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">var person &#x3D; &#123;</span><br><span class="line">	name: &quot;lisi&quot;,</span><br><span class="line">	age: 21,</span><br><span class="line">	family: [&quot;haha&quot;, &quot;heihei&quot;],</span><br><span class="line">	say: function()&#123;</span><br><span class="line">		alert(this.name);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;; </span><br></pre></td></tr></table></figure>
<p>  <strong>以上两种方法在使用同一接口创建多个对象 时，会产生大量重复代码，为了解决此问题，工厂模式被开发</strong></p>
</li>
<li><p>工厂模式</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">function createPerson(name, age, family)&#123;</span><br><span class="line">	var o &#x3D; new Object();</span><br><span class="line">	o.name &#x3D; name;</span><br><span class="line">	o.age &#x3D; age;</span><br><span class="line">	o.family &#x3D; family;</span><br><span class="line">	o.say &#x3D; function()&#123;</span><br><span class="line">		alert(this.name);</span><br><span class="line">	&#125;</span><br><span class="line">	return o;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var person1 &#x3D; createPerson(&quot;lisi&quot;, 21, [&quot;haha&quot;, &quot;heihei&quot;]); &#x2F;&#x2F;instanceof无法判断它是谁的实例，只能判断他是对象，构造函数都可以判断出</span><br><span class="line">console.log(person1 instanceof Object); &#x2F;&#x2F;true</span><br></pre></td></tr></table></figure>
<blockquote>
<p>缺点：工厂模式解决了重复实例化多个对象的问题，但没有解决 <em> 对象识别 </em> 的问题，（工厂模式无从识别对象的类型，因为全部都是Object，不像Date, Array等），于是出现了构造函数模式。</p>
</blockquote>
</li>
<li><p>构造函数模式</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">function Person(name, age, job)&#123;</span><br><span class="line">	this.name &#x3D; name;</span><br><span class="line">	this.age &#x3D; age;</span><br><span class="line">	this.job &#x3D; job;</span><br><span class="line">	this.sayName &#x3D; function()&#123;</span><br><span class="line">		alert(this.name);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var person &#x3D; new Person(&quot;Jim&quot;, 22, &quot;Teacher&quot;);</span><br></pre></td></tr></table></figure>
<ol>
<li><p><strong>构造函数模式相对于工厂模式有几个显著的区别</strong></p>
<ul>
<li>没有显式地创建对象。</li>
<li>直接将属性和方法赋给了this对象。</li>
<li><strong>没有 return 语句</strong>。</li>
<li>函数名的首字母大写（Person 和 createPerson）：按照惯例，构造函数始终都是以大写字母开头，而非构造函数则应该以小写字母开头。</li>
</ul>
</li>
<li><p><strong>解决对象识别问题</strong></p>
<ol>
<li><p>constructor</p>
<blockquote>
<p>上面的例子使person保存这个Person的示实例，因此有了一个constructor（构造函数）属性，该属性指向Person</p>
</blockquote>
<p> <code>alert(person.constructor == Person); //true</code></p>
<blockquote>
<p>对象的constructor属性最初是用来标识对象类型的，但是检测对象类型还是instanceof操作符更加可靠</p>
</blockquote>
</li>
<li><p>instanceof</p>
<p> <code>alert(person instanceof Object); //true</code><br> <code>alert(person instanceof Person); //true</code></p>
</li>
</ol>
</li>
</ol>
</li>
</ul>
<pre><code>      &gt; 这个例子里创建的对象 既是Object实例又是Person的实例
</code></pre><ol>
<li><p>new Person()这条语句经历了什么</p>
<blockquote>
<ol>
<li>创建一个新对象 </li>
<li>将构造函数的作用域赋给新对象（因此this就指向了这个新对象）</li>
<li>执行构造函数中的代码（为这个新对象添加属性）</li>
<li>返回新对象</li>
</ol>
</blockquote>
</li>
<li><p>构造函数中的问题</p>
<blockquote>
<p>ECMAScript中的函数是对象，因此每定义一个函数，也就是实例化了一个对象。而构造函数在每次创建的时候都会完成同样function实例（sayName），这是很没有必要的。因此可以把函数定义转移到构造函数外部来解决这个问题。         </p>
</blockquote>
</li>
</ol>
<ul>
<li><p>原型模式</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">function Person()&#123;&#125;</span><br><span class="line">Person.prototype.name &#x3D; &quot;Jim&quot;;</span><br><span class="line">Person.prototype.age &#x3D; 22;</span><br><span class="line">Person.prototype.job &#x3D; &quot;Doctor&quot;;</span><br><span class="line">Person.prototype.sayName &#x3D; function()&#123;</span><br><span class="line">	alert(this.name);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var person &#x3D; new Person();</span><br><span class="line">person.age &#x3D; 50;</span><br><span class="line">person.sayName(); &#x2F;&#x2F;Jim</span><br></pre></td></tr></table></figure>
<ol>
<li><p>原型模式的好处</p>
<blockquote>
<p>可以让所有对象实例共享它所包含的属性和方法。换句话说，不必在构造函数中定义对象实例的信息，而是可以让这些信息直接添加到原型对象中。</p>
</blockquote>
</li>
<li><p>原型对象是什么</p>
<blockquote>
<ol>
<li><p>无论什么时候，只要创建了一个新函数，就会根据一组特定的规则为这个函数创建一个 prototype 属性，这个属性指向函数的原型对象。在默认情况下，所有的原型对象都会自动获得一个constructor（构造函数）的属性，这个属性包含一个指向prototype属性所在的函数的指针，如下：<br><code>alert(Person.prototype.constructor == Person); //true</code></p>
</li>
<li><p>在我们调用 <code>person.sayName();</code>的时候，会先后执行两次搜索，先找实例再找原型。<br><em>首先编译器会问：“实例person有sayName属性吗？”<br>答曰：“没有”<br>然后继续搜索，再问“person的原型里有sayName属性吗？”<br>答曰：“有”</em><br>于是他就读取那个保存在原型对象中的函数</p>
</li>
<li><p>当给person主动添加属性时，就会屏蔽掉原型的属性（但不会替代，其他Person对象调用更改的属性，依然会时默认值）</p>
</li>
</ol>
<ol>
<li><p>使用delete操作符删除 <strong>实例</strong> 的属性</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">person.name &#x3D; &quot;Tom&quot;;</span><br><span class="line">alert(person.name); &#x2F;&#x2F;Tom</span><br><span class="line">delete person.name;</span><br><span class="line">alert(person.name); &#x2F;&#x2F;Jim</span><br></pre></td></tr></table></figure>
</li>
<li><p>hasOwnProperty()方法检测一个属性时存在于实例中还是原型中</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var person &#x3D; new Person();</span><br><span class="line">alert(person.hasOwnProperty(&quot;name&quot;)); &#x2F;&#x2F;false：在原型中</span><br><span class="line">person.name &#x3D; &quot;Tom&quot;;</span><br><span class="line">alert(person.hasOwnProperty(&quot;name&quot;)); &#x2F;&#x2F;true：存在对象实例中 </span><br></pre></td></tr></table></figure>
</li>
</ol>
</blockquote>
<ol>
<li><p>原型与in操作符</p>
<blockquote>
<p>in操作符通过对象访问对象中的属性时，返回true，无论该属性是存在于实例中还是原型中</p>
   <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var person &#x3D; new Person();</span><br><span class="line">alert(&quot;name&quot; in person); &#x2F;&#x2F;true</span><br><span class="line">person.name &#x3D; &quot;Tom&quot;;</span><br><span class="line">alert(&quot;name&quot; in person); &#x2F;&#x2F;true</span><br></pre></td></tr></table></figure>
</blockquote>
</li>
<li><p>for-in循环</p>
<blockquote>
<p>循环遍历对象的属性</p>
   <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">for(var x in person)&#123; &#x2F;&#x2F;x为属性名</span><br><span class="line">    if(x &#x3D;&#x3D; &quot;name&quot;)&#123;</span><br><span class="line">        alert(&quot;Found name!&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
</li>
</ol>
</li>
</ol>
</li>
<li><p><strong>组合使用构造函数模式和原型模式</strong></p>
<blockquote>
<p>构造函数模式用于定义实例属性<br>原型模式用于定义方法和共享属性</p>
   <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">   functon Person(name, age, job)&#123;</span><br><span class="line">	this.name &#x3D; name;</span><br><span class="line">	this.age &#x3D; age;</span><br><span class="line">	this.job &#x3D; job;</span><br><span class="line">	this.friends &#x3D; [&quot;Amy&quot;, &quot;Bob&quot;];</span><br><span class="line">   &#125;</span><br><span class="line">   Person.prototype &#x3D; &#123;</span><br><span class="line">	constructor: Person, &#x2F;&#x2F;每个函数都有prototype属性，指向该函数原型对象，原型对象都有constructor属性，这是一个指向prototype属性所在函数的指针</span><br><span class="line">	sayName: function()&#123;</span><br><span class="line">	alert(this.name);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
</blockquote>
<pre><code>   var person1 = new Person();
   var person2 = new Person();

   person1.friends.push(&quot;Van&quot;);
   alert(person1.friends); //Amy, Bob. Van
   alert(person2.friends); //Amy, Bob
   <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">### 2. 对象的封装###</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&gt;(function()&#123;</span><br><span class="line">&gt;    正常创建对象即可</span><br><span class="line">&gt;    **window.People &#x3D; People; &#x2F;&#x2F;对象名称**</span><br><span class="line">&gt;&#125;());</span><br><span class="line"></span><br><span class="line">+ 实例</span><br></pre></td></tr></table></figure>
</code></pre><p>  (function () {</p>
<pre><code>  function People(name)&#123;
      this.name = name;
  &#125;
  People.prototype = &#123;
      say: function()&#123;
      alert(&quot;peo-hello &quot;+this.name);
      &#125;
  &#125;;
  window.People = People;
</code></pre><p>  }());</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">### 3. 对象的继承###</span><br><span class="line"></span><br><span class="line">&gt;继承的对象.prototype &#x3D; new 被继承对象();</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>(function(){<br>  function Student(name){</p>
<pre><code>  this.name = name;
</code></pre><p>  }</p>
<p>  Student.prototype = new People();</p>
<p>  var superSsay = Student.prototype.say;</p>
<p>  Student.prototype.say = function(){</p>
<pre><code>  superSsay.call(this);
  alert(&quot;stu-hello &quot;+this.name);
</code></pre><p>  };<br>  window.Student = Student;<br>}());</p>
</li>
</ul>
<p>var s = new Student(“Olivia”);<br>s.say();<br>```</p>
<hr>
<h1 id="后记"><a href="#后记" class="headerlink" title="后记 "></a><em><font color="darkcyan"><span id="9">后记</span> </em></h1><ul>
<li><h3 id="一边看当时的笔记，一边看当时看网课时跟着写的代码，遇到不会的和忘记的再到菜鸟论坛查一查补充一下，整理笔记倒还是挺快乐的，当然也有可能是课少hhh。"><a href="#一边看当时的笔记，一边看当时看网课时跟着写的代码，遇到不会的和忘记的再到菜鸟论坛查一查补充一下，整理笔记倒还是挺快乐的，当然也有可能是课少hhh。" class="headerlink" title="一边看当时的笔记，一边看当时看网课时跟着写的代码，遇到不会的和忘记的再到菜鸟论坛查一查补充一下，整理笔记倒还是挺快乐的，当然也有可能是课少hhh。"></a>一边看当时的笔记，一边看当时看网课时跟着写的代码，遇到不会的和忘记的再到菜鸟论坛查一查补充一下，整理笔记倒还是挺快乐的，当然也有可能是课少hhh。</h3></li>
<li><h3 id="经常复习是重点-！！时不时来看看！"><a href="#经常复习是重点-！！时不时来看看！" class="headerlink" title="经常复习是重点 ！！时不时来看看！"></a>经常复习是重点 ！！时不时来看看！</h3>&lt;/font&gt;</li>
</ul>
<hr>

      
    </div>

    
	
	

	
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Olivia"
      src="/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">Olivia</p>
  <div class="site-description" itemprop="description">May All Your Troubles Be little Ones</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">5</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="/yajie.wang@mail.hfut.edu.cn" title="E-Mail → yajie.wang@mail.hfut.edu.cn"><i class="fa fa-envelope fa-fw"></i></a>
      </span>
  </div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title"><i class="fa fa-link fa-fw"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="http://www.hfut.edu.cn/" title="http:&#x2F;&#x2F;www.hfut.edu.cn&#x2F;" rel="noopener" target="_blank">合肥工业大学</a>
        </li>
    </ul>
  </div>

      </div>
        <div class="back-to-top motion-element">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Olivia</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script color='0,0,255' opacity='0.5' zIndex='-1' count='99' src="/lib/canvas-nest/canvas-nest-nomobile.min.js"></script>
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  
      

<script>
  if (typeof MathJax === 'undefined') {
    window.MathJax = {
      loader: {
        source: {
          '[tex]/amsCd': '[tex]/amscd',
          '[tex]/AMScd': '[tex]/amscd'
        }
      },
      tex: {
        inlineMath: {'[+]': [['$', '$']]},
        tags: 'ams'
      },
      options: {
        renderActions: {
          findScript: [10, doc => {
            document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
              const display = !!node.type.match(/; *mode=display/);
              const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
              const text = document.createTextNode('');
              node.parentNode.replaceChild(text, node);
              math.start = {node: text, delim: '', n: 0};
              math.end = {node: text, delim: '', n: 0};
              doc.math.push(math);
            });
          }, '', false],
          insertedScript: [200, () => {
            document.querySelectorAll('mjx-container').forEach(node => {
              let target = node.parentNode;
              if (target.nodeName.toLowerCase() === 'li') {
                target.parentNode.classList.add('has-jax');
              }
            });
          }, '', false]
        }
      }
    };
    (function () {
      var script = document.createElement('script');
      script.src = '//cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js';
      script.defer = true;
      document.head.appendChild(script);
    })();
  } else {
    MathJax.startup.document.state(0);
    MathJax.texReset();
    MathJax.typeset();
  }
</script>

    

  

</body>
</html>
